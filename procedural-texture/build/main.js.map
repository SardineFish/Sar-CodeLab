{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///(webpack)/buildin/module.js","webpack:///(webpack)/buildin/amd-define.js","webpack:///./src/main.ts","webpack:///./lib/ace-builds/src-noconflict/ace.js","webpack:///./lib/ace-builds/src-noconflict/ext-language_tools.js","webpack:///./src/lib.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","webpackPolyfill","deprecate","paths","children","Error","$","selector","document","querySelector","userlib","initCanvas","config","canvas","width","height","onEditorChanged","setTimeout","code","editor","session","getDocument","getValue","renderCaller","_userConfig","background","Color","transparent","normalizedInput","livePreview","on","off","render","func","ctx","getContext","data","getImageData","imgY","imgX","pos","vec2","color","x","y","idx","Math","floor","g","b","a","Array","putImageData","eval","ace","set","edit","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","autoScrollEditorIntoView","hScrollBarAlwaysVisible","vScrollBarAlwaysVisible","fontSize","fontFamily","setTheme","setMode","fetch","then","response","text","setValue","lib","addEventListener","global","this","window","define","deps","payload","arguments","length","payloads","original","apply","console","error","trace","root","_require","parentId","callback","lookup","undefined","toString","params","dep","require","push","packagedModule","normalizeModule","moduleName","indexOf","chunks","split","charAt","slice","join","previous","replace","mod","id","uri","packaged","Element","remove","writable","configurable","parentNode","removeChild","OS","LINUX","MAC","WINDOWS","getOS","isMac","isLinux","_navigator","navigator","os","exec","platform","toLowerCase","ua","userAgent","appName","isWin","isIE","parseFloat","match","isOldIE","isGecko","isMozilla","isOpera","opera","isWebKit","isChrome","isEdge","isAIR","isAndroid","isChromeOS","isIOS","test","MSStream","isMobile","useragent","buildDom","arr","parent","refs","txt","createTextNode","appendChild","isArray","els","ch","el","createElement","options","childIndex","keys","forEach","val","className","setAttribute","getDocumentHead","doc","head","getElementsByTagName","documentElement","tag","createElementNS","removeChildren","element","innerHTML","textContent","ownerDocument","createFragment","createDocumentFragment","hasCssClass","addCssClass","removeCssClass","classes","index","splice","toggleCssClass","add","setCssClass","node","include","hasCssString","sheets","querySelectorAll","importCssString","cssText","target","container","getRootNode","style","insertBefore","firstChild","importCssStylsheet","rel","href","scrollbarWidth","inner","minWidth","display","outer","position","left","overflow","body","noScrollbar","offsetWidth","withScrollbar","clientWidth","computedStyle","getComputedStyle","setStyle","styles","HAS_CSS_ANIMATION","HAS_CSS_TRANSFORMS","HI_DPI","devicePixelRatio","div","transform","animationName","translate","tx","ty","round","top","inherits","ctor","superCtor","super_","constructor","mixin","obj","implement","proto","oop","Keys","ret","MODIFIER_KEYS","16","17","18","224","91","92","93","KEY_MODS","FUNCTION_KEYS","8","9","13","19","27","32","33","34","35","36","37","38","39","40","44","45","46","96","97","98","99","100","101","102","103","104","105","112","113","114","115","116","117","118","119","120","121","122","123","144","145","PRINTABLE_KEYS","48","49","50","51","52","53","54","55","56","57","59","61","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","107","109","110","186","187","188","189","190","191","192","219","220","221","222","111","106","parseInt","enter","escape","esc","del","mods","pow","filter","keyCodeToString","keyCode","keyString","String","fromCharCode","activeListenerOptions","pressedKeys","ts","getListenerOptions","createComment","passive","e","detectListenerOptionsSupport","EventListener","elem","type","destroy","removeListener","addListener","destroyer","$toDestroy","removeEventListener","stopEvent","stopPropagation","preventDefault","getButton","ctrlKey","altKey","shiftKey","button","capture","eventHandler","releaseCaptureHandler","onMouseUp","addMouseWheelListener","wheelDeltaX","wheelX","wheelY","wheelDeltaY","wheelDelta","deltaMode","DOM_DELTA_PIXEL","deltaX","deltaY","DOM_DELTA_LINE","DOM_DELTA_PAGE","axis","HORIZONTAL_AXIS","detail","addMultiMouseDownListener","elements","timeouts","callbackName","startX","startY","timer","clicks","eventNames","2","3","4","onMousedown","isNewClick","abs","clientX","clientY","clearTimeout","_clicks","getModifierHash","metaKey","normalizeCommandKeys","hashId","getModifierState","altGr","location","keyLocation","timeStamp","defaultPrevented","resetPressedKeys","getModifierString","addCommandKeyListener","isOldGecko","lastKeyDownKeyCode","lastDefaultPrevented","result","postMessage","postMessageId","nextTick","win","messageName","listener","$idleBlocked","onIdle","cb","timeout","handler","$idleBlockId","blockIdle","delay","nextFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","Range","startRow","startColumn","endRow","endColumn","start","row","column","end","isEqual","range","contains","compare","compareRange","cmp","comparePoint","containsRange","intersects","isEnd","isStart","setStart","setEnd","inside","insideStart","insideEnd","isMultiLine","compareStart","compareEnd","compareInside","clipRows","firstRow","lastRow","fromPoints","extend","isEmpty","clone","collapseRows","max","toScreenRange","screenPosStart","documentToScreenPosition","screenPosEnd","moveBy","comparePoints","p1","p2","last","stringReverse","string","reverse","stringRepeat","count","trimBeginRegexp","trimEndRegexp","stringTrimLeft","stringTrimRight","copyObject","copy","copyArray","array","deepCopy","arrayToMap","map","createMap","props","arrayRemove","escapeRegExp","str","escapeHTML","getMatchOffsets","regExp","matches","offset","deferredCall","fcn","deferred","cancel","schedule","isPending","delayedCall","defaultTimeout","_self","$cancelT","lineMode","pasteCancelled","Date","now","event","dom","lang","clipboard","BROKEN_SETDATA","USE_IE_MIME_TYPE","HAS_FOCUS_ARGS","KEYS","MODS","valueResetRegex","TextInput","host","opacity","copied","pasted","inComposition","sendingText","tempStyle","commandMode","ignoreFocusEvents","lastValue","lastSelectionStart","lastSelectionEnd","lastRestoreEnd","isFocused","activeElement","onBlur","hasFocus","onFocus","resetSelection","$focusScroll","focus","preventScroll","isTransformed","getBoundingClientRect","ancestors","parentElement","nodeType","removeAttribute","blur","curOp","commandName","command","isUserAction","docChanged","selectionChanged","onCompositionEnd","newValue","selectionEnd","selection","setSelectionRange","afterContextMenu","selectionStart","line","getRange","cursor","getLine","prevLine","nextLine","inputHandler","setInputHandler","getInputHandler","sendText","fromInput","onPaste","extendLeft","extendRight","inserted","restoreStart","restoreEnd","endIndex","shouldReset","onTextInput","onInput","onCompositionUpdate","inputType","execCommand","MAX_LINE_LENGTH","handleClipboardData","forceIEMime","clipboardData","mime","setData","getData","doCopy","isCut","getCopyText","onCut","onCopy","select","onCommandKey","isAllSelected","selectAll","$readOnly","cancelComposition","useTextareaForIME","markerRange","context","compositionStartOffset","closeTimeout","syncComposition","onContextMenuClose","renderer","$isMousePressed","$keepTextAreaAtCursor","$moveTextAreaToCursor","onCompositionStart","_signal","getSelectionRange","msGetInputContext","getInputContext","getElement","setCommandMode","readOnly","setReadOnly","setCopyWithEmptySelection","onContextMenu","_emit","domEvent","moveToMouse","bringToFront","characterWidth","rect","borderTopWidth","borderLeftWidth","maxTop","bottom","clientHeight","move","min","textInput","scroller","typingResetTimeout","typing","detectArrowKeys","$mouseHandler","isMousePressed","modifier","up","home","option","down","right","shift","commands","findKeyCommand","addIosSelectionHandler","$setUserAgentForTests","_isMobile","_isIOS","DefaultHandlers","mouseHandler","$clickSelection","setDefaultHandler","onMouseDown","onDoubleClick","onTripleClick","onQuadClick","onMouseWheel","selectByLines","extendSelectionBy","selectByWords","calcRangeOrientation","anchor","ev","inSelection","getDocumentPosition","mousedownEvent","moveToPosition","time","$focusTimeout","inMultiSelectMode","captureMouse","startSelect","setState","waitForClickSelection","screenToTextCoordinates","getShiftKey","selectToPosition","setCapture","orientedRange","setSelectionAnchor","scrollCursorIntoView","unitName","cmpStart","cmpEnd","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","unsetStyle","releaseCapture","focusWait","ax","ay","bx","by","distance","sqrt","getBracketRange","getWordRange","getLineRange","getAccelKey","$lastScroll","vx","vy","allowed","prevScroll","dt","direction","canScroll","isScrollableBy","speed","scrollBy","stop","Tooltip","isOpen","$element","$parentNode","$init","setText","setHtml","html","setPosition","setClassName","show","hide","getHeight","offsetHeight","getWidth","GutterTooltip","windowWidth","innerWidth","windowHeight","innerHeight","GutterHandler","tooltipTimeout","mouseEvent","tooltipAnnotation","gutter","$gutterLayer","tooltip","hideTooltip","moveTooltip","getRegion","selectTo","srcElement","$tooltipFollowsMouse","annotation","$annotations","getLength","screenRow","pixelToScreenCoordinates","$pos","documentToScreenRow","showTooltip","$gutter","MouseEvent","$inSelection","propagationStopped","selectionRange","DragdropHandler","blankImage","src","dragSelectionMarker","timerId","dragCursor","dragOperation","isInternal","autoScrollStartTime","cursorMovedTime","cursorPointOnCaretMoved","mouseTarget","counter","onDragInterval","prevCursor","vMovement","hMovement","moveCursorToPosition","calcDistance","lineHeight","layerConfig","editorRect","offsets","nearestXOffset","nearestYOffset","scrollCursor","vScroll","hScroll","autoScroll","addDragMarker","toOrientedRange","addMarker","getSelectionStyle","clearSelection","$cursorLayer","setBlinking","clearInterval","setInterval","onMouseMove","clearDragMarker","removeMarker","fromOrientedRange","$resetCursorStyle","onDragStart","cancelDrag","draggable","self","dataTransfer","effectAllowed","getReadOnly","scrollTop","setDragImage","clearData","getTextRange","onDragEnd","dropEffect","setCursorStyle","onDragEnter","canAccept","getDropEffect","onDragOver","onMouseMoveTimer","onDragLeave","onDrop","moveText","dropData","insert","types","some","copyAllowed","copyModifierState","dragWait","getDragDelay","startDrag","dragWaitEnd","dragReadyEnd","cursorStyle","onMouseDrag","state","dragDrop","$dragEnabled","eventTarget","unselectable","addTouchListeners","touchStartT","lastT","longTouchTimer","animationTimer","pressed","contextMenu","animationSteps","clickCount","vX","vY","createContextMenu","handleClick","selected","hasUndo","action","getAttribute","getUndoManager","replaceChild","class","readText","writeText","ontouchstart","ontouchend","onclick","showContextMenu","pagePos","textToScreenCoordinates","leftOffset","pageX","scrollLeft","pageY","hideContextMenu","handleLongTap","selectWord","touches","h","w","touchObj","setRange","switchToSelectionMode","cursorPos","getPixelPosition","anchorPos","offsetTop","offsetLeft","weightedDistance","diff1","diff2","oldScrollTop","getScrollTop","url","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","send","loadScript","path","onload","_","isAbort","qualifyURL","EventEmitter","_dispatchEvent","eventName","_eventRegistry","_defaultHandlers","listeners","defaultHandler","once","newCallback","Promise","resolve","handlers","_disabled_","old","disabled","removeDefaultHandler","pop","capturing","removeAllListeners","optionsProvider","optList","setOption","getOptions","optionNames","$options","hidden","getOption","opt","warn","forwardTo","handlesSet","message","reportError","msg","AppConfig","$defaultOptions","defineOptions","initialValue","resetOptions","setDefaultValue","opts","setDefaultValues","optionHash","net","workerPath","modePath","themePath","basePath","suffix","$moduleUrls","loadWorkerFromBlob","sharedPopups","all","$modes","moduleUrl","component","parts","sep","base","re","RegExp","setModuleUrl","subst","$loading","loadModule","onLoad","moduleType","afterLoad","reportErrorIfPathIsNotConfigured","init","scriptOptions","scriptUrl","currentScript","_currentScript","scripts","script","attributes","j","attr","m1","toUpperCase","version","DefaultGutterHandler","MouseHandler","focusEditor","getMouseEventTarget","onMouseEvent","scrollBarV","scrollBarH","Boolean","gutterEl","$dragDelay","character","mousemove","$scrollSpeed","mouseMoveHandler","which","releaseMouse","$mouseMoved","onCaptureEnd","onOperationEnd","onCaptureInterval","$onCaptureMouseMove","endOperation","startOperation","cancelContextMenu","scrollSpeed","dragDelay","dragEnabled","focusTimeout","tooltipFollowsMouse","FoldHandler","fold","getFoldAt","removeFold","expandFold","getUseWrapMode","foldWidgets","onFoldWidgetClick","getParentFoldRangeData","firstRange","addFold","keyUtil","KeyBinding","$editor","$data","$handlers","kb","removeKeyboardHandler","$defaultHandler","addKeyboardHandler","setKeyboardHandler","handleKeyboard","attach","detach","getKeyboardHandler","getStatusText","$callKeyboardHandlers","toExecute","success","args","passEvent","dir","hiLevel","lastArabic","hasUBAT_B","hasUBAT_S","impTab_LTR","impTab_RTL","UnicodeTBL00","UnicodeTBL20","_invertLevel","lev","levels","_array","lo","hi","tmp","len","_getCharClass","chars","ix","wType","nType","cType","rtlCandidate","_getCharacterType","uc","charCodeAt","L","R","EN","ON_R","AN","R_H","B","RLE","DOT","doBidiReorder","textCharTypes","isRtl","logicalFromVisual","bidiLevels","charTypes","impTab","prevState","newClass","newLevel","newState","condPos","_computeLevels","hasBidiCharacters","getVisualFromLogicalIdx","logIdx","rowMap","bidiUtil","bidiRE","BidiHandler","bidiMap","currentRow","charWidths","EOL","showInvisibles","isRtlDir","$isRtl","wrapIndent","EOF","contentWidth","fontMetrics","rtlLineOffset","wrapOffset","isMoveLeftOperation","seenBidi","isBidiRow","docRow","splitIndex","updateRowLine","updateBidiMap","onChange","delta","lines","getDocumentRow","rowCache","$screenRowCache","$getRowCacheIndex","$docRowCache","getSplitIndex","currentIndex","prevIndex","endOfLine","$useWrapMode","splits","$wrapData","indent","substring","size","isFullWidth","getScreenTabSize","$main","substr","markAsDirty","updateCharacterWidths","$characterSize","bidiCharWidth","$measureCharWidth","setShowInvisibles","setEolChar","eolChar","setContentWidth","isRtlLine","setRtlDirection","getCursorPosition","getSelectionAnchor","$bidiHandler","removeInLine","getPosLeft","col","leftBoundary","logicalIdx","getOverwrite","visualIdx","getSelections","startCol","endCol","level","selections","selColMin","selColMax","isSelected","isSelectedPrev","visIdx","offsetToCol","posX","charWidth","Selection","lead","createAnchor","$silent","$cursorChanged","$isEmpty","$keepDesiredColumnOnChange","$desiredColumn","$anchorChanged","getCursor","getPosition","getAnchor","getSelectionLead","isBackwards","$setSelection","Number","MAX_VALUE","anchorRow","anchorColumn","cursorRow","cursorColumn","wasEmpty","wasMultiselect","$moveSelection","mover","moveCursorTo","moveTo","selectUp","moveCursorUp","selectDown","moveCursorDown","selectRight","moveCursorRight","selectLeft","moveCursorLeft","selectLineStart","moveCursorLineStart","selectLineEnd","moveCursorLineEnd","selectFileEnd","moveCursorFileEnd","selectFileStart","moveCursorFileStart","selectWordRight","moveCursorWordRight","selectWordLeft","moveCursorWordLeft","selectAWord","getAWordRange","excludeLastChar","rowEnd","rowStart","foldLine","getFoldLine","selectLine","moveCursorBy","wouldMoveIntoSoftTab","tabSize","isTabStop","getTabSize","getNavigateWithinSoftTabs","firstColumnPosition","screenToDocumentPosition","leadingSpace","getDisplayLine","$useEmacsStyleLineStart","lineEnd","getDocumentLastRowColumnPosition","textEnd","search","moveCursorLongWordRight","rightOfCursor","nonTokenRe","lastIndex","tokenRe","moveCursorLongWordLeft","getFoldStringAt","leftOfCursor","$shortWordEndIndex","whitespaceRe","moveCursorShortWordRight","moveCursorShortWordLeft","$selectLongWords","rows","offsetX","screenPos","lineWidgets","widget","rowsAbove","rowCount","docPos","keepDesiredColumn","moveCursorToScreen","desiredColumn","getRangeOfMovements","toJSON","rangeCount","ranges","r1","fromJSON","rangeList","toSingleRange","addRange","MAX_TOKEN_COUNT","Tokenizer","rules","states","regExps","matchMappings","ruleRegExps","matchTotal","mapping","defaultToken","flag","splitterRurles","rule","caseInsensitive","regex","adjustedregex","matchcount","token","groupCount","tokenArray","onMatch","$arrayTokens","$applyToken","digit","removeCapturingGroups","splitRegex","createSplitterRegexp","$setMaxTokenCount","values","tokens","stack","inChClass","lastCapture","parenOpen","parenClose","square","getLineTokens","startState","currentState","matchAttempts","skipped","next","consumeLineEnd","merge","unshift","TextHighlightRules","$rules","addRules","prefix","nextState","getRules","embedRules","HighlightRules","escapeRules","append","$embeds","getEmbeds","pushState","popState","normalizeRules","processState","processed","toInsert","stateName","includeName","concat","noEscape","keywordMap","createKeywordMapper","ignoreCase","splitChar","keywords","$keywordList","list","word","getKeywords","$keywords","Behaviour","$behaviours","addBehaviours","behaviours","inherit","getBehaviours","TokenIterator","initialRow","initialColumn","$session","$row","$rowTokens","getTokens","getTokenAt","$tokenIndex","stepBackward","stepForward","getCurrentToken","getCurrentTokenRow","getCurrentTokenColumn","rowTokens","tokenIndex","getCurrentTokenPosition","getCurrentTokenRange","SAFE_INSERT_IN_TOKENS","SAFE_INSERT_BEFORE_TOKENS","contextCache","defaultQuotes","initContext","multiSelect","autoInsertedBrackets","autoInsertedRow","autoInsertedLineEnd","maybeInsertedBrackets","maybeInsertedRow","maybeInsertedLineStart","maybeInsertedLineEnd","getWrapped","opening","closing","rowDiff","CstyleBehaviour","getWrapBehavioursEnabled","isSaneInsertion","braces","recordAutoInsert","recordMaybeInsert","$findOpeningBracket","isAutoInsertedClosing","popAutoInsertedClosing","isMaybeInsertedClosing","clearMaybeInsertedClosing","openBracePos","findMatchingBracket","next_indent","$getIndent","getTabString","quotes","$mode","$quotes","lineCommentStart","quote","leftChar","rightChar","rightToken","pair","stringBefore","stringAfter","wordRe","isWordBefore","isWordAfter","charBefore","iterator","$matchTokenType","iterator2","bracket","wordChars","unicode","Mode","$defaultBehaviour","getTokenizer","$tokenizer","$highlightRules","$highlightRuleConfig","blockComment","toggleCommentLines","ignoreBlankLines","shouldRemove","minIndent","Infinity","insertAtTabStop","regexpStart","getUseSoftTabs","uncomment","shouldInsertSpace","commentWithSpace","comment","insertInLine","testRemove","before","after","spaces","lineCommentEnd","regexpEnd","iter","fun","minEmptyLength","toggleBlockComment","colDiff","initialRange","startRange","endRange","getNextLineIndent","tab","checkOutdent","input","autoOutdent","createWorker","createModeDelegates","$id","delegations","scope","functionName","$delegator","method","language","transformAction","param","$behaviour","completionKeywords","ruleItr","aLength","$createKeywordList","getCompletions","score","meta","applyDelta","docLines","doNotValidate","Anchor","$onChange","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","$clipPositionToDocument","$insertRight","point","moveIfEqual","deltaIsInsert","deltaRowShift","deltaColShift","deltaStart","deltaEnd","$getTransformedPoint","noClip","Document","textOrLines","$lines","insertMergedLines","getAllLines","getNewLineCharacter","$split","$detectNewLine","$autoNewLine","$newLineMode","setNewLineMode","newLineMode","getNewLineMode","isNewLine","getLines","getLinesForRange","insertLines","insertFullLines","removeLines","removeFullLines","insertNewLine","clippedPos","clonePos","$clipPosition","deleteFirstNewLine","deleteLastNewLine","deletedLines","removeNewLine","applyDeltas","deltas","revertDeltas","revertDelta","isInsert","$splitAndapplyLargeDelta","$safeApplyDelta","docLength","MAX","from","to","chunk","indexToPosition","newlineLength","positionToIndex","BackgroundTokenizer","tokenizer","running","currentLine","$worker","workerStart","endLine","startLine","processedLines","$tokenizeRow","fireUpdateEvent","setTokenizer","setDocument","first","scheduleStart","$updateOnChange","getState","SearchHighlight","clazz","setRegexp","MAX_RANGES","cache","update","markerLayer","drawSingleLineMarker","FoldLine","foldData","folds","setFoldLine","shiftRow","sameRow","sort","containsRow","walk","lastEnd","isNewRow","placeholder","getNextFoldTo","kind","addRemoveChars","log","foldBefore","newFoldLine","foldLineNext","idxToPosition","lastFoldEndColumn","RangeList","$bias","pointIndex","excludeEdges","startIndex","addList","removed","substractPoint","containsPoint","rangeAtPoint","clipped","removeAll","lineDif","Fold","subFolds","consumePoint","restorePoint","subFold","collapseChildren","addSubFold","afterStart","firstConsumed","consumedFolds","k","restoreRange","Folding","side","getFoldsInRange","foldLines","$foldData","foundFolds","getFoldsInRangeList","getAllFolds","trim","lastFold","startFoldLine","getNextFoldLine","getFoldedRowCount","$addFoldLine","added","$clipRangeToDocument","startFold","endFold","removeFolds","$updateWrapData","$updateRowLengthCache","$modified","addFolds","$updating","cloneFolds","foldAll","expandFolds","unfold","expandInner","isRowFolded","startFoldRow","getRowFoldEnd","getRowFoldStart","getFoldDisplayLine","textLine","lastColumn","$cloneFoldData","fd","toggleFold","tryToUnfold","bracketPos","getCommentFoldRange","depth","getFoldWidget","getFoldWidgetRange","foldToLevel","foldAllComments","$foldStyles","$foldStyle","setFoldStyle","$foldMode","$setFolding","foldMode","$updateFoldWidgets","$tokenizerUpdateFoldWidgets","updateFoldWidgets","tokenizerUpdateFoldWidgets","ignoreCurrent","fw","siblings","$toggleFoldWidget","toggleFoldWidget","toggleParent","BracketMatch","chr","charBeforeCursor","$findClosingBracket","getMatchingBracketRanges","$brackets","typeRe","openBracket","valueIndex","closingBracket","valueLength","TextMode","EditSession","$breakpoints","$decorations","$frontMarkers","$backMarkers","$markerId","$undoSelect","$uid","onChangeFold","bgTokenizer","resetCaches","$resetRowCache","cacheArray","low","mid","$rowLengthCache","removedFolds","$updateInternalDataOnChange","$fromUndo","$undoManager","mergeUndoDeltas","$informUndoManager","setUndoManager","reset","getSelection","undoManager","addSession","$syncInformUndoManager","markUndoGroup","$defaultUndoManager","undo","redo","hasRedo","addSelection","startNewGroup","setUseSoftTabs","$useSoftTabs","$indentWithTabs","setTabSize","$tabSize","setNavigateWithinSoftTabs","navigateWithinSoftTabs","$navigateWithinSoftTabs","$overwrite","setOverwrite","overwrite","toggleOverwrite","addGutterDecoration","removeGutterDecoration","getBreakpoints","setBreakpoints","clearBreakpoints","setBreakpoint","clearBreakpoint","inFront","marker","addDynamicMarker","markerId","getMarkers","highlight","$searchHighlight","highlightLines","setAnnotations","annotations","getAnnotations","clearAnnotations","inToken","wordRange","setUseWorker","useWorker","getUseWorker","$useWorker","onReloadTokenizer","$modeId","$onChangeMode","$isPlaceholder","oldMode","$stopWorker","$startWorker","attachToSession","wrapMethod","$wrapMethod","foldingRules","terminate","getMode","$scrollTop","setScrollTop","isNaN","$scrollLeft","setScrollLeft","getScrollLeft","getScreenWidth","$computeWidth","getLineWidgetMaxWidth","screenWidth","lineWidgetsWidth","lineWidgetWidth","force","$wrapLimit","longestScreenLine","foldIndex","foldStart","$getStringScreenWidth","undoChanges","dontSelect","selectionBefore","$getUndoSelection","redoChanges","selectionAfter","setUndoSelect","enable","isUndo","fromRange","toPosition","toRange","collDiff","oldStart","newStart","indentRows","indentString","outdentRows","rowRange","deleteRange","$moveLines","diff","$clipRowToDocument","moveLinesUp","moveLinesDown","duplicateLines","$clipColumnToRow","$wrapLimitRange","setUseWrapMode","useWrapMode","setWrapLimitRange","adjustWrapLimit","desiredLimit","$printMargin","limits","wrapLimit","$constrainWrapLimit","getWrapLimit","setWrapLimit","limit","getWrapLimitRange","foldLineBefore","wrapData","walkTokens","$getDisplayTokens","PLACEHOLDER_START","PLACEHOLDER_BODY","$computeWrapSplits","displayLength","lastSplit","lastDocSplit","isCode","$wrapAsCode","indentedSoftWrap","$indentedSoftWrap","maxIndent","addSplit","indentation","getWrapIndent","minSplit","maxScreenColumn","screenColumn","getRowLength","getRowLineCount","getRowWrapIndent","getScreenLastRowColumn","documentToScreenColumn","getDocumentLastRowColumn","docColumn","getRowSplitData","screenToDocumentRow","screenToDocumentColumn","rowLength","doCache","maxRow","foldStartRow","wrapRow","screenRowOffset","getScreenLength","screenRows","$getWidgetScreenLength","$setFontMetrics","fm","$enableVarChar","getCharacterWidth","wrap","$wrap","firstLineNumber","useSoftTabs","foldStyle","Search","find","$matchIterator","sr","sc","er","ec","skipCurrent","findAll","needle","$assembleRegExp","$isMultiLine","prevRange","replacement","preserveCase","$disableFakeMultiline","wholeWord","wordBoundary","addWordBoundary","caseSensitive","$assembleMultilineRegExp","backwards","forEachInLine","HashHandler","commandKeyBinding","addCommands","$singleCommand","MultiHashHandler","bindKey","isDefault","addCommand","removeCommand","_buildKeyHash","keepCommand","ckb","keyId","cmdGroup","keyPart","chain","binding","parseKeys","_addCommandToBinding","removeCommands","bindKeys","keyList","$keyChain","CommandManager","byName","$checkCommandState","isAvailable","returnValue","toggleRecording","$inReplay","recording","macro","$addCommandToMacro","oldMacro","replay","trimMacro","mac","showSettingsMenu","showErrorMarker","scrollIntoView","description","centerSelection","gotoLine","prompt","$type","multiSelectAction","getAllRanges","findNext","findPrevious","aceCommandGroup","navigateFileStart","navigateUp","times","navigateFileEnd","navigateDown","navigateWordLeft","navigateLineStart","navigateLeft","navigateWordRight","navigateLineEnd","navigateRight","selectPageDown","scrollPageDown","gotoPageDown","selectPageUp","scrollPageUp","gotoPageUp","jumpToMatching","$copyWithEmptySelection","$handlePaste","duplicateSelection","sortLines","modifyNumber","copyLinesUp","copyLinesDown","removeToLineStart","removeToLineEnd","removeWordLeft","removeWordRight","blockOutdent","blockIndent","splitLine","transposeLetters","transposeSelections","autoIndent","firstLineEndCol","selectedCount","insertLine","curLine","newRanges","exitMultiSelectMode","defaultCommands","Editor","getContainerElement","getTextAreaContainer","textarea","keyBinding","$search","$historyTracker","$initOperationListeners","_$emitInputEvent","setSession","$opResetTimer","$lastSel","prevOp","commandEvent","previousCommand","scrollSelectionIntoView","animateScrolling","sel","$mergeableCommands","$mergeUndoDeltas","prev","mergeableCommands","shouldMerge","mergeNextCommand","sequenceStartTime","keyboardHandler","$keybindingId","oldSession","$onDocumentChange","$onTokenizerUpdate","$onChangeTabSize","$onChangeWrapLimit","$onChangeWrapMode","$onChangeFold","$onChangeFrontMarker","$onChangeBackMarker","$onChangeBreakpoint","$onChangeAnnotation","$onCursorChange","$onScrollTopChange","$onScrollLeftChange","$onSelectionChange","onDocumentChange","onChangeMode","onTokenizerUpdate","onChangeTabSize","onChangeWrapLimit","onChangeWrapMode","onChangeFrontMarker","onChangeBackMarker","onChangeBreakpoint","onChangeAnnotation","onCursorChange","onScrollTopChange","onScrollLeftChange","onSelectionChange","updateFull","oldEditor","getSession","resize","onResize","theme","getTheme","getFontSize","setFontSize","$highlightBrackets","$highlightPending","$bracketHighlight","markerIds","getMatching","markerType","$highlightTags","$highlightTagPending","$tagHighlight","currentTag","prevToken","stepCount","tmpToken","sbm","$isFocused","showCursor","visualizeFocus","hideCursor","visualizeBlur","$cursorChange","updateCursor","$updateHighlightActiveLine","updateLines","scrollToY","scrollToX","$highlightActiveLine","$selectionStyle","$selectionColorConflict","$maxLines","$minLines","$highlightLineMarker","$selectionMarker","$highlightSelectedWord","$getSelectionHighLightRegexp","wordWithBoundary","updateFrontMarkers","updateBackMarkers","updateBreakpoints","updateText","getSelectedText","nl","copyLine","inVirtualSelectionMode","isFullLine","getBehavioursEnabled","lineState","shouldOutdent","$enableAutoIndent","lineIndent","selectedRange","currIndent","prevLineState","composition","applyComposition","forEachSelection","setScrollSpeed","getScrollSpeed","setDragDelay","setSelectionStyle","setHighlightActiveLine","shouldHighlight","getHighlightActiveLine","setHighlightGutterLine","getHighlightGutterLine","setHighlightSelectedWord","getHighlightSelectedWord","setAnimatedScroll","shouldAnimate","getAnimatedScroll","getShowInvisibles","setDisplayIndentGuides","getDisplayIndentGuides","setShowPrintMargin","showPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","setBehavioursEnabled","enabled","setWrapBehavioursEnabled","setShowFoldWidgets","getShowFoldWidgets","setFadeFoldWidgets","fade","getFadeFoldWidgets","new_range","swap","originalRange","$getSelectedRows","getNumberAt","_numberRx","amount","charRange","isFinite","nr","fp","decimals","nnr","toFixed","replaceRange","toggleWord","$toggleWordPairs","currWordStart","wordParts","curLength","itLength","that","item","reg","wordPairs","negate","firstCondition","res","endPoint","moved","totalDiff","rangeIndex","subRows","compositionState","showComposition","setCompositionText","hideComposition","getFirstVisibleRow","getLastVisibleRow","isRowVisible","isRowFullyVisible","getFirstFullyVisibleRow","getLastFullyVisibleRow","$getVisibleRowCount","getScrollBottomRow","getScrollTopRow","$moveByPage","scrollToRow","scrollToLine","center","animate","alignCursor","getCursorPositionScreen","expand","matchType","bracketType","found","brackets","lineNumber","navigateTo","replaced","$tryReplace","replaceAll","getLastSearchOptions","newRange","revealRange","setAutoScrollEditorIntoView","shouldScroll","$scrollAnchor","scrollAnchor","onChangeSelection","onBeforeRender","onAfterRender","searchBox","$pixelPos","$cursorStyle","cursorLayer","setSmoothBlinking","isBlinking","selectionStyle","highlightActiveLine","highlightSelectedWord","copyWithEmptySelection","behavioursEnabled","wrapBehavioursEnabled","enableAutoIndent","showLineNumbers","setShowLineNumbers","$loop","CHANGE_GUTTER","$relativeLineNumbers","relativeNumberRenderer","relativeLineNumbers","$showLineNumbers","$updatePlaceholder","$composition","placeholderNode","$placeholder","content","highlightGutterLine","animatedScroll","printMarginColumn","printMargin","fadeFoldWidgets","showFoldWidgets","displayIndentGuides","showGutter","maxLines","minLines","scrollPastEnd","fixedWidthGutter","hasCssTransforms","maxPixelHeight","getText","lastLineNumber","$renderer","UndoManager","$maxRev","allowMerge","$lastDelta","$keepRedoStack","$redoStack","lastDeltas","$undoStack","$rev","rev","markIgnored","ignore","getRevision","getDeltas","getChangedRanges","getChangedLines","deltaSet","swapped","swapGroups","rearrangeUndoStack","$redoStackBaseRev","undoSelectionRange","$syncRev","redoStack","deltaSets","moveDeltasByOne","rebaseRedoStack","redoSelectionRange","nextDelta","mark","canUndo","canRedo","bookmark","isAtBookmark","isClean","markClean","$prettyPrint","stringifyDelta","stringifyRange","d1","d2","i1","i2","ds1","ds2","xform","c1","splitDelta","shiftPos","rowsBefore","otherLines","cloneDelta","xformed","Lines","canvasHeight","cells","cellCache","$offsetCoefficient","moveContainer","firstRowScreen","pageChanged","oldConfig","newConfig","computeLineTop","screenTop","screenPage","computeLineHeight","$cacheCell","cell","fragment","insertAdjacentElement","createCell","initElement","Gutter","parentEl","$showFoldWidgets","gutterWidth","$updateAnnotations","onCreateCell","textNode","foldWidget","rowInfo","annoText","gutterOffset","oldLastRow","$updateCursorRow","$renderCell","$updateGutterWidth","gutterRenderer","$firstLineNumber","lastLineText","$fixedWidth","padding","$padding","$computePadding","ceil","$highlightGutterLine","$cursorRow","updateLineHighlight","$cursorCell","scrollLines","$renderLines","childNodes","breakpoints","decorations","foldHeight","getShowLineNumbers","paddingLeft","borderRightWidth","paddingRight","Marker","setPadding","setMarkers","markers","elt","css","$getTop","drawFullLineMarker","drawScreenLineMarker","drawTextMarker","drawMultiLineMarker","childElementCount","lastChild","stringBuilder","extraStyle","curr","lineRange","range1","drawBidiSingleLineMarker","radiusClass","extraLength","Text","$updateEolChar","EOF_CHAR","EOL_CHAR_LF","EOL_CHAR_CRLF","EOL_CHAR","TAB_CHAR","SPACE_CHAR","margin","getLineHeight","$fontMetrics","measure","$pollSizeChanges","checkForSizeChanges","$pollSizeChangesTimer","$computeTabString","showSpaces","showTabs","showEOL","$tabStrings","tabStr","span","$indentGuideRe","spaceClass","spaceContent","tabClass","tabContent","lineElements","lineElementsIdx","heightChanged","lineElement","$renderLine","$renderLinesFragment","lineEl","$useLineGroups","$textToken","$renderToken","valueFragment","simpleSpace","controlCharacter","cjkSpace","cjk","cloneNode","com","renderIndentGuide","cols","$createLineElement","$renderWrappedLine","splitChars","$renderOverflowMessage","$renderSimpleLine","overflowEl","$getFoldLineTokens","lastLineEl","invisibleEl","renderTokens","addTokens","Cursor","isVisible","blinkInterval","smoothBlinking","cursors","addCursor","$updateCursors","$updateOpacity","$startCssAnimation","animationDuration","$stopCssAnimation","blinking","restartTimer","setBlinkInterval","removeCursor","intervalId","timeoutId","blink","onScreen","isCursorInView","pixelPos","maxHeight","$selectionMarkers","cursorIndex","drawCursor","$setOverwrite","ScrollBar","classSuffix","setVisible","skipEvent","onScroll","coeff","VScrollBar","scrollHeight","$scrollbarWidth","$minWidth","setHeight","setInnerHeight","setScrollHeight","HScrollBar","setWidth","setInnerWidth","setScrollWidth","ScrollBarV","ScrollBarH","RenderLoop","onRender","pending","changes","$recursionLimit","_flush","change","clear","USE_OBSERVER","ResizeObserver","FontMetrics","$setMeasureNodeStyles","$measureNode","$addObserver","isRoot","visibility","whiteSpace","font","$measureSizes","fontWeight","boldSize","charSizes","allowBoldFonts","$observer","observe","setPolling","disconnect","$getZoom","getZoom","zoom","$initTransformMeasureNodes","transformCoordinates","clientPos","elPos","mul","solve","l1","l2","det","sub","m2","ut","u","f","GutterLayer","MarkerLayer","TextLayer","CursorLayer","editorCss","HIDE_TEXTAREA","VirtualRenderer","onGutterResize","$markerBack","textLayer","$textLayer","$markerFront","$horizScroll","$vScroll","scrollBar","$scrollAnimation","scrollMargin","updateCharacterSize","$size","scrollerHeight","scrollerWidth","$dirty","minHeight","v","$renderChanges","defaultView","CHANGE_FULL","CHANGE_CURSOR","CHANGE_MARKER","CHANGE_SCROLL","CHANGE_LINES","CHANGE_TEXT","CHANGE_SIZE","CHANGE_MARKER_BACK","CHANGE_MARKER_FRONT","CHANGE_H_SCROLL","$allowBoldFonts","$updatePrintMargin","onChangeNewLineMode","$changedLines","updateFontSize","$changes","$updateSizeAsync","resizing","scrollWidth","$updateCachedSize","$extraHeight","oldSize","$showGutter","$computeLayerConfig","availableWidth","$showPrintMargin","$printMarginColumn","$animatedScroll","getShowGutter","setShowGutter","$printMarginEl","containerEl","posTop","posLeft","setScrollMargin","sm","setMargin","getHScrollBarAlwaysVisible","$hScrollBarAlwaysVisible","setHScrollBarAlwaysVisible","alwaysVisible","getVScrollBarAlwaysVisible","$vScrollBarAlwaysVisible","setVScrollBarAlwaysVisible","$updateScrollBarV","$scrollPastEnd","$updateScrollBarH","$frozen","freeze","unfreeze","st","$updateLines","$autosize","desiredHeight","$maxPixelHeight","$gutterWidth","hideScrollbars","longestLine","$getLongestLine","horizScroll","hScrollChanged","vScrollBefore","vScrollChanged","firstRowHeight","lineCount","charCount","$viewMargin","topMargin","bottomMargin","alignment","STEPS","$calcSteps","fromValue","toValue","x_min","steps","initialScroll","oldSteps","$timer","scrollTo","canvasPos","$hasCssTransforms","$blockCursor","$useTextareaForIME","addToken","removeExtraToken","newToken","$themeId","cssClass","$theme","isDark","setMouseCursor","attachToShadowRoot","workerUrl","Worker","blob","Blob","blobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","getBlob","$workerBlob","blobURL","URL","webkitURL","createObjectURL","WorkerClient","worker","$createWorkerFromOldConfig","$sendDeltaQueue","changeListener","onMessage","callbackId","callbacks","onmessage","topLevelNamespaces","classname","importScripts","nameToUrl","toUrl","normalizePath","$normalizePath","tlns","err","deltaQueue","$doc","cmd","emit","ex","attachToDocument","q","UIWorkerClient","main","emitSync","sender","messageBuffer","workerClient","processNext","setEmitSync","Main","PlaceHolder","others","mainClass","othersClass","$onUpdate","onUpdate","$others","undoStack","$undostack","$undoStackDepth","setup","other","showOtherMarkers","othersActive","hideOtherMarkers","updateAnchors","lengthDiff","inMainRange","distanceFromStart","newPos","otherPos","updateMarkers","updateMarker","undosRequired","isSamePoint","alt","ctrl","accel","selectionMode","isMultiSelect","mouseX","mouseY","screenAnchor","screenCursor","$enableJumpToDef","$blockSelectEnabled","addSelectionMarker","oldRange","removeSelectionMarker","tmpSel","rectSel","blockSelect","newCursor","removeSelectionMarkers","rectangularRangeBlock","updateSelectionMarkers","onSelectionInterval","selectMoreLines","selectMore","joinSelections","splitIntoLines","alignCursors","multiSelectCommands","getSelectionMarkers","$blockChangeEvents","$onAddRange","$onRemoveRange","mergeOverlappingRanges","lastRange","$initRangeList","toggleBlockSelection","includeEmptyLines","xBackwards","startOffsetX","endOffsetX","docEnd","yBackwards","MultiSelect","$multiselectOnSessionChange","$onMultiSelect","$onSingleSelect","onSessionChange","$checkMultiselectChange","altCursor","altDown","addAltCursorListeners","selectionMarkerCount","markerList","$onMultiSelectExec","inVirtualMode","keepOrder","$byLines","cmdResult","anim","buf","additive","skip","screenLead","toRemove","words","stopAtFirst","sameRowRanges","maxCol","minSpace","spaceOffsets","spaceOffset","fr","lr","guessRange","$reAlignText","forceLeft","startW","textW","endW","isLeftAligned","isRightAligned","alignLeft","enableMultiselect","enableBlockSelect","FoldMode","foldingStartMarker","foldingStopMarker","indentationBlock","startLevel","openingBracketBlock","closingBracketBlock","LineWidgets","widgetManager","updateOnChange","renderWidgets","measureWidgets","_changedWidgets","$onChangeEditor","updateOnFold","_inDocument","removeLineWidget","$updateRows","noWidgets","$oldWidget","$registerLineWidget","addLineWidget","zIndex","coverGutter","pixelHeight","$fold","onWidgetChanged","w1","getWidgetsAtRow","changedWidgets","fixedWidth","coverLine","fullWidth","oldWidget","gutterAnno","comparator","binarySearch","matched","findAnnotations","arrow","onmousedown","Renderer","_id","getElementById","env","tagName","oldNode","createEditSession","VARIABLES","CURRENT_WORD","SELECTION","CURRENT_LINE","PREV_LINE","LINE_INDEX","LINE_NUMBER","SOFT_TABS","TAB_SIZE","CLIPBOARD","FILENAME","FILEPATH","FILENAME_BASE","DIRECTORY","WORKSPACE_NAME","FULLNAME","BLOCK_COMMENT_START","BLOCK_COMMENT_END","LINE_COMMENT","CURRENT_YEAR","date","year","CURRENT_YEAR_SHORT","CURRENT_MONTH","month","CURRENT_MONTH_NAME","CURRENT_MONTH_NAME_SHORT","CURRENT_DATE","day","CURRENT_DAY_NAME","weekday","CURRENT_DAY_NAME_SHORT","CURRENT_HOUR","hour","hour12","CURRENT_MINUTE","minute","CURRENT_SECOND","second","dateFormat","toLocaleString","SELECTED_TEXT","SnippetManager","snippetMap","snippetNameMap","createTokenizer","TabstopToken","tabstopId","formatMatcher","fmtString","guard","snippetVar","choices","operator","formatString","expectElse","ifEnd","elseEnd","changeCase","local","formatStringVar","formatFunction","tokenizeTmSnippet","getVariableValue","variables","__","tmStrFormat","fmt","fmtTokens","oldArgs","fmtParts","resolveVariables","gChangeCase","tmFormatFunction","snippet","afterNewLine","gotoNext","insertSnippetForSelection","snippetText","tabString","tabstops","parents","expanding","copyValue","lastIndexOf","tabstopManager","TabstopManager","selectionId","addTabstops","insertSnippet","tabNext","$getScope","inlinePhp","getActiveScopes","scopes","includeScopes","expandWithTab","expandSnippetForSelection","snippets","findMatchingSnippet","dryRun","replaceBefore","replaceAfter","M__","matchBefore","T__","matchAfter","snippetList","startRe","endRe","triggerRe","endTriggerRe","register","wrapRegexp","guardedRegexp","addSnippet","unregister","tabTrigger","trigger","endTrigger","endGuard","removeSnippet","nameMap","parseSnippetFile","JSON","parse","guardRe","getSnippetByName","$onChangeSelection","$onChangeSession","onChangeSession","$onAfterExec","onAfterExec","$openTabstops","selectedTabstop","removeTabstopMarkers","isRemove","active","parentActive","removeRange","$inChange","updateLinkedFields","hasLinkedRanges","firstNonLinked","linked","snippetManager","containsLead","containsAnchor","selectTabstop","addTabstopMarkers","useLink","moveRelative","arg","dest","movePoint","tabstop","expandSnippet","$singleLineEditor","AcePopup","popup","lastMouseEvent","noop","selectionMarker","hoverMarker","setSelectOnHover","setRow","setHoverMarker","getRow","selectedNode","hideHoverMarker","suppressRedraw","getHoveredRow","caption","lower","filterText","lastI","matchMask","isTopdown","autoSelect","topdownOnly","screenHeight","maxH","$borderSize","goTo","where","getTextLeftOffset","$imageSize","parForEach","fn","completed","arLength","ID_REGEX","retrievePrecedingIdentifier","retrieveFollowingIdentifier","getCompletionPrefix","completers","completer","identifierRegexps","identifierRegex","util","Autocomplete","autoInsert","exactMatch","gatherCompletionsId","blurListener","mousedownListener","mousewheelListener","changeTimer","updateCompletions","tooltipTimer","updateDocTooltip","insertMatch","getPopup","openPopup","keepPopupPosition","completions","filtered","hideDocTooltip","activated","fromTooltip","relatedTarget","tooltipNode","deleteSuffix","gatherCompletions","total","results","finished","showPopup","setFilter","FilteredList","detachIfFinished","getDocTooltip","docText","docHTML","showDocTooltip","pointerEvents","tabIndex","onblur","onTooltipClick","nodeName","for","$shared","$sharedInstance","startCommand","filterCompletions","$score","localeCompare","items","upper","loop","penalty","fullMatchIndex","wordDistance","prefixPos","getWordIndex","wordScores","currentWord","wordScore","textCompleter","keyWordCompleter","snippetCompleter","setCompleters","addCompleter","loadSnippetsForMode","files","loadSnippetFile","snippetFileId","modes","snippetFilePath","doLiveAutocomplete","hasCompleter","enableSnippets","V2Constructor","Vector2","hypot","magnitude","zero","inverse","super","z","vec3","Vector4","vec4","Vector3","one","V3Constructor","V4Constructor","rgba","_arithOrder","rgb","__to","valueOf","lhs","rhs","plus","invert","minus","inversed","dot","cross","PI"],"mappings":"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AE,EAAE,EAAE,EAAE,GAAG,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,KAAK,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GA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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function() {\n\tthrow new Error(\"define cannot be used indirect\");\n};\n","import * as ace from \"../lib/ace-builds\";\nimport \"../lib/ace-builds/src-noconflict/ext-language_tools\";\nimport { Color, vec2 } from \"./lib\";\n\nconst $ = (selector: string) => <HTMLElement>document.querySelector(selector);\n\ntype RenderFn = (x: number, y: number) => Color | [number, number, number, number] | number;\nlet userlib: string;\n\ninterface Config\n{\n\twidth?: number,\n\theight?: number,\n\tbackground?: string | Color,\n\tnormalizedInput?: boolean,\n\tlivePreview?: boolean,\n}\n\nfunction initCanvas(config: Config)\n{\n\tconst canvas = $(\"#canvas\") as HTMLCanvasElement;\n\tcanvas.width = config.width ?? 256;\n\tcanvas.height = config.height ?? 256;\n}\nconst onEditorChanged = () =>\n{\n\tsetTimeout(() =>\n\t{\n\t\tconst code = editor.session.getDocument().getValue();\n\t\trenderCaller(userlib + code);\n\t});\n}\nfunction renderCaller(code: string)\n{\n\tlet _userConfig: Config = {\n\t\twidth: 256,\n\t\theight: 256,\n\t\tbackground: Color.transparent,\n\t\tnormalizedInput: false,\n\t\tlivePreview: false,\n\t};\n\n\tinitCanvas(_userConfig);\n\n\tfunction config(config: Config)\n\t{\n\t\t_userConfig = config;\n\t\tinitCanvas(config);\n\t\tif (config.livePreview)\n\t\t{\n\t\t\teditor.on(\"change\", onEditorChanged);\n\t\t}\n\t\telse\n\t\t{\n\t\t\teditor.off(\"change\", onEditorChanged);\n\t\t}\n\t}\n\tfunction render(func: RenderFn)\n\t{\n\t\tconst canvas = $(\"#canvas\") as HTMLCanvasElement;\n\t\tconst ctx = canvas.getContext(\"2d\");\n\t\tconst data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n\t\tfor (let imgY = 0; imgY < canvas.height; imgY++)\n\t\t{\n\t\t\tfor (let imgX = 0; imgX < canvas.width; imgX++)\n\t\t\t{\n\t\t\t\tconst pos = _userConfig.normalizedInput\n\t\t\t\t\t? vec2(imgX / canvas.width, (canvas.height - imgY - 1) / canvas.height)\n\t\t\t\t\t: vec2(imgX, canvas.height - imgY - 1);\n\t\t\t\tconst color = func(pos.x, pos.y);\n\t\t\t\tif (color instanceof Color)\n\t\t\t\t{\n\t\t\t\t\tlet idx = (imgY * data.width + imgX) * 4;\n\t\t\t\t\tdata.data[idx + 0] = Math.floor(color.r * 255);\n\t\t\t\t\tdata.data[idx + 1] = Math.floor(color.g * 255);\n\t\t\t\t\tdata.data[idx + 2] = Math.floor(color.b * 255);\n\t\t\t\t\tdata.data[idx + 3] = Math.floor(color.a * 255);\n\t\t\t\t}\n\t\t\t\telse if (color instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tconst [r, g, b, a] = color;\n\t\t\t\t\tlet idx = (imgY * data.width + imgX) * 4;\n\t\t\t\t\tdata.data[idx + 0] = Math.floor(r * 255);\n\t\t\t\t\tdata.data[idx + 1] = Math.floor(g * 255);\n\t\t\t\t\tdata.data[idx + 2] = Math.floor(b * 255);\n\t\t\t\t\tdata.data[idx + 3] = Math.floor(a * 255);\n\t\t\t\t}\n\t\t\t\telse if (typeof (color) === \"number\")\n\t\t\t\t{\n\t\t\t\t\tlet idx = (imgY * data.width + imgX) * 4;\n\t\t\t\t\tdata.data[idx + 0] = Math.floor(color * 255);\n\t\t\t\t\tdata.data[idx + 1] = Math.floor(color * 255);\n\t\t\t\t\tdata.data[idx + 2] = Math.floor(color * 255);\n\t\t\t\t\tdata.data[idx + 3] = Math.floor(color * 255);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tctx.putImageData(data, 0, 0);\n\t}\n\n\teval(code);\n\n\n}\nace.config.set(\"basePath\", \"lib/ace-builds/src-min-noconflict\");\nconst editor = ace.edit($(\"#editor-wrapper\"));\neditor.setOptions({\n\tenableBasicAutocompletion: true,\n\tenableLiveAutocompletion: true,\n\tautoScrollEditorIntoView: true,\n\thScrollBarAlwaysVisible: true,\n\tvScrollBarAlwaysVisible: true,\n\tfontSize: \"11pt\",\n\tfontFamily: \"consolas\",\n});\neditor.setTheme(\"ace/theme/monokai\");\neditor.session.setMode(\"ace/mode/javascript\");\nfetch(\"lib/user-lib/build/demo.js\")\n\t.then(response => response.text())\n\t.then(code =>\n\t{\n\t\teditor.session.getDocument().setValue(code);\n\t\tfetch(\"lib/user-lib/build/user-lib.js\")\n\t\t\t.then((response) => response.text())\n\t\t\t.then((lib) =>\n\t\t\t{\n\t\t\t\t$(\"#button-render\").addEventListener(\"click\", () =>\n\t\t\t\t{\n\t\t\t\t\tconst code = editor.session.getDocument().getValue();\n\t\t\t\t\trenderCaller(lib + code);\n\t\t\t\t});\n\t\t\t\tuserlib = lib;\n\t\t\t\t// editor.on(\"change\", (e) =>\n\t\t\t\t// {\n\t\t\t\t// \tsetTimeout(() =>\n\t\t\t\t// \t{\n\t\t\t\t// \t\tconst code = editor.session.getDocument().getValue();\n\t\t\t\t// \t\trenderCaller(lib + code);\n\t\t\t\t// \t});\n\t\t\t\t// });\n\n\t\t\t\tvar code = editor.session.getDocument().getValue();\n\t\t\t\trenderCaller(lib + code);\n\t\t\t});\n\t});","/* ***** BEGIN LICENSE BLOCK *****\n * Distributed under the BSD license:\n *\n * Copyright (c) 2010, Ajax.org B.V.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *     * Redistributions of source code must retain the above copyright\n *       notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above copyright\n *       notice, this list of conditions and the following disclaimer in the\n *       documentation and/or other materials provided with the distribution.\n *     * Neither the name of Ajax.org B.V. nor the\n *       names of its contributors may be used to endorse or promote products\n *       derived from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * ***** END LICENSE BLOCK ***** */\n\n/**\n * Define a module along with a payload\n * @param module a name for the payload\n * @param payload a function to call with (require, exports, module) params\n */\n\n(function() {\n\nvar ACE_NAMESPACE = \"ace\";\n\nvar global = (function() { return this; })();\nif (!global && typeof window != \"undefined\") global = window; // strict mode\n\n\nif (!ACE_NAMESPACE && typeof requirejs !== \"undefined\")\n    return;\n\n\nvar define = function(module, deps, payload) {\n    if (typeof module !== \"string\") {\n        if (define.original)\n            define.original.apply(this, arguments);\n        else {\n            console.error(\"dropping module because define wasn\\'t a string.\");\n            console.trace();\n        }\n        return;\n    }\n    if (arguments.length == 2)\n        payload = deps;\n    if (!define.modules[module]) {\n        define.payloads[module] = payload;\n        define.modules[module] = null;\n    }\n};\n\ndefine.modules = {};\ndefine.payloads = {};\n\n/**\n * Get at functionality define()ed using the function above\n */\nvar _require = function(parentId, module, callback) {\n    if (typeof module === \"string\") {\n        var payload = lookup(parentId, module);\n        if (payload != undefined) {\n            callback && callback();\n            return payload;\n        }\n    } else if (Object.prototype.toString.call(module) === \"[object Array]\") {\n        var params = [];\n        for (var i = 0, l = module.length; i < l; ++i) {\n            var dep = lookup(parentId, module[i]);\n            if (dep == undefined && require.original)\n                return;\n            params.push(dep);\n        }\n        return callback && callback.apply(null, params) || true;\n    }\n};\n\nvar require = function(module, callback) {\n    var packagedModule = _require(\"\", module, callback);\n    if (packagedModule == undefined && require.original)\n        return require.original.apply(this, arguments);\n    return packagedModule;\n};\n\nvar normalizeModule = function(parentId, moduleName) {\n    // normalize plugin requires\n    if (moduleName.indexOf(\"!\") !== -1) {\n        var chunks = moduleName.split(\"!\");\n        return normalizeModule(parentId, chunks[0]) + \"!\" + normalizeModule(parentId, chunks[1]);\n    }\n    // normalize relative requires\n    if (moduleName.charAt(0) == \".\") {\n        var base = parentId.split(\"/\").slice(0, -1).join(\"/\");\n        moduleName = base + \"/\" + moduleName;\n\n        while(moduleName.indexOf(\".\") !== -1 && previous != moduleName) {\n            var previous = moduleName;\n            moduleName = moduleName.replace(/\\/\\.\\//, \"/\").replace(/[^\\/]+\\/\\.\\.\\//, \"\");\n        }\n    }\n    return moduleName;\n};\n\n/**\n * Internal function to lookup moduleNames and resolve them by calling the\n * definition function if needed.\n */\nvar lookup = function(parentId, moduleName) {\n    moduleName = normalizeModule(parentId, moduleName);\n\n    var module = define.modules[moduleName];\n    if (!module) {\n        module = define.payloads[moduleName];\n        if (typeof module === 'function') {\n            var exports = {};\n            var mod = {\n                id: moduleName,\n                uri: '',\n                exports: exports,\n                packaged: true\n            };\n\n            var req = function(module, callback) {\n                return _require(moduleName, module, callback);\n            };\n\n            var returnValue = module(req, exports, mod);\n            exports = returnValue || mod.exports;\n            define.modules[moduleName] = exports;\n            delete define.payloads[moduleName];\n        }\n        module = define.modules[moduleName] = exports || module;\n    }\n    return module;\n};\n\nfunction exportAce(ns) {\n    var root = global;\n    if (ns) {\n        if (!global[ns])\n            global[ns] = {};\n        root = global[ns];\n    }\n\n    if (!root.define || !root.define.packaged) {\n        define.original = root.define;\n        root.define = define;\n        root.define.packaged = true;\n    }\n\n    if (!root.require || !root.require.packaged) {\n        require.original = root.require;\n        root.require = require;\n        root.require.packaged = true;\n    }\n}\n\nexportAce(ACE_NAMESPACE);\n\n})();\n\nace.define(\"ace/lib/fixoldbrowsers\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\nif (typeof Element != \"undefined\" && !Element.prototype.remove) {\n    Object.defineProperty(Element.prototype, \"remove\", {\n        enumerable: false,\n        writable: true,\n        configurable: true,\n        value: function() { this.parentNode && this.parentNode.removeChild(this); }\n    });\n}\n\n\n});\n\nace.define(\"ace/lib/useragent\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\nexports.getOS = function() {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    } else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    } else {\n        return exports.OS.WINDOWS;\n    }\n};\nvar _navigator = typeof navigator == \"object\" ? navigator : {};\n\nvar os = (/mac|win|linux/i.exec(_navigator.platform) || [\"other\"])[0].toLowerCase();\nvar ua = _navigator.userAgent || \"\";\nvar appName = _navigator.appName || \"\";\nexports.isWin = (os == \"win\");\nexports.isMac = (os == \"mac\");\nexports.isLinux = (os == \"linux\");\nexports.isIE = \n    (appName == \"Microsoft Internet Explorer\" || appName.indexOf(\"MSAppHost\") >= 0)\n    ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1])\n    : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]); // for ie\n    \nexports.isOldIE = exports.isIE && exports.isIE < 9;\nexports.isGecko = exports.isMozilla = ua.match(/ Gecko\\/\\d+/);\nexports.isOpera = typeof opera == \"object\" && Object.prototype.toString.call(window.opera) == \"[object Opera]\";\nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\n\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\n\nexports.isEdge = parseFloat(ua.split(\" Edge/\")[1]) || undefined;\n\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\n\nexports.isAndroid = ua.indexOf(\"Android\") >= 0;\n\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\n\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;\n\nif (exports.isIOS) exports.isMac = true;\n\nexports.isMobile = exports.isIOS || exports.isAndroid;\n\n});\n\nace.define(\"ace/lib/dom\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar useragent = require(\"./useragent\"); \nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\n\nexports.buildDom = function buildDom(arr, parent, refs) {\n    if (typeof arr == \"string\" && arr) {\n        var txt = document.createTextNode(arr);\n        if (parent)\n            parent.appendChild(txt);\n        return txt;\n    }\n    \n    if (!Array.isArray(arr)) {\n        if (arr && arr.appendChild && parent)\n            parent.appendChild(arr);\n        return arr;\n    }\n    if (typeof arr[0] != \"string\" || !arr[0]) {\n        var els = [];\n        for (var i = 0; i < arr.length; i++) {\n            var ch = buildDom(arr[i], parent, refs);\n            ch && els.push(ch);\n        }\n        return els;\n    }\n    \n    var el = document.createElement(arr[0]);\n    var options = arr[1];\n    var childIndex = 1;\n    if (options && typeof options == \"object\" && !Array.isArray(options))\n        childIndex = 2;\n    for (var i = childIndex; i < arr.length; i++)\n        buildDom(arr[i], el, refs);\n    if (childIndex == 2) {\n        Object.keys(options).forEach(function(n) {\n            var val = options[n];\n            if (n === \"class\") {\n                el.className = Array.isArray(val) ? val.join(\" \") : val;\n            } else if (typeof val == \"function\" || n == \"value\" || n[0] == \"$\") {\n                el[n] = val;\n            } else if (n === \"ref\") {\n                if (refs) refs[val] = el;\n            } else if (val != null) {\n                el.setAttribute(n, val);\n            }\n        });\n    }\n    if (parent)\n        parent.appendChild(el);\n    return el;\n};\n\nexports.getDocumentHead = function(doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\n\nexports.createElement = function(tag, ns) {\n    return document.createElementNS ?\n           document.createElementNS(ns || XHTML_NS, tag) :\n           document.createElement(tag);\n};\n\nexports.removeChildren = function(element) {\n    element.innerHTML = \"\";\n};\n\nexports.createTextNode = function(textContent, element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createTextNode(textContent);\n};\n\nexports.createFragment = function(element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createDocumentFragment();\n};\n\nexports.hasCssClass = function(el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\nexports.addCssClass = function(el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\nexports.removeCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\n\nexports.toggleCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n\n    el.className = classes.join(\" \");\n    return add;\n};\nexports.setCssClass = function(node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    } else {\n        exports.removeCssClass(node, className);\n    }\n};\n\nexports.hasCssString = function(id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n    if ((sheets = doc.querySelectorAll(\"style\"))) {\n        while (index < sheets.length)\n            if (sheets[index++].id === id)\n                return true;\n    }\n};\n\nexports.importCssString = function importCssString(cssText, id, target) {\n    var container = target;\n    if (!target || !target.getRootNode) {\n        container = document;\n    } else {\n        container = target.getRootNode();\n        if (!container || container == target)\n            container = document;\n    }\n    \n    var doc = container.ownerDocument || container;\n    if (id && exports.hasCssString(id, container))\n        return null;\n    \n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    \n    var style = exports.createElement(\"style\");\n    style.appendChild(doc.createTextNode(cssText));\n    if (id)\n        style.id = id;\n\n    if (container == doc)\n        container = exports.getDocumentHead(doc);\n    container.insertBefore(style, container.firstChild);\n};\n\nexports.importCssStylsheet = function(uri, doc) {\n    exports.buildDom([\"link\", {rel: \"stylesheet\", href: uri}], exports.getDocumentHead(doc));\n};\nexports.scrollbarWidth = function(document) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n\n    outer.appendChild(inner);\n\n    var body = document.documentElement;\n    body.appendChild(outer);\n\n    var noScrollbar = inner.offsetWidth;\n\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n\n    if (noScrollbar == withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n\n    body.removeChild(outer);\n\n    return noScrollbar-withScrollbar;\n};\n\nif (typeof document == \"undefined\") {\n    exports.importCssString = function() {};\n}\n\nexports.computedStyle = function(element, style) {\n    return window.getComputedStyle(element, \"\") || {};\n};\n\nexports.setStyle = function(styles, property, value) {\n    if (styles[property] !== value) {\n        styles[property] = value;\n    }\n};\n\nexports.HAS_CSS_ANIMATION = false;\nexports.HAS_CSS_TRANSFORMS = false;\nexports.HI_DPI = useragent.isWin\n    ? typeof window !== \"undefined\" && window.devicePixelRatio >= 1.5\n    : true;\n\nif (typeof document !== \"undefined\") {\n    var div = document.createElement(\"div\");\n    if (exports.HI_DPI && div.style.transform  !== undefined)\n        exports.HAS_CSS_TRANSFORMS = true;\n    if (!useragent.isEdge && typeof div.style.animationName !== \"undefined\")\n        exports.HAS_CSS_ANIMATION = true;\n    div = null;\n}\n\nif (exports.HAS_CSS_TRANSFORMS) {\n    exports.translate = function(element, tx, ty) {\n        element.style.transform = \"translate(\" + Math.round(tx) + \"px, \" + Math.round(ty) +\"px)\";\n    };\n} else {\n    exports.translate = function(element, tx, ty) {\n        element.style.top = Math.round(ty) + \"px\";\n        element.style.left = Math.round(tx) + \"px\";\n    };\n}\n\n});\n\nace.define(\"ace/lib/oop\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nexports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\n\nexports.mixin = function(obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\n\nexports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n\n});\n\nace.define(\"ace/lib/keys\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./oop\");\nvar Keys = (function() {\n    var ret = {\n        MODIFIER_KEYS: {\n            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta',\n            91: 'MetaLeft', 92: 'MetaRight', 93: 'ContextMenu'\n        },\n\n        KEY_MODS: {\n            \"ctrl\": 1, \"alt\": 2, \"option\" : 2, \"shift\": 4,\n            \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8, \n            \"control\": 1\n        },\n\n        FUNCTION_KEYS : {\n            8  : \"Backspace\",\n            9  : \"Tab\",\n            13 : \"Return\",\n            19 : \"Pause\",\n            27 : \"Esc\",\n            32 : \"Space\",\n            33 : \"PageUp\",\n            34 : \"PageDown\",\n            35 : \"End\",\n            36 : \"Home\",\n            37 : \"Left\",\n            38 : \"Up\",\n            39 : \"Right\",\n            40 : \"Down\",\n            44 : \"Print\",\n            45 : \"Insert\",\n            46 : \"Delete\",\n            96 : \"Numpad0\",\n            97 : \"Numpad1\",\n            98 : \"Numpad2\",\n            99 : \"Numpad3\",\n            100: \"Numpad4\",\n            101: \"Numpad5\",\n            102: \"Numpad6\",\n            103: \"Numpad7\",\n            104: \"Numpad8\",\n            105: \"Numpad9\",\n            '-13': \"NumpadEnter\",\n            112: \"F1\",\n            113: \"F2\",\n            114: \"F3\",\n            115: \"F4\",\n            116: \"F5\",\n            117: \"F6\",\n            118: \"F7\",\n            119: \"F8\",\n            120: \"F9\",\n            121: \"F10\",\n            122: \"F11\",\n            123: \"F12\",\n            144: \"Numlock\",\n            145: \"Scrolllock\"\n        },\n\n        PRINTABLE_KEYS: {\n           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',\n           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',\n           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',\n           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',\n           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',\n           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',\n          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n          219: '[', 220: '\\\\',221: ']', 222: \"'\", 111: '/', 106: '*'\n        }\n    };\n    var name, i;\n    for (i in ret.FUNCTION_KEYS) {\n        name = ret.FUNCTION_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    for (i in ret.PRINTABLE_KEYS) {\n        name = ret.PRINTABLE_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n    oop.mixin(ret, ret.MODIFIER_KEYS);\n    oop.mixin(ret, ret.PRINTABLE_KEYS);\n    oop.mixin(ret, ret.FUNCTION_KEYS);\n    ret.enter = ret[\"return\"];\n    ret.escape = ret.esc;\n    ret.del = ret[\"delete\"];\n    ret[173] = '-';\n    \n    (function() {\n        var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n        for (var i = Math.pow(2, mods.length); i--;) {            \n            ret.KEY_MODS[i] = mods.filter(function(x) {\n                return i & ret.KEY_MODS[x];\n            }).join(\"-\") + \"-\";\n        }\n    })();\n\n    ret.KEY_MODS[0] = \"\";\n    ret.KEY_MODS[-1] = \"input-\";\n\n    return ret;\n})();\noop.mixin(exports, Keys);\n\nexports.keyCodeToString = function(keyCode) {\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n\n});\n\nace.define(\"ace/lib/event\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar keys = require(\"./keys\");\nvar useragent = require(\"./useragent\");\n\nvar pressedKeys = null;\nvar ts = 0;\n\nvar activeListenerOptions;\nfunction detectListenerOptionsSupport() {\n    activeListenerOptions = false;\n    try {\n        document.createComment(\"\").addEventListener(\"test\", function() {}, { \n            get passive() { \n                activeListenerOptions = {passive: false};\n            }\n        });\n    } catch(e) {}\n}\n\nfunction getListenerOptions() {\n    if (activeListenerOptions == undefined)\n        detectListenerOptionsSupport();\n    return activeListenerOptions;\n}\n\nfunction EventListener(elem, type, callback) {\n    this.elem = elem;\n    this.type = type;\n    this.callback = callback;\n}\nEventListener.prototype.destroy = function() {\n    removeListener(this.elem, this.type, this.callback);\n    this.elem = this.type = this.callback = undefined;\n};\n\nvar addListener = exports.addListener = function(elem, type, callback, destroyer) {\n    elem.addEventListener(type, callback, getListenerOptions());\n    if (destroyer)\n        destroyer.$toDestroy.push(new EventListener(elem, type, callback));\n};\n\nvar removeListener = exports.removeListener = function(elem, type, callback) {\n    elem.removeEventListener(type, callback, getListenerOptions());\n};\nexports.stopEvent = function(e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\n\nexports.stopPropagation = function(e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n};\n\nexports.preventDefault = function(e) {\n    if (e.preventDefault)\n        e.preventDefault();\n};\nexports.getButton = function(e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n    return e.button;\n};\n\nexports.capture = function(el, eventHandler, releaseCaptureHandler) {\n    var ownerDocument = el && el.ownerDocument || document;\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n\n        removeListener(ownerDocument, \"mousemove\", eventHandler);\n        removeListener(ownerDocument, \"mouseup\", onMouseUp);\n        removeListener(ownerDocument, \"dragstart\", onMouseUp);\n    }\n\n    addListener(ownerDocument, \"mousemove\", eventHandler);\n    addListener(ownerDocument, \"mouseup\", onMouseUp);\n    addListener(ownerDocument, \"dragstart\", onMouseUp);\n    \n    return onMouseUp;\n};\n\nexports.addMouseWheelListener = function(el, callback, destroyer) {\n    if (\"onmousewheel\" in el) {\n        addListener(el, \"mousewheel\", function(e) {\n            var factor = 8;\n            if (e.wheelDeltaX !== undefined) {\n                e.wheelX = -e.wheelDeltaX / factor;\n                e.wheelY = -e.wheelDeltaY / factor;\n            } else {\n                e.wheelX = 0;\n                e.wheelY = -e.wheelDelta / factor;\n            }\n            callback(e);\n        }, destroyer);\n    } else if (\"onwheel\" in el) {\n        addListener(el, \"wheel\",  function(e) {\n            var factor = 0.35;\n            switch (e.deltaMode) {\n                case e.DOM_DELTA_PIXEL:\n                    e.wheelX = e.deltaX * factor || 0;\n                    e.wheelY = e.deltaY * factor || 0;\n                    break;\n                case e.DOM_DELTA_LINE:\n                case e.DOM_DELTA_PAGE:\n                    e.wheelX = (e.deltaX || 0) * 5;\n                    e.wheelY = (e.deltaY || 0) * 5;\n                    break;\n            }\n            \n            callback(e);\n        }, destroyer);\n    } else {\n        addListener(el, \"DOMMouseScroll\", function(e) {\n            if (e.axis && e.axis == e.HORIZONTAL_AXIS) {\n                e.wheelX = (e.detail || 0) * 5;\n                e.wheelY = 0;\n            } else {\n                e.wheelX = 0;\n                e.wheelY = (e.detail || 0) * 5;\n            }\n            callback(e);\n        }, destroyer);\n    }\n};\n\nexports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName, destroyer) {\n    var clicks = 0;\n    var startX, startY, timer; \n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        } else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        } else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);\n\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        \n        e._clicks = clicks;\n\n        eventHandler[callbackName](\"mousedown\", e);\n\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function(el) {\n        addListener(el, \"mousedown\", onMousedown, destroyer);\n    });\n};\n\nvar getModifierHash = function(e) {\n    return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n};\n\nexports.getModifierString = function(e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\n\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = \"location\" in e ? e.location : e.keyLocation;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            } else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    \n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    \n    if (!hashId && keyCode === 13) {\n        var location = \"location\" in e ? e.location : e.keyLocation;\n        if (location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    \n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    \n    return callback(e, hashId, keyCode);\n}\n\n\nexports.addCommandKeyListener = function(el, callback, destroyer) {\n    if (useragent.isOldGecko || (useragent.isOpera && !(\"KeyboardEvent\" in window))) {\n        var lastKeyDownKeyCode = null;\n        addListener(el, \"keydown\", function(e) {\n            lastKeyDownKeyCode = e.keyCode;\n        }, destroyer);\n        addListener(el, \"keypress\", function(e) {\n            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);\n        }, destroyer);\n    } else {\n        var lastDefaultPrevented = null;\n\n        addListener(el, \"keydown\", function(e) {\n            pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n            var result = normalizeCommandKeys(callback, e, e.keyCode);\n            lastDefaultPrevented = e.defaultPrevented;\n            return result;\n        }, destroyer);\n\n        addListener(el, \"keypress\", function(e) {\n            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n                exports.stopEvent(e);\n                lastDefaultPrevented = null;\n            }\n        }, destroyer);\n\n        addListener(el, \"keyup\", function(e) {\n            pressedKeys[e.keyCode] = null;\n        }, destroyer);\n\n        if (!pressedKeys) {\n            resetPressedKeys();\n            addListener(window, \"focus\", resetPressedKeys);\n        }\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\n\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function(callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + (postMessageId++);\n        \n        var listener = function(e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                removeListener(win, \"message\", listener);\n                callback();\n            }\n        };\n        \n        addListener(win, \"message\", listener);\n        win.postMessage(messageName, \"*\");\n    };\n}\n\nexports.$idleBlocked = false;\nexports.onIdle = function(cb, timeout) {\n    return setTimeout(function handler() {\n        if (!exports.$idleBlocked) {\n            cb();\n        } else {\n            setTimeout(handler, 100);\n        }\n    }, timeout);\n};\n\nexports.$idleBlockId = null;\nexports.blockIdle = function(delay) {\n    if (exports.$idleBlockId)\n        clearTimeout(exports.$idleBlockId);\n        \n    exports.$idleBlocked = true;\n    exports.$idleBlockId = setTimeout(function() {\n        exports.$idleBlocked = false;\n    }, delay || 100);\n};\n\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || window.oRequestAnimationFrame);\n\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function(callback) {\n        setTimeout(callback, 17);\n    };\n});\n\nace.define(\"ace/range\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\nvar comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\nvar Range = function(startRow, startColumn, endRow, endColumn) {\n    this.start = {\n        row: startRow,\n        column: startColumn\n    };\n\n    this.end = {\n        row: endRow,\n        column: endColumn\n    };\n};\n\n(function() {\n    this.isEqual = function(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n    this.toString = function() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n\n    this.contains = function(row, column) {\n        return this.compare(row, column) == 0;\n    };\n    this.compareRange = function(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            } else if (cmp == 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp == -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            } else if (cmp == 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    };\n    this.comparePoint = function(p) {\n        return this.compare(p.row, p.column);\n    };\n    this.containsRange = function(range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n    this.intersects = function(range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n    this.isEnd = function(row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n    this.isStart = function(row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n    this.setStart = function(row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n    this.setEnd = function(row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n    this.inside = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideStart = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.insideEnd = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n    this.compare = function(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    };\n    this.compareStart = function(row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareEnd = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.compareInside = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n    this.clipRows = function(firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            var end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            var start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            var start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n    this.extend = function(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    this.isEmpty = function() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n    this.isMultiLine = function() {\n        return (this.start.row !== this.end.row);\n    };\n    this.clone = function() {\n        return Range.fromPoints(this.start, this.end);\n    };\n    this.collapseRows = function() {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n    this.toScreenRange = function(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    };\n    this.moveBy = function(row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n\n}).call(Range.prototype);\nRange.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = comparePoints;\n\nRange.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n\n\nexports.Range = Range;\n});\n\nace.define(\"ace/lib/lang\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nexports.last = function(a) {\n    return a[a.length - 1];\n};\n\nexports.stringReverse = function(string) {\n    return string.split(\"\").reverse().join(\"\");\n};\n\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\n\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\n\nexports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\n\nexports.copyArray = function(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else \n            copy[i] = array[i];\n    }\n    return copy;\n};\n\nexports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    \n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n\nexports.arrayToMap = function(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n\n};\n\nexports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\nexports.arrayRemove = function(array, value) {\n  for (var i = 0; i <= array.length; i++) {\n    if (value === array[i]) {\n      array.splice(i, 1);\n    }\n  }\n};\n\nexports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nexports.escapeHTML = function(str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\n\nexports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n\n    return matches;\n};\nexports.deferredCall = function(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    \n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n};\n\n\nexports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n};\n});\n\nace.define(\"ace/clipboard\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nvar $cancelT;\nmodule.exports = { \n    lineMode: false,\n    pasteCancelled: function() {\n        if ($cancelT && $cancelT > Date.now() - 50)\n            return true;\n        return $cancelT = false;\n    },\n    cancel: function() {\n        $cancelT = Date.now();\n    }\n};\n\n});\n\nace.define(\"ace/keyboard/textinput\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/clipboard\",\"ace/lib/keys\"], function(require, exports, module) {\n\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar clipboard = require(\"../clipboard\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE =  useragent.isIE;\nvar HAS_FOCUS_ARGS = useragent.isChrome > 63;\nvar MAX_LINE_LENGTH = 400;\n\nvar KEYS = require(\"../lib/keys\");\nvar MODS = KEYS.KEY_MODS;\nvar isIOS = useragent.isIOS;\nvar valueResetRegex = isIOS ? /\\s/ : /\\n/;\nvar isMobile = useragent.isMobile;\n\nvar TextInput = function(parentNode, host) {\n    var text = dom.createElement(\"textarea\");\n    text.className = \"ace_text-input\";\n\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", false);\n\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n\n    var copied = false;\n    var pasted = false;\n    var inComposition = false;\n    var sendingText = false;\n    var tempStyle = '';\n    \n    if (!isMobile)\n        text.style.fontSize = \"1px\";\n\n    var commandMode = false;\n    var ignoreFocusEvents = false;\n    \n    var lastValue = \"\";\n    var lastSelectionStart = 0;\n    var lastSelectionEnd = 0;\n    var lastRestoreEnd = 0;\n    try { var isFocused = document.activeElement === text; } catch(e) {}\n    \n    event.addListener(text, \"blur\", function(e) {\n        if (ignoreFocusEvents) return;\n        host.onBlur(e);\n        isFocused = false;\n    }, host);\n    event.addListener(text, \"focus\", function(e) {\n        if (ignoreFocusEvents) return;\n        isFocused = true;\n        if (useragent.isEdge) {\n            try {\n                if (!document.hasFocus())\n                    return;\n            } catch(e) {}\n        }\n        host.onFocus(e);\n        if (useragent.isEdge)\n            setTimeout(resetSelection);\n        else\n            resetSelection();\n    }, host);\n    this.$focusScroll = false;\n    this.focus = function() {\n        if (tempStyle || HAS_FOCUS_ARGS || this.$focusScroll == \"browser\")\n            return text.focus({ preventScroll: true });\n\n        var top = text.style.top;\n        text.style.position = \"fixed\";\n        text.style.top = \"0px\";\n        try {\n            var isTransformed = text.getBoundingClientRect().top != 0;\n        } catch(e) {\n            return;\n        }\n        var ancestors = [];\n        if (isTransformed) {\n            var t = text.parentElement;\n            while (t && t.nodeType == 1) {\n                ancestors.push(t);\n                t.setAttribute(\"ace_nocontext\", true);\n                if (!t.parentElement && t.getRootNode)\n                    t = t.getRootNode().host;\n                else\n                    t = t.parentElement;\n            }\n        }\n        text.focus({ preventScroll: true });\n        if (isTransformed) {\n            ancestors.forEach(function(p) {\n                p.removeAttribute(\"ace_nocontext\");\n            });\n        }\n        setTimeout(function() {\n            text.style.position = \"\";\n            if (text.style.top == \"0px\")\n                text.style.top = top;\n        }, 0);\n    };\n    this.blur = function() {\n        text.blur();\n    };\n    this.isFocused = function() {\n        return isFocused;\n    };\n    \n    host.on(\"beforeEndOperation\", function() {\n        var curOp = host.curOp;\n        var commandName = curOp && curOp.command && curOp.command.name;\n        if (commandName == \"insertstring\")\n            return;\n        var isUserAction = commandName && (curOp.docChanged || curOp.selectionChanged);\n        if (inComposition && isUserAction) {\n            lastValue = text.value = \"\";\n            onCompositionEnd();\n        }\n        resetSelection();\n    });\n    \n    var resetSelection = isIOS\n    ? function(value) {\n        if (!isFocused || (copied && !value) || sendingText) return;\n        if (!value) \n            value = \"\";\n        var newValue = \"\\n ab\" + value + \"cde fg\\n\";\n        if (newValue != text.value)\n            text.value = lastValue = newValue;\n        \n        var selectionStart = 4;\n        var selectionEnd = 4 + (value.length || (host.selection.isEmpty() ? 0 : 1));\n\n        if (lastSelectionStart != selectionStart || lastSelectionEnd != selectionEnd) {\n            text.setSelectionRange(selectionStart, selectionEnd);\n        }\n        lastSelectionStart = selectionStart;\n        lastSelectionEnd = selectionEnd;\n    }\n    : function() {\n        if (inComposition || sendingText)\n            return;\n        if (!isFocused && !afterContextMenu)\n            return;\n        inComposition = true;\n        \n        var selectionStart = 0;\n        var selectionEnd = 0;\n        var line = \"\";\n\n        if (host.session) {\n            var selection = host.selection;\n            var range = selection.getRange();\n            var row = selection.cursor.row;\n            selectionStart = range.start.column;\n            selectionEnd = range.end.column;\n            line = host.session.getLine(row);\n\n            if (range.start.row != row) {\n                var prevLine = host.session.getLine(row - 1);\n                selectionStart = range.start.row < row - 1 ? 0 : selectionStart;\n                selectionEnd += prevLine.length + 1;\n                line = prevLine + \"\\n\" + line;\n            }\n            else if (range.end.row != row) {\n                var nextLine = host.session.getLine(row + 1);\n                selectionEnd = range.end.row > row  + 1 ? nextLine.length : selectionEnd;\n                selectionEnd += line.length + 1;\n                line = line + \"\\n\" + nextLine;\n            }\n            else if (isMobile && row > 0) {\n                line = \"\\n\" + line;\n                selectionEnd += 1;\n                selectionStart += 1;\n            }\n\n            if (line.length > MAX_LINE_LENGTH) {\n                if (selectionStart < MAX_LINE_LENGTH && selectionEnd < MAX_LINE_LENGTH) {\n                    line = line.slice(0, MAX_LINE_LENGTH);\n                } else {\n                    line = \"\\n\";\n                    if (selectionStart == selectionEnd) {\n                        selectionStart = selectionEnd = 0;\n                    }\n                    else {\n                        selectionStart = 0;\n                        selectionEnd = 1;\n                    }\n                }\n            }\n        }\n\n        var newValue = line + \"\\n\\n\";\n        if (newValue != lastValue) {\n            text.value = lastValue = newValue;\n            lastSelectionStart = lastSelectionEnd = newValue.length;\n        }\n        if (afterContextMenu) {\n            lastSelectionStart = text.selectionStart;\n            lastSelectionEnd = text.selectionEnd;\n        }\n        if (\n            lastSelectionEnd != selectionEnd \n            || lastSelectionStart != selectionStart \n            || text.selectionEnd != lastSelectionEnd // on ie edge selectionEnd changes silently after the initialization\n        ) {\n            try {\n                text.setSelectionRange(selectionStart, selectionEnd);\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n            } catch(e){}\n        }\n        inComposition = false;\n    };\n    this.resetSelection = resetSelection;\n\n    if (isFocused)\n        host.onFocus();\n\n\n    var isAllSelected = function(text) {\n        return text.selectionStart === 0 && text.selectionEnd >= lastValue.length\n            && text.value === lastValue && lastValue\n            && text.selectionEnd !== lastSelectionEnd;\n    };\n\n    var onSelect = function(e) {\n        if (inComposition)\n            return;\n        if (copied) {\n            copied = false;\n        } else if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        } else if (isMobile && text.selectionStart != lastSelectionStart) {\n            resetSelection();\n        }\n    };\n\n    var inputHandler = null;\n    this.setInputHandler = function(cb) {inputHandler = cb;};\n    this.getInputHandler = function() {return inputHandler;};\n    var afterContextMenu = false;\n    \n    var sendText = function(value, fromInput) {\n        if (afterContextMenu)\n            afterContextMenu = false;\n        if (pasted) {\n            resetSelection();\n            if (value)\n                host.onPaste(value);\n            pasted = false;\n            return \"\";\n        } else {\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n        \n            var extendLeft = lastSelectionStart;\n            var extendRight = lastValue.length - lastSelectionEnd;\n            \n            var inserted = value;\n            var restoreStart = value.length - selectionStart;\n            var restoreEnd = value.length - selectionEnd;\n        \n            var i = 0;\n            while (extendLeft > 0 && lastValue[i] == value[i]) {\n                i++;\n                extendLeft--;\n            }\n            inserted = inserted.slice(i);\n            i = 1;\n            while (extendRight > 0 && lastValue.length - i > lastSelectionStart - 1  && lastValue[lastValue.length - i] == value[value.length - i]) {\n                i++;\n                extendRight--;\n            }\n            restoreStart -= i-1;\n            restoreEnd -= i-1;\n            var endIndex = inserted.length - i + 1;\n            if (endIndex < 0) {\n                extendLeft = -endIndex;\n                endIndex = 0;\n            } \n            inserted = inserted.slice(0, endIndex);\n            if (!fromInput && !inserted && !restoreStart && !extendLeft && !extendRight && !restoreEnd)\n                return \"\";\n            sendingText = true;\n            var shouldReset = false;\n            if (useragent.isAndroid && inserted == \". \") {\n                inserted = \"  \";\n                shouldReset = true;\n            }\n            \n            if (inserted && !extendLeft && !extendRight && !restoreStart && !restoreEnd || commandMode) {\n                host.onTextInput(inserted);\n            } else {\n                host.onTextInput(inserted, {\n                    extendLeft: extendLeft,\n                    extendRight: extendRight,\n                    restoreStart: restoreStart,\n                    restoreEnd: restoreEnd\n                });\n            }\n            sendingText = false;\n            \n            lastValue = value;\n            lastSelectionStart = selectionStart;\n            lastSelectionEnd = selectionEnd;\n            lastRestoreEnd = restoreEnd;\n            return shouldReset ? \"\\n\" : inserted;\n        }\n    };\n    var onInput = function(e) {\n        if (inComposition)\n            return onCompositionUpdate();\n        if (e && e.inputType) {\n            if (e.inputType == \"historyUndo\") return host.execCommand(\"undo\");\n            if (e.inputType == \"historyRedo\") return host.execCommand(\"redo\");\n        }\n        var data = text.value;\n        var inserted = sendText(data, true);\n        if (\n            data.length > MAX_LINE_LENGTH + 100 \n            || valueResetRegex.test(inserted)\n            || isMobile && lastSelectionStart < 1 && lastSelectionStart == lastSelectionEnd\n        ) {\n            resetSelection();\n        }\n    };\n    \n    var handleClipboardData = function(e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window.clipboardData;\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                return clipboardData.setData(mime, data) !== false;\n            } else {\n                return clipboardData.getData(mime);\n            }\n        } catch(e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n\n    var doCopy = function(e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n\n        if (handleClipboardData(e, data)) {\n            if (isIOS) {\n                resetSelection(data);\n                copied = data;\n                setTimeout(function () {\n                    copied = false;\n                }, 10);\n            }\n            isCut ? host.onCut() : host.onCopy();\n            event.preventDefault(e);\n        } else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function(){\n                copied = false;\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n    \n    var onCut = function(e) {\n        doCopy(e, true);\n    };\n    \n    var onCopy = function(e) {\n        doCopy(e, false);\n    };\n    \n    var onPaste = function(e) {\n        var data = handleClipboardData(e);\n        if (clipboard.pasteCancelled())\n            return;\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n\n    event.addCommandKeyListener(text, host.onCommandKey.bind(host), host);\n\n    event.addListener(text, \"select\", onSelect, host);\n    event.addListener(text, \"input\", onInput, host);\n\n    event.addListener(text, \"cut\", onCut, host);\n    event.addListener(text, \"copy\", onCopy, host);\n    event.addListener(text, \"paste\", onPaste, host);\n    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {\n        event.addListener(parentNode, \"keydown\", function(e) {\n            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                return;\n\n            switch (e.keyCode) {\n                case 67:\n                    onCopy(e);\n                    break;\n                case 86:\n                    onPaste(e);\n                    break;\n                case 88:\n                    onCut(e);\n                    break;\n            }\n        }, host);\n    }\n    var onCompositionStart = function(e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly) \n            return;\n        \n        inComposition = {};\n\n        if (commandMode)\n            return;\n        \n        if (e.data)\n            inComposition.useTextareaForIME = false;\n        \n        setTimeout(onCompositionUpdate, 0);\n        host._signal(\"compositionStart\");\n        host.on(\"mousedown\", cancelComposition);\n        \n        var range = host.getSelectionRange();\n        range.end.row = range.start.row;\n        range.end.column = range.start.column;\n        inComposition.markerRange = range;\n        inComposition.selectionStart = lastSelectionStart;\n        host.onCompositionStart(inComposition);\n        \n        if (inComposition.useTextareaForIME) {\n            lastValue = text.value = \"\";\n            lastSelectionStart = 0;\n            lastSelectionEnd = 0;\n        }\n        else {\n            if (text.msGetInputContext)\n                inComposition.context = text.msGetInputContext();\n            if (text.getInputContext)\n                inComposition.context = text.getInputContext();\n        }\n    };\n\n    var onCompositionUpdate = function() {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        if (commandMode)\n            return cancelComposition();\n        \n        if (inComposition.useTextareaForIME) {\n            host.onCompositionUpdate(text.value);\n        }\n        else {\n            var data = text.value;\n            sendText(data);\n            if (inComposition.markerRange) {\n                if (inComposition.context) {\n                    inComposition.markerRange.start.column = inComposition.selectionStart\n                        = inComposition.context.compositionStartOffset;\n                }\n                inComposition.markerRange.end.column = inComposition.markerRange.start.column\n                    + lastSelectionEnd - inComposition.selectionStart + lastRestoreEnd;\n            }\n        }\n    };\n\n    var onCompositionEnd = function(e) {\n        if (!host.onCompositionEnd || host.$readOnly) return;\n        inComposition = false;\n        host.onCompositionEnd();\n        host.off(\"mousedown\", cancelComposition);\n        if (e) onInput();\n    };\n    \n\n    function cancelComposition() {\n        ignoreFocusEvents = true;\n        text.blur();\n        text.focus();\n        ignoreFocusEvents = false;\n    }\n\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50).schedule.bind(null, null);\n    \n    function onKeyup(e) {\n        if (e.keyCode == 27 && text.value.length < text.selectionStart) {\n            if (!inComposition)\n                lastValue = text.value;\n            lastSelectionStart = lastSelectionEnd = -1;\n            resetSelection();\n        }\n        syncComposition();\n    }\n\n    event.addListener(text, \"compositionstart\", onCompositionStart, host);\n    event.addListener(text, \"compositionupdate\", onCompositionUpdate, host);\n    event.addListener(text, \"keyup\", onKeyup, host);\n    event.addListener(text, \"keydown\", syncComposition, host);\n    event.addListener(text, \"compositionend\", onCompositionEnd, host);\n\n    this.getElement = function() {\n        return text;\n    };\n    this.setCommandMode = function(value) {\n       commandMode = value;\n       text.readOnly = false;\n    };\n    \n    this.setReadOnly = function(readOnly) {\n        if (!commandMode)\n            text.readOnly = readOnly;\n    };\n\n    this.setCopyWithEmptySelection = function(value) {\n    };\n\n    this.onContextMenu = function(e) {\n        afterContextMenu = true;\n        resetSelection();\n        host._emit(\"nativecontextmenu\", {target: host, domEvent: e});\n        this.moveToMouse(e, true);\n    };\n    \n    this.moveToMouse = function(e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\")\n            + \"text-indent: -\" + (lastSelectionStart + lastSelectionEnd) * host.renderer.characterWidth * 0.5 + \"px;\";\n\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight -2;\n        var move = function(e) {\n            dom.translate(text, e.clientX - left - 2, Math.min(e.clientY - top - 2, maxTop));\n        }; \n        move(e);\n\n        if (e.type != \"mousedown\")\n            return;\n\n        host.renderer.$isMousePressed = true;\n\n        clearTimeout(closeTimeout);\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            host.renderer.$isMousePressed = false;\n            if (host.renderer.$keepTextAreaAtCursor)\n                host.renderer.$moveTextAreaToCursor();\n        }, 0);\n    }\n\n    var onContextMenu = function(e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu, host);\n    event.addListener(text, \"mousedown\", function(e) {\n        e.preventDefault();\n        onContextMenuClose();\n    }, host);\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu, host);\n    event.addListener(text, \"contextmenu\", onContextMenu, host);\n    \n    if (isIOS)\n        addIosSelectionHandler(parentNode, host, text);\n\n    function addIosSelectionHandler(parentNode, host, text) {\n        var typingResetTimeout = null;\n        var typing = false;\n \n        text.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout) clearTimeout(typingResetTimeout);\n            typing = true;\n        }, true);\n\n        text.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        }, true);\n        var detectArrowKeys = function(e) {\n            if (document.activeElement !== text) return;\n            if (typing || inComposition || host.$mouseHandler.isMousePressed) return;\n\n            if (copied) {\n                return;\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            \n            var key = null;\n            var modifier = 0;\n            if (selectionStart == 0) {\n                key = KEYS.up;\n            } else if (selectionStart == 1) {\n                key = KEYS.home;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd] == \"\\n\") {\n                key = KEYS.end;\n            } else if (selectionStart < lastSelectionStart && lastValue[selectionStart - 1] == \" \") {\n                key = KEYS.left;\n                modifier = MODS.option;\n            } else if (\n                selectionStart < lastSelectionStart\n                || (\n                    selectionStart == lastSelectionStart \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.left;\n            } else if (selectionEnd > lastSelectionEnd && lastValue.slice(0, selectionEnd).split(\"\\n\").length > 2) {\n                key = KEYS.down;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd - 1] == \" \") {\n                key = KEYS.right;\n                modifier = MODS.option;\n            } else if (\n                selectionEnd > lastSelectionEnd\n                || (\n                    selectionEnd == lastSelectionEnd \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.right;\n            }\n            \n            if (selectionStart !== selectionEnd)\n                modifier |= MODS.shift;\n\n            if (key) {\n                var result = host.onCommandKey({}, modifier, key);\n                if (!result && host.commands) {\n                    key = KEYS.keyCodeToString(key);\n                    var command = host.commands.findKeyCommand(modifier, key);\n                    if (command)\n                        host.execCommand(command);\n                }\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n                resetSelection(\"\");\n            }\n        };\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function() {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    }\n};\n\nexports.TextInput = TextInput;\nexports.$setUserAgentForTests = function(_isMobile, _isIOS) {\n    isMobile = _isMobile;\n    isIOS = _isIOS;\n};\n});\n\nace.define(\"ace/mouse/default_handlers\",[\"require\",\"exports\",\"module\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar useragent = require(\"../lib/useragent\");\n\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 550; // milliseconds\n\nfunction DefaultHandlers(mouseHandler) {\n    mouseHandler.$clickSelection = null;\n\n    var editor = mouseHandler.editor;\n    editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n\n    var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n        \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n\n    exports.forEach(function(x) {\n        mouseHandler[x] = this[x];\n    }, this);\n\n    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n}\n\n(function() {\n\n    this.onMouseDown = function(ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            return;\n        }\n\n        this.mousedownEvent.time = Date.now();\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimeout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    };\n\n    this.startSelect = function(pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        if (!this.mousedownEvent) return;\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        if (editor.renderer.scroller.setCapture) {\n            editor.renderer.scroller.setCapture();\n        }\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n    };\n\n    this.select = function() {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            } else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.extendSelectionBy = function(unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            } else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            } else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.selectEnd =\n    this.selectAllEnd =\n    this.selectByWordsEnd =\n    this.selectByLinesEnd = function() {\n        this.$clickSelection = null;\n        this.editor.unsetStyle(\"ace_selecting\");\n        if (this.editor.renderer.scroller.releaseCapture) {\n            this.editor.renderer.scroller.releaseCapture();\n        }\n    };\n\n    this.focusWait = function() {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimeout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    };\n\n    this.onDoubleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        } else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    };\n\n    this.onTripleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        } else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    };\n\n    this.onQuadClick = function(ev) {\n        var editor = this.editor;\n\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    };\n\n    this.onMouseWheel = function(ev) {\n        if (ev.getAccelKey())\n            return;\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        \n        var editor = this.editor;\n        \n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n        \n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = dt ? ev.wheelX / dt : prevScroll.vx;\n        var vy = dt ? ev.wheelY / dt : prevScroll.vy;\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n        \n        var direction = Math.abs(vx / vy);\n        \n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n            \n        if (canScroll) {\n            prevScroll.allowed = t;\n        } else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.5 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.5 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n        \n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n\n}).call(DefaultHandlers.prototype);\n\nexports.DefaultHandlers = DefaultHandlers;\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nfunction calcRangeOrientation(range, cursor) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = cursor.column - 4;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n\n    if (cmp < 0)\n        return {cursor: range.start, anchor: range.end};\n    else\n        return {cursor: range.end, anchor: range.start};\n}\n\n});\n\nace.define(\"ace/tooltip\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nfunction Tooltip (parentNode) {\n    this.isOpen = false;\n    this.$element = null;\n    this.$parentNode = parentNode;\n}\n\n(function() {\n    this.$init = function() {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = \"ace_tooltip\";\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    };\n    this.getElement = function() {\n        return this.$element || this.$init();\n    };\n    this.setText = function(text) {\n        this.getElement().textContent = text;\n    };\n    this.setHtml = function(html) {\n        this.getElement().innerHTML = html;\n    };\n    this.setPosition = function(x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    };\n    this.setClassName = function(className) {\n        dom.addCssClass(this.getElement(), className);\n    };\n    this.show = function(text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    };\n\n    this.hide = function() {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.isOpen = false;\n        }\n    };\n    this.getHeight = function() {\n        return this.getElement().offsetHeight;\n    };\n    this.getWidth = function() {\n        return this.getElement().offsetWidth;\n    };\n    \n    this.destroy = function() {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    };\n\n}).call(Tooltip.prototype);\n\nexports.Tooltip = Tooltip;\n});\n\nace.define(\"ace/mouse/default_gutter_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/event\",\"ace/tooltip\"], function(require, exports, module) {\n\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar event = require(\"../lib/event\");\nvar Tooltip = require(\"../tooltip\").Tooltip;\n\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    var tooltip = new GutterTooltip(editor.container);\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function(e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\")\n            return;\n\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n\n\n    var tooltipTimeout, mouseEvent, tooltipAnnotation;\n\n    function showTooltip() {\n        var row = mouseEvent.getDocumentPosition().row;\n        var annotation = gutter.$annotations[row];\n        if (!annotation)\n            return hideTooltip();\n\n        var maxRow = editor.session.getLength();\n        if (row == maxRow) {\n            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;\n            var pos = mouseEvent.$pos;\n            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))\n                return hideTooltip();\n        }\n\n        if (tooltipAnnotation == annotation)\n            return;\n        tooltipAnnotation = annotation.text.join(\"<br/>\");\n\n        tooltip.setHtml(tooltipAnnotation);\n        tooltip.show();\n        editor._signal(\"showGutterTooltip\", tooltip);\n        editor.on(\"mousewheel\", hideTooltip);\n\n        if (mouseHandler.$tooltipFollowsMouse) {\n            moveTooltip(mouseEvent);\n        } else {\n            var gutterElement = mouseEvent.domEvent.target;\n            var rect = gutterElement.getBoundingClientRect();\n            var style = tooltip.getElement().style;\n            style.left = rect.right + \"px\";\n            style.top = rect.bottom + \"px\";\n        }\n    }\n\n    function hideTooltip() {\n        if (tooltipTimeout)\n            tooltipTimeout = clearTimeout(tooltipTimeout);\n        if (tooltipAnnotation) {\n            tooltip.hide();\n            tooltipAnnotation = null;\n            editor._signal(\"hideGutterTooltip\", tooltip);\n            editor.off(\"mousewheel\", hideTooltip);\n        }\n    }\n\n    function moveTooltip(e) {\n        tooltip.setPosition(e.x, e.y);\n    }\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousemove\", function(e) {\n        var target = e.domEvent.target || e.domEvent.srcElement;\n        if (dom.hasCssClass(target, \"ace_fold-widget\"))\n            return hideTooltip();\n\n        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)\n            moveTooltip(e);\n\n        mouseEvent = e;\n        if (tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            if (mouseEvent && !mouseHandler.isMousePressed)\n                showTooltip();\n            else\n                hideTooltip();\n        }, 50);\n    });\n\n    event.addListener(editor.renderer.$gutter, \"mouseout\", function(e) {\n        mouseEvent = null;\n        if (!tooltipAnnotation || tooltipTimeout)\n            return;\n\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            hideTooltip();\n        }, 50);\n    }, editor);\n    \n    editor.on(\"changeSession\", hideTooltip);\n}\n\nfunction GutterTooltip(parentNode) {\n    Tooltip.call(this, parentNode);\n}\n\noop.inherits(GutterTooltip, Tooltip);\n\n(function(){\n    this.setPosition = function(x, y) {\n        var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        var windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        var width = this.getWidth();\n        var height = this.getHeight();\n        x += 15;\n        y += 15;\n        if (x + width > windowWidth) {\n            x -= (x + width) - windowWidth;\n        }\n        if (y + height > windowHeight) {\n            y -= 20 + height;\n        }\n        Tooltip.prototype.setPosition.call(this, x, y);\n    };\n\n}).call(GutterTooltip.prototype);\n\n\n\nexports.GutterHandler = GutterHandler;\n\n});\n\nace.define(\"ace/mouse/mouse_event\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar MouseEvent = exports.MouseEvent = function(domEvent, editor) {\n    this.domEvent = domEvent;\n    this.editor = editor;\n    \n    this.x = this.clientX = domEvent.clientX;\n    this.y = this.clientY = domEvent.clientY;\n\n    this.$pos = null;\n    this.$inSelection = null;\n    \n    this.propagationStopped = false;\n    this.defaultPrevented = false;\n};\n\n(function() {  \n    \n    this.stopPropagation = function() {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    };\n    \n    this.preventDefault = function() {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    };\n    \n    this.stop = function() {\n        this.stopPropagation();\n        this.preventDefault();\n    };\n    this.getDocumentPosition = function() {\n        if (this.$pos)\n            return this.$pos;\n        \n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    };\n    this.inSelection = function() {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n            \n        var editor = this.editor;\n        \n\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n\n        return this.$inSelection;\n    };\n    this.getButton = function() {\n        return event.getButton(this.domEvent);\n    };\n    this.getShiftKey = function() {\n        return this.domEvent.shiftKey;\n    };\n    \n    this.getAccelKey = useragent.isMac\n        ? function() { return this.domEvent.metaKey; }\n        : function() { return this.domEvent.ctrlKey; };\n    \n}).call(MouseEvent.prototype);\n\n});\n\nace.define(\"ace/mouse/dragdrop_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"../lib/dom\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\n\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\n\nfunction DragdropHandler(mouseHandler) {\n\n    var editor = mouseHandler.editor;\n\n    var blankImage = dom.createElement(\"img\");\n    blankImage.src = \"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\";\n    if (useragent.isOpera)\n        blankImage.style.cssText = \"width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;\";\n\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n\n     exports.forEach(function(x) {\n         mouseHandler[x] = this[x];\n    }, this);\n    editor.on(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n\n\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n\n    this.onDragStart = function(e) {\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function(){\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        if (useragent.isOpera) {\n            editor.container.appendChild(blankImage);\n            blankImage.scrollTop = 0;\n        }\n        dataTransfer.setDragImage && dataTransfer.setDragImage(blankImage, 0, 0);\n        if (useragent.isOpera) {\n            editor.container.removeChild(blankImage);\n        }\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n\n    this.onDragEnd = function(e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                editor.session.remove(editor.getSelectionRange());\n            editor.$resetCursorStyle();\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n\n    this.onDragEnter = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragOver = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragLeave = function(e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n\n    this.onDrop = function(e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    } else {\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        } else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler), editor);\n\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.moveCursorToPosition(cursor);\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = {x: x, y: y};\n        } else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n           x: {\n               left: x - editorRect.left,\n               right: editorRect.right - x\n           },\n           y: {\n               top: y - editorRect.top,\n               bottom: editorRect.bottom - y\n           }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = {row: cursor.row, column: cursor.column};\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        } else {\n            autoScrollStartTime = null;\n        }\n    }\n\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.selection.fromOrientedRange(range);\n        if (editor.isFocused() && !isInternal)\n            editor.$resetCursorStyle();\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function() {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function(type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        } catch (e) {}\n        var dropEffect = \"none\";\n\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n\n        return dropEffect;\n    }\n}\n\n(function() {\n\n    this.dragWait = function() {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n\n    this.dragWaitEnd = function() {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n\n    this.dragReadyEnd = function(e) {\n        this.editor.$resetCursorStyle();\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n\n    this.startDrag = function(){\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n\n    this.onMouseDrag = function(e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n\n    this.onMouseDown = function(e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            } else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            e.defaultPrevented = true;\n        }\n    };\n\n}).call(DragdropHandler.prototype);\n\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nexports.DragdropHandler = DragdropHandler;\n\n});\n\nace.define(\"ace/mouse/touch_handler\",[\"require\",\"exports\",\"module\",\"ace/mouse/mouse_event\",\"ace/lib/event\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar event = require(\"../lib/event\");\nvar dom = require(\"../lib/dom\");\n\nexports.addTouchListeners = function(el, editor) {\n    var mode = \"scroll\";\n    var startX;\n    var startY;\n    var touchStartT;\n    var lastT;\n    var longTouchTimer;\n    var animationTimer;\n    var animationSteps = 0;\n    var pos;\n    var clickCount = 0;\n    var vX = 0;\n    var vY = 0;\n    var pressed;\n    var contextMenu;\n    \n    function createContextMenu() {\n        var clipboard = window.navigator && window.navigator.clipboard;\n        var isOpen = false;\n        var updateMenu = function() {\n            var selected = editor.getCopyText();\n            var hasUndo = editor.session.getUndoManager().hasUndo();\n            contextMenu.replaceChild(\n                dom.buildDom(isOpen ? [\"span\",\n                    !selected && [\"span\", { class: \"ace_mobile-button\", action: \"selectall\" }, \"Select All\"],\n                    selected && [\"span\", { class: \"ace_mobile-button\", action: \"copy\" }, \"Copy\"],\n                    selected && [\"span\", { class: \"ace_mobile-button\", action: \"cut\" }, \"Cut\"],\n                    clipboard && [\"span\", { class: \"ace_mobile-button\", action: \"paste\" }, \"Paste\"],\n                    hasUndo && [\"span\", { class: \"ace_mobile-button\", action: \"undo\" }, \"Undo\"],\n                    [\"span\", { class: \"ace_mobile-button\", action: \"find\" }, \"Find\"],\n                    [\"span\", { class: \"ace_mobile-button\", action: \"openCommandPallete\" }, \"Pallete\"]\n                ] : [\"span\"]),\n                contextMenu.firstChild\n            );\n        };\n        var handleClick = function(e) {\n            var action = e.target.getAttribute(\"action\");\n\n            if (action == \"more\" || !isOpen) {\n                isOpen = !isOpen;\n                return updateMenu();\n            }\n            if (action == \"paste\") {\n                clipboard.readText().then(function (text) {\n                    editor.execCommand(action, text);\n                });\n            }\n            else if (action) {\n                if (action == \"cut\" || action == \"copy\") {\n                    if (clipboard)\n                        clipboard.writeText(editor.getCopyText());\n                    else\n                        document.execCommand(\"copy\");\n                }\n                editor.execCommand(action);\n            }\n            contextMenu.firstChild.style.display = \"none\";\n            isOpen = false;\n            if (action != \"openCommandPallete\")\n                editor.focus();\n        };\n        contextMenu = dom.buildDom([\"div\",\n            {\n                class: \"ace_mobile-menu\",\n                ontouchstart: function(e) {\n                    mode = \"menu\";\n                    e.stopPropagation();\n                    e.preventDefault();\n                    editor.textInput.focus();\n                },\n                ontouchend: function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    handleClick(e);\n                },\n                onclick: handleClick\n            },\n            [\"span\"],\n            [\"span\", { class: \"ace_mobile-button\", action: \"more\" }, \"...\"]\n        ], editor.container);\n    }\n    function showContextMenu() {\n        if (!contextMenu) createContextMenu();\n        var cursor = editor.selection.cursor;\n        var pagePos = editor.renderer.textToScreenCoordinates(cursor.row, cursor.column);\n        var leftOffset = editor.renderer.textToScreenCoordinates(0, 0).pageX;\n        var scrollLeft = editor.renderer.scrollLeft;\n        var rect = editor.container.getBoundingClientRect();\n        contextMenu.style.top = pagePos.pageY - rect.top - 3 + \"px\";\n        if (pagePos.pageX - rect.left < rect.width - 70) {\n            contextMenu.style.left = \"\";\n            contextMenu.style.right = \"10px\";\n        } else {\n            contextMenu.style.right = \"\";\n            contextMenu.style.left = leftOffset + scrollLeft - rect.left + \"px\";\n        }\n        contextMenu.style.display = \"\";\n        contextMenu.firstChild.style.display = \"none\";\n        editor.on(\"input\", hideContextMenu);\n    }\n    function hideContextMenu(e) {\n        if (contextMenu)\n            contextMenu.style.display = \"none\";\n        editor.off(\"input\", hideContextMenu);\n    }\n\n    function handleLongTap() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        var range = editor.selection.getRange();\n        var inSelection = range.contains(pos.row, pos.column);\n        if (range.isEmpty() || !inSelection) {\n            editor.selection.moveToPosition(pos);\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n        showContextMenu();\n    }\n    function switchToSelectionMode() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        editor.selection.moveToPosition(pos);\n        var range = clickCount >= 2\n            ? editor.selection.getLineRange(pos.row)\n            : editor.session.getBracketRange(pos);\n        if (range && !range.isEmpty()) {\n            editor.selection.setRange(range);\n        } else {\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n    }\n    event.addListener(el, \"contextmenu\", function(e) {\n        if (!pressed) return;\n        var textarea = editor.textInput.getElement();\n        textarea.focus();\n    }, editor);\n    event.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        if (longTouchTimer || touches.length > 1) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n            touchStartT = -1;\n            mode = \"zoom\";\n            return;\n        }\n        \n        pressed = editor.$mouseHandler.isMousePressed = true;\n        var h = editor.renderer.layerConfig.lineHeight;\n        var w = editor.renderer.layerConfig.lineHeight;\n        var t = e.timeStamp;\n        lastT = t;\n        var touchObj = touches[0];\n        var x = touchObj.clientX;\n        var y = touchObj.clientY;\n        if (Math.abs(startX - x) + Math.abs(startY - y) > h)\n            touchStartT = -1;\n        \n        startX = e.clientX = x;\n        startY = e.clientY = y;\n        vX = vY = 0;\n        \n        var ev = new MouseEvent(e, editor);\n        pos = ev.getDocumentPosition();\n\n        if (t - touchStartT < 500 && touches.length == 1 && !animationSteps) {\n            clickCount++;\n            e.preventDefault();\n            e.button = 0;\n            switchToSelectionMode();\n        } else {\n            clickCount = 0;\n            var cursor = editor.selection.cursor;\n            var anchor = editor.selection.isEmpty() ? cursor : editor.selection.anchor;\n            \n            var cursorPos = editor.renderer.$cursorLayer.getPixelPosition(cursor, true);\n            var anchorPos = editor.renderer.$cursorLayer.getPixelPosition(anchor, true);\n            var rect = editor.renderer.scroller.getBoundingClientRect();\n            var offsetTop = editor.renderer.layerConfig.offset;\n            var offsetLeft = editor.renderer.scrollLeft;\n            var weightedDistance = function(x, y) {\n                x = x / w;\n                y = y / h - 0.75;\n                return x * x + y * y;\n            };\n            \n            if (e.clientX < rect.left) {\n                mode = \"zoom\";\n                return;\n            }\n            \n            var diff1 = weightedDistance(\n                e.clientX - rect.left - cursorPos.left + offsetLeft,\n                e.clientY - rect.top - cursorPos.top + offsetTop\n            );\n            var diff2 = weightedDistance(\n                e.clientX - rect.left - anchorPos.left + offsetLeft,\n                e.clientY - rect.top - anchorPos.top + offsetTop\n            );\n            if (diff1 < 3.5 && diff2 < 3.5)\n                mode = diff1 > diff2 ? \"cursor\" : \"anchor\";\n                \n            if (diff2 < 3.5)\n                mode = \"anchor\";\n            else if (diff1 < 3.5)\n                mode = \"cursor\";\n            else\n                mode = \"scroll\";\n            longTouchTimer = setTimeout(handleLongTap, 450);\n        }\n        touchStartT = t;\n    }, editor);\n\n    event.addListener(el, \"touchend\", function (e) {\n        pressed = editor.$mouseHandler.isMousePressed = false;\n        if (animationTimer) clearInterval(animationTimer);\n        if (mode == \"zoom\") {\n            mode = \"\";\n            animationSteps = 0;\n        } else if (longTouchTimer) {\n            editor.selection.moveToPosition(pos);\n            animationSteps = 0;\n            showContextMenu();\n        } else if (mode == \"scroll\") {\n            animate();\n            hideContextMenu();\n        } else {\n            showContextMenu();\n        }\n        clearTimeout(longTouchTimer);\n        longTouchTimer = null;\n    }, editor);\n    event.addListener(el, \"touchmove\", function (e) {\n        if (longTouchTimer) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n        }\n        var touches = e.touches;\n        if (touches.length > 1 || mode == \"zoom\") return;\n\n        var touchObj = touches[0];\n\n        var wheelX = startX - touchObj.clientX;\n        var wheelY = startY - touchObj.clientY;\n\n        if (mode == \"wait\") {\n            if (wheelX * wheelX + wheelY * wheelY > 4)\n                mode = \"cursor\";\n            else\n                return e.preventDefault();\n        }\n\n        startX = touchObj.clientX;\n        startY = touchObj.clientY;\n\n        e.clientX = touchObj.clientX;\n        e.clientY = touchObj.clientY;\n\n        var t = e.timeStamp;\n        var dt = t - lastT;\n        lastT = t;\n        if (mode == \"scroll\") {\n            var mouseEvent = new MouseEvent(e, editor);\n            mouseEvent.speed = 1;\n            mouseEvent.wheelX = wheelX;\n            mouseEvent.wheelY = wheelY;\n            if (10 * Math.abs(wheelX) < Math.abs(wheelY)) wheelX = 0;\n            if (10 * Math.abs(wheelY) < Math.abs(wheelX)) wheelY = 0;\n            if (dt != 0) {\n                vX = wheelX / dt;\n                vY = wheelY / dt;\n            }\n            editor._emit(\"mousewheel\", mouseEvent);\n            if (!mouseEvent.propagationStopped) {\n                vX = vY = 0;\n            }\n        }\n        else {\n            var ev = new MouseEvent(e, editor);\n            var pos = ev.getDocumentPosition();\n            if (mode == \"cursor\")\n                editor.selection.moveCursorToPosition(pos);\n            else if (mode == \"anchor\")\n                editor.selection.setSelectionAnchor(pos.row, pos.column);\n            editor.renderer.scrollCursorIntoView(pos);\n            e.preventDefault();\n        }\n    }, editor);\n\n    function animate() {\n        animationSteps += 60;\n        animationTimer = setInterval(function() {\n            if (animationSteps-- <= 0) {\n                clearInterval(animationTimer);\n                animationTimer = null;\n            }\n            if (Math.abs(vX) < 0.01) vX = 0;\n            if (Math.abs(vY) < 0.01) vY = 0;\n            if (animationSteps < 20) vX = 0.9 * vX;\n            if (animationSteps < 20) vY = 0.9 * vY;\n            var oldScrollTop = editor.session.getScrollTop();\n            editor.renderer.scrollBy(10 * vX, 10 * vY);\n            if (oldScrollTop == editor.session.getScrollTop())\n                animationSteps = 0;\n        }, 10);\n    }\n};\n\n});\n\nace.define(\"ace/lib/net\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\nvar dom = require(\"./dom\");\n\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\n\nexports.loadScript = function(path, callback) {\n    var head = dom.getDocumentHead();\n    var s = document.createElement('script');\n\n    s.src = path;\n    head.appendChild(s);\n\n    s.onload = s.onreadystatechange = function(_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\nexports.qualifyURL = function(url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n\n});\n\nace.define(\"ace/lib/event_emitter\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        return new Promise(function(resolve) {\n            callback = resolve;\n        });\n    }\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n\nEventEmitter.removeAllListeners = function(eventName) {\n    if (!eventName) this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry) this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers) this._defaultHandlers[eventName] = undefined;\n};\n\nexports.EventEmitter = EventEmitter;\n\n});\n\nace.define(\"ace/lib/app_config\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"no use strict\";\n\nvar oop = require(\"./oop\");\nvar EventEmitter = require(\"./event_emitter\").EventEmitter;\n\nvar optionsProvider = {\n    setOptions: function(optList) {\n        Object.keys(optList).forEach(function(key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function(optionNames) {\n        var result = {};\n        if (!optionNames) {\n            var options = this.$options;\n            optionNames = Object.keys(options).filter(function(key) {\n                return !options[key].hidden;\n            });\n        } else if (!Array.isArray(optionNames)) {\n            result = optionNames;\n            optionNames = Object.keys(result);\n        }\n        optionNames.forEach(function(key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function(name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function(name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\n\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\n\nfunction reportError(msg, data) {\n    var e = new Error(msg);\n    e.data = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function() { throw e; });\n}\n\nvar AppConfig = function() {\n    this.$defaultOptions = {};\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n    this.defineOptions = function(obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n\n        Object.keys(options).forEach(function(key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = {forwardTo: opt};\n\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n        oop.implement(obj, optionsProvider);\n\n        return this;\n    };\n\n    this.resetOptions = function(obj) {\n        Object.keys(obj.$options).forEach(function(key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    };\n\n    this.setDefaultValue = function(path, name, value) {\n        if (!path) {\n            for (path in this.$defaultOptions)\n                if (this.$defaultOptions[path][name])\n                    break;\n            if (!this.$defaultOptions[path][name])\n                return false;\n        }\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    };\n\n    this.setDefaultValues = function(path, optionHash) {\n        Object.keys(optionHash).forEach(function(key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    };\n    \n    this.warn = warn;\n    this.reportError = reportError;\n    \n}).call(AppConfig.prototype);\n\nexports.AppConfig = AppConfig;\n\n});\n\nace.define(\"ace/config\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/app_config\"], function(require, exports, module) {\n\"no use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar net = require(\"./lib/net\");\nvar AppConfig = require(\"./lib/app_config\").AppConfig;\n\nmodule.exports = exports = new AppConfig();\n\nvar global = (function() {\n    return this || typeof window != \"undefined\" && window;\n})();\n\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {},\n    loadWorkerFromBlob: true,\n    sharedPopups: false\n};\n\nexports.get = function(key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n\n    return options[key];\n};\n\nexports.set = function(key, value) {\n    if (options.hasOwnProperty(key))\n        options[key] = value;\n    else if (this.setDefaultValue(\"\", key, value) == false)\n        throw new Error(\"Unknown config key: \" + key);\n};\n\nexports.all = function() {\n    return lang.copyObject(options);\n};\n\nexports.$modes = {};\nexports.moduleUrl = function(name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    } else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\n\nexports.setModuleUrl = function(name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\n\nexports.$loading = {};\nexports.loadModule = function(moduleName, onLoad) {\n    var module, moduleType;\n    if (Array.isArray(moduleName)) {\n        moduleType = moduleName[0];\n        moduleName = moduleName[1];\n    }\n\n    try {\n        module = require(moduleName);\n    } catch (e) {}\n    if (module && !exports.$loading[moduleName])\n        return onLoad && onLoad(module);\n\n    if (!exports.$loading[moduleName])\n        exports.$loading[moduleName] = [];\n\n    exports.$loading[moduleName].push(onLoad);\n\n    if (exports.$loading[moduleName].length > 1)\n        return;\n\n    var afterLoad = function() {\n        require([moduleName], function(module) {\n            exports._emit(\"load.module\", {name: moduleName, module: module});\n            var listeners = exports.$loading[moduleName];\n            exports.$loading[moduleName] = null;\n            listeners.forEach(function(onLoad) {\n                onLoad && onLoad(module);\n            });\n        });\n    };\n\n    if (!exports.get(\"packaged\"))\n        return afterLoad();\n    \n    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n    reportErrorIfPathIsNotConfigured();\n};\n\nvar reportErrorIfPathIsNotConfigured = function() {\n    if (\n        !options.basePath && !options.workerPath \n        && !options.modePath && !options.themePath\n        && !Object.keys(options.$moduleUrls).length\n    ) {\n        console.error(\n            \"Unable to infer path to ace from script src,\",\n            \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\",\n            \"or with webpack use ace/webpack-resolver\"\n        );\n        reportErrorIfPathIsNotConfigured = function() {};\n    }\n};\ninit(true);function init(packaged) {\n\n    if (!global || !global.document)\n        return;\n    \n    options.packaged = packaged || require.packaged || module.packaged || (global.define && define.packaged);\n\n    var scriptOptions = {};\n    var scriptUrl = \"\";\n    var currentScript = (document.currentScript || document._currentScript ); // native or polyfill\n    var currentDocument = currentScript && currentScript.ownerDocument || document;\n    \n    var scripts = currentDocument.getElementsByTagName(\"script\");\n    for (var i=0; i<scripts.length; i++) {\n        var script = scripts[i];\n\n        var src = script.src || script.getAttribute(\"src\");\n        if (!src)\n            continue;\n\n        var attributes = script.attributes;\n        for (var j=0, l=attributes.length; j < l; j++) {\n            var attr = attributes[j];\n            if (attr.name.indexOf(\"data-ace-\") === 0) {\n                scriptOptions[deHyphenate(attr.name.replace(/^data-ace-/, \"\"))] = attr.value;\n            }\n        }\n\n        var m = src.match(/^(.*)\\/ace(\\-\\w+)?\\.js(\\?|$)/);\n        if (m)\n            scriptUrl = m[1];\n    }\n\n    if (scriptUrl) {\n        scriptOptions.base = scriptOptions.base || scriptUrl;\n        scriptOptions.packaged = true;\n    }\n\n    scriptOptions.basePath = scriptOptions.base;\n    scriptOptions.workerPath = scriptOptions.workerPath || scriptOptions.base;\n    scriptOptions.modePath = scriptOptions.modePath || scriptOptions.base;\n    scriptOptions.themePath = scriptOptions.themePath || scriptOptions.base;\n    delete scriptOptions.base;\n\n    for (var key in scriptOptions)\n        if (typeof scriptOptions[key] !== \"undefined\")\n            exports.set(key, scriptOptions[key]);\n}\n\nexports.init = init;\n\nfunction deHyphenate(str) {\n    return str.replace(/-(.)/g, function(m, m1) { return m1.toUpperCase(); });\n}\n\nexports.version = \"1.4.12\";\n\n});\n\nace.define(\"ace/mouse/mouse_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/mouse/default_handlers\",\"ace/mouse/default_gutter_handler\",\"ace/mouse/mouse_event\",\"ace/mouse/dragdrop_handler\",\"ace/mouse/touch_handler\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar DefaultHandlers = require(\"./default_handlers\").DefaultHandlers;\nvar DefaultGutterHandler = require(\"./default_gutter_handler\").GutterHandler;\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar DragdropHandler = require(\"./dragdrop_handler\").DragdropHandler;\nvar addTouchListeners = require(\"./touch_handler\").addTouchListeners;\nvar config = require(\"../config\");\n\nvar MouseHandler = function(editor) {\n    var _self = this;\n    this.editor = editor;\n\n    new DefaultHandlers(this);\n    new DefaultGutterHandler(this);\n    new DragdropHandler(this);\n\n    var focusEditor = function(e) {\n        var windowBlurred = !document.hasFocus || !document.hasFocus()\n            || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n        if (windowBlurred)\n            window.focus();\n        editor.focus();\n    };\n\n    var mouseTarget = editor.renderer.getMouseEventTarget();\n    event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"), editor);\n    event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"), editor);\n    event.addMultiMouseDownListener([\n        mouseTarget,\n        editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n        editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n        editor.textInput && editor.textInput.getElement()\n    ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\", editor);\n    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"), editor);\n    addTouchListeners(editor.container, editor);\n\n    var gutterEl = editor.renderer.$gutter;\n    event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"), editor);\n    event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"), editor);\n    event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"), editor);\n    event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"), editor);\n\n    event.addListener(mouseTarget, \"mousedown\", focusEditor, editor);\n    event.addListener(gutterEl, \"mousedown\", focusEditor, editor);\n    if (useragent.isIE && editor.renderer.scrollBarV) {\n        event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor, editor);\n        event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor, editor);\n    }\n\n    editor.on(\"mousemove\", function(e){\n        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n            return;\n\n        var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n        var range = editor.session.selection.getRange();\n        var renderer = editor.renderer;\n\n        if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n            renderer.setCursorStyle(\"default\");\n        } else {\n            renderer.setCursorStyle(\"\");\n        }\n    }, editor);\n};\n\n(function() {\n    this.onMouseEvent = function(name, e) {\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseMove = function(name, e) {\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseWheel = function(name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n\n        this.editor._emit(name, mouseEvent);\n    };\n    \n    this.setState = function(state) {\n        this.state = state;\n    };\n\n    this.captureMouse = function(ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n\n        this.isMousePressed = true;\n        var editor = this.editor;\n        var renderer = this.editor.renderer;\n        renderer.$isMousePressed = true;\n\n        var self = this;\n        var onMouseMove = function(e) {\n            if (!e) return;\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n\n        var onCaptureEnd = function(e) {\n            editor.off(\"beforeEndOperation\", onOperationEnd);\n            clearInterval(timerId);\n            onCaptureInterval();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            self.isMousePressed = renderer.$isMousePressed = false;\n            if (renderer.$keepTextAreaAtCursor)\n                renderer.$moveTextAreaToCursor();\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n            editor.endOperation();\n        };\n\n        var onCaptureInterval = function() {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function() {onCaptureEnd(ev);});\n        }\n\n        var onOperationEnd = function(e) {\n            if (!self.releaseMouse) return;\n            if (editor.curOp.command.name && editor.curOp.selectionChanged) {\n                self[self.state + \"End\"] && self[self.state + \"End\"]();\n                self.state = \"\";\n                self.releaseMouse();\n            }\n        };\n\n        editor.on(\"beforeEndOperation\", onOperationEnd);\n        editor.startOperation({command: {name: \"mouse\"}});\n\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        var timerId = setInterval(onCaptureInterval, 20);\n    };\n    this.releaseMouse = null;\n    this.cancelContextMenu = function() {\n        var stop = function(e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    };\n    this.destroy = function() {\n        if (this.releaseMouse) this.releaseMouse();\n    };\n}).call(MouseHandler.prototype);\n\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: {initialValue: 2},\n    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},\n    dragEnabled: {initialValue: true},\n    focusTimeout: {initialValue: 0},\n    tooltipFollowsMouse: {initialValue: true}\n});\n\n\nexports.MouseHandler = MouseHandler;\n});\n\nace.define(\"ace/mouse/fold_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\nvar dom = require(\"../lib/dom\");\n\nfunction FoldHandler(editor) {\n\n    editor.on(\"click\", function(e) {\n        var position = e.getDocumentPosition();\n        var session = editor.session;\n        var fold = session.getFoldAt(position.row, position.column, 1);\n        if (fold) {\n            if (e.getAccelKey())\n                session.removeFold(fold);\n            else\n                session.expandFold(fold);\n\n            e.stop();\n        }\n        \n        var target = e.domEvent && e.domEvent.target;\n        if (target && dom.hasCssClass(target, \"ace_inline_button\")) {\n            if (dom.hasCssClass(target, \"ace_toggle_wrap\")) {\n                session.setOption(\"wrap\", !session.getUseWrapMode());\n                editor.renderer.scrollCursorIntoView();\n            }\n        }\n    });\n\n    editor.on(\"gutterclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            if (session.foldWidgets && session.foldWidgets[row])\n                editor.session.onFoldWidgetClick(row, e);\n            if (!editor.isFocused())\n                editor.focus();\n            e.stop();\n        }\n    });\n\n    editor.on(\"gutterdblclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            var data = session.getParentFoldRangeData(row, true);\n            var range = data.range || data.firstRange;\n\n            if (range) {\n                row = range.start.row;\n                var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n\n                if (fold) {\n                    session.removeFold(fold);\n                } else {\n                    session.addFold(\"...\", range);\n                    editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});\n                }\n            }\n            e.stop();\n        }\n    });\n}\n\nexports.FoldHandler = FoldHandler;\n\n});\n\nace.define(\"ace/keyboard/keybinding\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/event\"], function(require, exports, module) {\n\"use strict\";\n\nvar keyUtil  = require(\"../lib/keys\");\nvar event = require(\"../lib/event\");\n\nvar KeyBinding = function(editor) {\n    this.$editor = editor;\n    this.$data = {editor: editor};\n    this.$handlers = [];\n    this.setDefaultHandler(editor.commands);\n};\n\n(function() {\n    this.setDefaultHandler = function(kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    };\n\n    this.setKeyboardHandler = function(kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n\n        this.addKeyboardHandler(kb, 1);\n    };\n\n    this.addKeyboardHandler = function(kb, pos) {\n        if (!kb)\n            return;\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    };\n\n    this.removeKeyboardHandler = function(kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    };\n\n    this.getKeyboardHandler = function() {\n        return this.$handlers[this.$handlers.length - 1];\n    };\n    \n    this.getStatusText = function() {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function(h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    };\n\n    this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(\n                this.$data, hashId, keyString, keyCode, e\n            );\n            if (!toExecute || !toExecute.command)\n                continue;\n            if (toExecute.command == \"null\") {\n                success = true;\n            } else {\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            if (success && e && hashId != -1 && \n                toExecute.passEvent != true && toExecute.command.passEvent != true\n            ) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n        \n        if (!success && hashId == -1) {\n            toExecute = {command: \"insertstring\"};\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n        \n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n        \n        return success;\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        return this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    };\n\n    this.onTextInput = function(text) {\n        return this.$callKeyboardHandlers(-1, text);\n    };\n\n}).call(KeyBinding.prototype);\n\nexports.KeyBinding = KeyBinding;\n});\n\nace.define(\"ace/lib/bidiutil\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false,  hasUBAT_B = false,  hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\n\nvar impTab_LTR = [\t[\t0,\t\t3,\t\t0,\t\t1,\t\t0,\t\t0,\t\t0\t],\t[\t0,\t\t3,\t\t0,\t\t1,\t\t2,\t\t2,\t\t0\t],\t[\t0,\t\t3,\t\t0,\t\t0x11,\t\t2,\t\t0,\t\t1\t],\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t1,\t\t0\t],\t[\t0,\t\t3,\t\t0x15,\t\t0x15,\t\t4,\t\t0,\t\t1\t],\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t2,\t\t0\t]\n];\n\nvar impTab_RTL = [\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t1,\t\t0\t],\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t2,\t\t0\t],\t[\t2,\t\t0,\t\t2,\t\t1,\t\t3,\t\t2,\t\t0\t],\t[\t2,\t\t0,\t\t2,\t\t0x21,\t\t3,\t\t1,\t\t1\t]\n];\n\nvar LTR = 0, RTL = 1;\n\nvar L = 0;\nvar R = 1;\nvar EN = 2;\nvar AN = 3;\nvar ON = 4;\nvar B = 5;\nvar S = 6;\nvar AL = 7;\nvar WS = 8;\nvar CS = 9;\nvar ES = 10;\nvar ET = 11;\nvar NSM = 12;\nvar LRE = 13;\nvar RLE = 14;\nvar PDF = 15;\nvar LRO = 16;\nvar RLO = 17;\nvar BN = 18;\n\nvar UnicodeTBL00 = [\nBN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,\nWS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,\nEN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,\nBN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nCS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,\nET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON\n];\n\nvar UnicodeTBL20 = [\nWS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R\t,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,\nET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS\n];\n\nfunction _computeLevels(chars, levels, len, charTypes) {\n\tvar impTab = dir ? impTab_RTL : impTab_LTR\n\t\t, prevState = null, newClass = null, newLevel = null, newState = 0\n\t\t, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n\n\tif (!charTypes) {\n\t\tfor (i = 0, charTypes = []; i < len; i++) {\n\t\t\tcharTypes[i] = _getCharacterType(chars[i]);\n\t\t}\n\t}\n\thiLevel = dir;\n\tlastArabic = false;\n\thasUBAT_AL = false;\n\thasUBAT_B = false;\n\thasUBAT_S = false;\n\tfor (ix = 0; ix < len; ix++){\n\t\tprevState = newState;\n\t\tclasses[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n\t\tnewState = impTab[prevState][newClass];\n\t\taction = newState & 0xF0;\n\t\tnewState &= 0x0F;\n\t\tlevels[ix] = newLevel = impTab[newState][5];\n\t\tif (action > 0){\n\t\t\tif (action == 0x10){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = 1;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t} else {\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tcond = impTab[newState][6];\n\t\tif (cond){\n\t\t\tif(condPos == -1){\n\t\t\t\tcondPos = ix;\n\t\t\t}\n\t\t}else{\n\t\t\tif (condPos > -1){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = newLevel;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tif (charTypes[ix] == B){\n\t\t\tlevels[ix] = 0;\n\t\t}\n\t\thiLevel |= newLevel;\n\t}\n\tif (hasUBAT_S){\n\t\tfor(i = 0; i < len; i++){\n\t\t\tif(charTypes[i] == S){\n\t\t\t\tlevels[i] = dir;\n\t\t\t\tfor(var j = i - 1; j >= 0; j--){\n\t\t\t\t\tif(charTypes[j] == WS){\n\t\t\t\t\t\tlevels[j] = dir;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction _invertLevel(lev, levels, _array) {\n\tif (hiLevel < lev){\n\t\treturn;\n\t}\n\tif (lev == 1 && dir == RTL && !hasUBAT_B){\n\t\t_array.reverse();\n\t\treturn;\n\t}\n\tvar len = _array.length, start = 0, end, lo, hi, tmp;\n\twhile(start < len){\n\t\tif (levels[start] >= lev){\n\t\t\tend = start + 1;\n\t\twhile(end < len && levels[end] >= lev){\n\t\t\tend++;\n\t\t}\n\t\tfor(lo = start, hi = end - 1 ; lo < hi; lo++, hi--){\n\t\t\ttmp = _array[lo];\n\t\t\t_array[lo] = _array[hi];\n\t\t\t_array[hi] = tmp;\n\t\t}\n\t\tstart = end;\n\t}\n\tstart++;\n\t}\n}\n\nfunction _getCharClass(chars, types, classes, ix) {\t\t\t\n\tvar cType = types[ix], wType, nType, len, i;\n\tswitch(cType){\n\t\tcase L:\n\t\tcase R:\n\t\t\tlastArabic = false;\n\t\tcase ON:\n\t\tcase AN:\n\t\t\treturn cType;\n\t\tcase EN:\n\t\t\treturn lastArabic ? AN : EN;\n\t\tcase AL:\n\t\t\tlastArabic = true;\n\t\t\thasUBAT_AL = true;\n\t\t\treturn R;\n\t\tcase WS:\n\t\t\treturn ON;\n\t\tcase CS:\n\t\t\tif (ix < 1 || (ix + 1) >= types.length ||\n\t\t\t\t((wType = classes[ix - 1]) != EN && wType != AN) ||\n\t\t\t\t((nType = types[ix + 1]) != EN && nType != AN)){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\tif (lastArabic){nType = AN;}\n\t\t\treturn nType == wType ? nType : ON;\n\t\tcase ES:\n\t\t\twType = ix > 0 ? classes[ix - 1] : B;\n\t\t\tif (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase ET:\n\t\t\tif (ix > 0 && classes[ix - 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\tif (lastArabic){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\ti = ix + 1;\n\t\t\tlen = types.length;\n\t\t\twhile (i < len && types[i] == ET){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len && types[i] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase NSM:\n\t\t\tlen = types.length;\n\t\t\ti = ix + 1;\n\t\t\twhile (i < len && types[i] == NSM){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len){\n\t\t\t\tvar c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n\t\t\t\t\n\t\t\t\twType = types[i];\n\t\t\t\tif (rtlCandidate && (wType == R || wType == AL)){\n\t\t\t\t\treturn R;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ix < 1 || (wType = types[ix - 1]) == B){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\treturn classes[ix - 1];\n\t\tcase B:\n\t\t\tlastArabic = false;\n\t\t\thasUBAT_B = true;\n\t\t\treturn dir;\n\t\tcase S:\n\t\t\thasUBAT_S = true;\n\t\t\treturn ON;\n\t\tcase LRE:\n\t\tcase RLE:\n\t\tcase LRO:\n\t\tcase RLO:\n\t\tcase PDF:\n\t\t\tlastArabic = false;\n\t\tcase BN:\n\t\t\treturn ON;\n\t}\n}\n\nfunction _getCharacterType( ch ) {\t\t\n\tvar uc = ch.charCodeAt(0), hi = uc >> 8;\n\t\n\tif (hi == 0) {\t\t\n\t\treturn ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n\t} else if (hi == 5) {\n\t\treturn (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n\t} else if (hi == 6) {\n\t\tif (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n\t\t\treturn NSM;\n\t\telse if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n\t\t\treturn AN;\n\t\telse if (uc == 0x066A)\n\t\t\treturn ET;\n\t\telse if (/[\\u06f0-\\u06f9]/.test(ch))\n\t\t\treturn EN;\t\t\t\n\t\telse\n\t\t\treturn AL;\n\t} else if (hi == 0x20 && uc <= 0x205F) {\n\t\treturn UnicodeTBL20[uc & 0xFF];\n\t} else if (hi == 0xFE) {\n\t\treturn (uc >= 0xFE70 ? AL : ON);\n\t}\t\t\n\treturn ON;\t\n}\n\nfunction _isArabicDiacritics( ch ) {\n\treturn (ch >= '\\u064b' && ch <= '\\u0655');\n}\nexports.L = L;\nexports.R = R;\nexports.EN = EN;\nexports.ON_R = 3;\nexports.AN = 4;\nexports.R_H = 5;\nexports.B = 6;\nexports.RLE = 7;\n\nexports.DOT = \"\\xB7\";\nexports.doBidiReorder = function(text, textCharTypes, isRtl) {\n\tif (text.length < 2)\n\t\treturn {};\n\t\t\n\tvar chars = text.split(\"\"), logicalFromVisual = new Array(chars.length),\n\t\tbidiLevels = new Array(chars.length), levels = []; \n\n\tdir = isRtl ? RTL : LTR;\n\n\t_computeLevels(chars, levels, chars.length, textCharTypes);\n\n\tfor (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);\n\n\t_invertLevel(2, levels, logicalFromVisual);\n\t_invertLevel(1, levels, logicalFromVisual);\n\n\tfor (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n\t\tif (textCharTypes[i] === AN) {\n\t\t\tlevels[i] = exports.AN;\n\t\t} else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE) \n\t\t\t|| textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n\t\t\tlevels[i] = exports.ON_R;\n\t\t} else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n\t\t\tlevels[i - 1] = levels[i] = exports.R_H;\n\t\t\ti++;\n\t\t}\n\t}\n\tif (chars[chars.length - 1] === exports.DOT)\n\t\tlevels[chars.length - 1] = exports.B;\n\t\t\t\t\n\tif (chars[0] === '\\u202B')\n\t\tlevels[0] = exports.RLE;\n\t\t\t\t\n\tfor (var i = 0; i < logicalFromVisual.length; i++) {\n\t\tbidiLevels[i] = levels[logicalFromVisual[i]];\n\t}\n\n\treturn {'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels};\n};\nexports.hasBidiCharacters = function(text, textCharTypes){\n\tvar ret = false;\n\tfor (var i = 0; i < text.length; i++){\n\t\ttextCharTypes[i] = _getCharacterType(text.charAt(i));\n\t\tif (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL || textCharTypes[i] == AN))\n\t\t\tret = true;\n\t}\n\treturn ret;\n};\t\nexports.getVisualFromLogicalIdx = function(logIdx, rowMap) {\n\tfor (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n\t\tif (rowMap.logicalFromVisual[i] == logIdx)\n\t\t\treturn i;\n\t}\n\treturn 0;\n};\n\n});\n\nace.define(\"ace/bidihandler\",[\"require\",\"exports\",\"module\",\"ace/lib/bidiutil\",\"ace/lib/lang\"], function(require, exports, module) {\n\"use strict\";\n\nvar bidiUtil = require(\"./lib/bidiutil\");\nvar lang = require(\"./lib/lang\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/;\nvar BidiHandler = function(session) {\n    this.session = session;\n    this.bidiMap = {};\n    this.currentRow = null;\n    this.bidiUtil = bidiUtil;\n    this.charWidths = [];\n    this.EOL = \"\\xAC\";\n    this.showInvisibles = true;\n    this.isRtlDir = false;\n    this.$isRtl = false;\n    this.line = \"\";\n    this.wrapIndent = 0;\n    this.EOF = \"\\xB6\";\n    this.RLE = \"\\u202B\";\n    this.contentWidth = 0;\n    this.fontMetrics = null;\n    this.rtlLineOffset = 0;\n    this.wrapOffset = 0;\n    this.isMoveLeftOperation = false;\n    this.seenBidi = bidiRE.test(session.getValue());\n};\n\n(function() {\n    this.isBidiRow = function(screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    };\n\n    this.onChange = function(delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        } \n        else {\n            this.currentRow = null;\n        }\n    };\n\n    this.getDocumentRow = function() {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n\n        return docRow;\n    };\n\n    this.getSplitIndex = function() {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        } else {\n            splitIndex = this.currentRow;\n        }\n\n        return splitIndex;\n    };\n\n    this.updateRowLine = function(docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n            \n        var isLastRow = (docRow === this.session.getLength() - 1),\n            endOfLine = isLastRow ? this.EOF : this.EOL;\n\n        this.wrapIndent = 0;\n        this.line = this.session.getLine(docRow);\n        this.isRtlDir = this.$isRtl || this.line.charAt(0) === this.RLE;\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n\n                if(splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.wrapOffset = this.wrapIndent * this.charWidths[bidiUtil.L];\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splitIndex]) :\n                            this.line.substring(splits[splits.length - 1]);\n                } else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n            }\n            if (splitIndex == splits.length)\n                this.line += (this.showInvisibles) ? endOfLine : bidiUtil.DOT;\n        } else {\n            this.line += this.showInvisibles ? endOfLine : bidiUtil.DOT;\n        }\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function(ch, i){\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n\n        if (this.isRtlDir) {\n            this.fontMetrics.$main.textContent = (this.line.charAt(this.line.length - 1) == bidiUtil.DOT) ? this.line.substr(0, this.line.length - 1) : this.line;\n            this.rtlLineOffset = this.contentWidth - this.fontMetrics.$main.getBoundingClientRect().width;\n        }\n    };\n    \n    this.updateBidiMap = function() {\n        var textCharTypes = [];\n        if (bidiUtil.hasBidiCharacters(this.line, textCharTypes) || this.isRtlDir) {\n             this.bidiMap = bidiUtil.doBidiReorder(this.line, textCharTypes, this.isRtlDir);\n        } else {\n            this.bidiMap = {};\n        }\n    };\n    this.markAsDirty = function() {\n        this.currentRow = null;\n    };\n    this.updateCharacterWidths = function(fontMetrics) {\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n\n        this.fontMetrics = fontMetrics;\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = this.charWidths[bidiUtil.RLE] = 0;\n\n        this.currentRow = null;\n    };\n\n    this.setShowInvisibles = function(showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    };\n\n    this.setEolChar = function(eolChar) {\n        this.EOL = eolChar; \n    };\n\n    this.setContentWidth = function(width) {\n        this.contentWidth = width;\n    };\n\n    this.isRtlLine = function(row) {\n        if (this.$isRtl) return true;\n        if (row != undefined)\n            return (this.session.getLine(row).charAt(0) == this.RLE);\n        else\n            return this.isRtlDir; \n    };\n\n    this.setRtlDirection = function(editor, isRtlDir) {\n        var cursor = editor.getCursorPosition(); \n        for (var row = editor.selection.getSelectionAnchor().row; row <= cursor.row; row++) {\n            if (!isRtlDir && editor.session.getLine(row).charAt(0) === editor.session.$bidiHandler.RLE)\n                editor.session.doc.removeInLine(row, 0, 1);\n            else if (isRtlDir && editor.session.getLine(row).charAt(0) !== editor.session.$bidiHandler.RLE)\n                editor.session.doc.insert({column: 0, row: row}, editor.session.$bidiHandler.RLE);\n        }\n    };\n    this.getPosLeft = function(col) {\n        col -= this.wrapIndent;\n        var leftBoundary = (this.line.charAt(0) === this.RLE) ? 1 : 0;\n        var logicalIdx = (col > leftBoundary) ? (this.session.getOverwrite() ? col : col - 1) : leftBoundary;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(logicalIdx, this.bidiMap),\n            levels = this.bidiMap.bidiLevels, left = 0;\n\n        if (!this.session.getOverwrite() && col <= leftBoundary && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n            \n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n\n        if (!this.session.getOverwrite() && (col > leftBoundary) && (levels[visualIdx] % 2 === 0))\n            left += this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n            left += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        if (this.isRtlDir)\n            left += this.rtlLineOffset;\n\n        return left;\n    };\n    this.getSelections = function(startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, selections = [], offset = 0,\n            selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent,\n                isSelected = false, isSelectedPrev = false, selectionStart = 0;\n            \n        if (this.wrapIndent)\n            offset += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            } else if (!isSelected && isSelectedPrev) {\n                selections.push({left: selectionStart, width: offset - selectionStart});\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({left: selectionStart, width: offset - selectionStart});\n        }\n\n        if(this.isRtlDir) {\n            for (var i = 0; i < selections.length; i++) {\n                selections[i].left += this.rtlLineOffset;\n            }\n        }\n        return selections;\n    };\n    this.offsetToCol = function(posX) {\n        if(this.isRtlDir)\n            posX -= this.rtlLineOffset;\n\n        var logicalIdx = 0, posX = Math.max(posX, 0),\n            offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels,\n                charWidth = this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n           posX -= this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n    \n        while(posX > offset + charWidth/2) {\n            offset += charWidth;\n            if(visualIdx === levels.length - 1) {\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n    \n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)){\n            if(posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n\n        } else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)){\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                    : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n\n        } else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n                || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))){\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        } else {\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n\n        if (logicalIdx === 0 && this.isRtlDir)\n            logicalIdx++;\n\n        return (logicalIdx + this.wrapIndent);\n    };\n\n}).call(BidiHandler.prototype);\n\nexports.BidiHandler = BidiHandler;\n});\n\nace.define(\"ace/selection\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Selection = function(session) {\n    this.session = session;\n    this.doc = session.getDocument();\n\n    this.clearSelection();\n    this.cursor = this.lead = this.doc.createAnchor(0, 0);\n    this.anchor = this.doc.createAnchor(0, 0);\n    this.$silent = false;\n\n    var self = this;\n    this.cursor.on(\"change\", function(e) {\n        self.$cursorChanged = true;\n        if (!self.$silent)\n            self._emit(\"changeCursor\");\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n            self.$desiredColumn = null;\n    });\n\n    this.anchor.on(\"change\", function() {\n        self.$anchorChanged = true;\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n    });\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.isEmpty = function() {\n        return this.$isEmpty || (\n            this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column\n        );\n    };\n    this.isMultiLine = function() {\n        return !this.$isEmpty && this.anchor.row != this.cursor.row;\n    };\n    this.getCursor = function() {\n        return this.lead.getPosition();\n    };\n    this.setSelectionAnchor = function(row, column) {\n        this.$isEmpty = false;\n        this.anchor.setPosition(row, column);\n    };\n    this.getAnchor = \n    this.getSelectionAnchor = function() {\n        if (this.$isEmpty)\n            return this.getSelectionLead();\n        \n        return this.anchor.getPosition();\n    };\n    this.getSelectionLead = function() {\n        return this.lead.getPosition();\n    };\n    this.isBackwards = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    };\n    this.getRange = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n\n        if (this.$isEmpty)\n            return Range.fromPoints(lead, lead);\n\n        return this.isBackwards()\n            ? Range.fromPoints(lead, anchor)\n            : Range.fromPoints(anchor, lead);\n    };\n    this.clearSelection = function() {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    };\n    this.selectAll = function() {\n        this.$setSelection(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n    };\n    this.setRange =\n    this.setSelectionRange = function(range, reverse) {\n        var start = reverse ? range.end : range.start;\n        var end = reverse ? range.start : range.end;\n        this.$setSelection(start.row, start.column, end.row, end.column);\n    };\n\n    this.$setSelection = function(anchorRow, anchorColumn, cursorRow, cursorColumn) {\n        if (this.$silent)\n            return;\n        var wasEmpty = this.$isEmpty;\n        var wasMultiselect = this.inMultiSelectMode;\n        this.$silent = true;\n        this.$cursorChanged = this.$anchorChanged = false;\n        this.anchor.setPosition(anchorRow, anchorColumn);\n        this.cursor.setPosition(cursorRow, cursorColumn);\n        this.$isEmpty = !Range.comparePoints(this.anchor, this.cursor);\n        this.$silent = false;\n        if (this.$cursorChanged)\n            this._emit(\"changeCursor\");\n        if (this.$cursorChanged || this.$anchorChanged || wasEmpty != this.$isEmpty || wasMultiselect)\n            this._emit(\"changeSelection\");\n    };\n\n    this.$moveSelection = function(mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n\n        mover.call(this);\n    };\n    this.selectTo = function(row, column) {\n        this.$moveSelection(function() {\n            this.moveCursorTo(row, column);\n        });\n    };\n    this.selectToPosition = function(pos) {\n        this.$moveSelection(function() {\n            this.moveCursorToPosition(pos);\n        });\n    };\n    this.moveTo = function(row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    };\n    this.moveToPosition = function(pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    };\n    this.selectUp = function() {\n        this.$moveSelection(this.moveCursorUp);\n    };\n    this.selectDown = function() {\n        this.$moveSelection(this.moveCursorDown);\n    };\n    this.selectRight = function() {\n        this.$moveSelection(this.moveCursorRight);\n    };\n    this.selectLeft = function() {\n        this.$moveSelection(this.moveCursorLeft);\n    };\n    this.selectLineStart = function() {\n        this.$moveSelection(this.moveCursorLineStart);\n    };\n    this.selectLineEnd = function() {\n        this.$moveSelection(this.moveCursorLineEnd);\n    };\n    this.selectFileEnd = function() {\n        this.$moveSelection(this.moveCursorFileEnd);\n    };\n    this.selectFileStart = function() {\n        this.$moveSelection(this.moveCursorFileStart);\n    };\n    this.selectWordRight = function() {\n        this.$moveSelection(this.moveCursorWordRight);\n    };\n    this.selectWordLeft = function() {\n        this.$moveSelection(this.moveCursorWordLeft);\n    };\n    this.getWordRange = function(row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    };\n    this.selectWord = function() {\n        this.setSelectionRange(this.getWordRange());\n    };\n    this.selectAWord = function() {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    };\n\n    this.getLineRange = function(row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        } else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    };\n    this.selectLine = function() {\n        this.setSelectionRange(this.getLineRange());\n    };\n    this.moveCursorUp = function() {\n        this.moveCursorBy(-1, 0);\n    };\n    this.moveCursorDown = function() {\n        this.moveCursorBy(1, 0);\n    };\n    this.wouldMoveIntoSoftTab = function(cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length-1 == tabSize;\n    };\n    this.moveCursorLeft = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        } else if (cursor.column === 0) {\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            } else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    };\n    this.moveCursorRight = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            } else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    };\n    this.moveCursorLineStart = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n        var beforeCursor = this.session.getDisplayLine(\n            row, null, firstColumnPosition.row,\n            firstColumnPosition.column\n        );\n\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    };\n    this.moveCursorLineEnd = function() {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    };\n    this.moveCursorFileEnd = function() {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorFileStart = function() {\n        this.moveCursorTo(0, 0);\n    };\n    this.moveCursorLongWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n        if (this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n    this.moveCursorLongWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n\n        var leftOfCursor = lang.stringReverse(str);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n        if (this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n        if (this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n\n    this.$shortWordEndIndex = function(rightOfCursor) {\n        var index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n\n        tokenRe.lastIndex = 0;\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        } else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index ++;\n\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index ++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        } else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index ++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n\n        return index;\n    };\n\n    this.moveCursorShortWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n\n        var index = this.$shortWordEndIndex(rightOfCursor);\n\n        this.moveCursorTo(row, column + index);\n    };\n\n    this.moveCursorShortWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n\n        return this.moveCursorTo(row, column - index);\n    };\n\n    this.moveCursorWordRight = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    };\n\n    this.moveCursorWordLeft = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    };\n    this.moveCursorBy = function(rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(\n            this.lead.row,\n            this.lead.column\n        );\n\n        var offsetX;\n\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                } else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n        \n        if (rows != 0 && this.session.lineWidgets && this.session.lineWidgets[this.lead.row]) {\n            var widget = this.session.lineWidgets[this.lead.row];\n            if (rows < 0)\n                rows -= widget.rowsAbove || 0;\n            else if (rows > 0)\n                rows += widget.rowCount - (widget.rowsAbove || 0);\n        }\n        \n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n        \n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n            \n        }\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    };\n    this.moveCursorToPosition = function(position) {\n        this.moveCursorTo(position.row, position.column);\n    };\n    this.moveCursorTo = function(row, column, keepDesiredColumn) {\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    };\n    this.moveCursorToScreen = function(row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    };\n    this.detach = function() {\n        this.lead.detach();\n        this.anchor.detach();\n        this.session = this.doc = null;\n    };\n\n    this.fromOrientedRange = function(range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    };\n\n    this.toOrientedRange = function(range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        } else {\n            range = r;\n        }\n\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    };\n    this.getRangeOfMovements = function(func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start, end);\n        } catch(e) {\n            return Range.fromPoints(start, start);\n        } finally {\n            this.moveCursorToPosition(start);\n        }\n    };\n\n    this.toJSON = function() {\n        if (this.rangeCount) {\n            var data = this.ranges.map(function(r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        } else {\n            var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    };\n\n    this.fromJSON = function(data) {\n        if (data.start == undefined) {\n            if (this.rangeList && data.length > 1) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--; ) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            } else {\n                data = data[0];\n            }\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    };\n\n    this.isEqual = function(data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n\n        for (var i = this.ranges.length; i--; ) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    };\n\n}).call(Selection.prototype);\n\nexports.Selection = Selection;\n});\n\nace.define(\"ace/tokenizer\",[\"require\",\"exports\",\"module\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar config = require(\"./config\");\nvar MAX_TOKEN_COUNT = 2000;\nvar Tokenizer = function(rules) {\n    this.states = rules;\n\n    this.regExps = {};\n    this.matchMappings = {};\n    for (var key in this.states) {\n        var state = this.states[key];\n        var ruleRegExps = [];\n        var matchTotal = 0;\n        var mapping = this.matchMappings[key] = {defaultToken: \"text\"};\n        var flag = \"g\";\n\n        var splitterRurles = [];\n        for (var i = 0; i < state.length; i++) {\n            var rule = state[i];\n            if (rule.defaultToken)\n                mapping.defaultToken = rule.defaultToken;\n            if (rule.caseInsensitive)\n                flag = \"gi\";\n            if (rule.regex == null)\n                continue;\n\n            if (rule.regex instanceof RegExp)\n                rule.regex = rule.regex.toString().slice(1, -1);\n            var adjustedregex = rule.regex;\n            var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n            if (Array.isArray(rule.token)) {\n                if (rule.token.length == 1 || matchcount == 1) {\n                    rule.token = rule.token[0];\n                } else if (matchcount - 1 != rule.token.length) {\n                    this.reportError(\"number of classes and regexp groups doesn't match\", { \n                        rule: rule,\n                        groupCount: matchcount - 1\n                    });\n                    rule.token = rule.token[0];\n                } else {\n                    rule.tokenArray = rule.token;\n                    rule.token = null;\n                    rule.onMatch = this.$arrayTokens;\n                }\n            } else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                if (matchcount > 1)\n                    rule.onMatch = this.$applyToken;\n                else\n                    rule.onMatch = rule.token;\n            }\n\n            if (matchcount > 1) {\n                if (/\\\\\\d/.test(rule.regex)) {\n                    adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function(match, digit) {\n                        return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                    });\n                } else {\n                    matchcount = 1;\n                    adjustedregex = this.removeCapturingGroups(rule.regex);\n                }\n                if (!rule.splitRegex && typeof rule.token != \"string\")\n                    splitterRurles.push(rule); // flag will be known only at the very end\n            }\n\n            mapping[matchTotal] = i;\n            matchTotal += matchcount;\n\n            ruleRegExps.push(adjustedregex);\n            if (!rule.onMatch)\n                rule.onMatch = null;\n        }\n        \n        if (!ruleRegExps.length) {\n            mapping[0] = 0;\n            ruleRegExps.push(\"$\");\n        }\n        \n        splitterRurles.forEach(function(rule) {\n            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n        }, this);\n\n        this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n    }\n};\n\n(function() {\n    this.$setMaxTokenCount = function(m) {\n        MAX_TOKEN_COUNT = m | 0;\n    };\n    \n    this.$applyToken = function(str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        var types = this.token.apply(this, values);\n        if (typeof types === \"string\")\n            return [{type: types, value: str}];\n\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    };\n\n    this.$arrayTokens = function(str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    };\n\n    this.removeCapturingGroups = function(src) {\n        var r = src.replace(\n            /\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!]|(\\()/g,\n            function(x, y) {return y ? \"(?:\" : x;}\n        );\n        return r;\n    };\n\n    this.createSplitterRegexp = function(src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function(\n                m, esc, parenOpen, parenClose, square, index\n            ) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                } else if (square) {\n                    inChClass = true;\n                } else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index+1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                } else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        if (src.charAt(0) != \"^\") src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\") src += \"$\";\n        \n        return new RegExp(src, (flag||\"\").replace(\"g\", \"\"));\n    };\n    this.getLineTokens = function(line, startState) {\n        if (startState && typeof startState != \"string\") {\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        } else\n            var stack = [];\n\n        var currentState = startState || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n\n        var token = {type: null, value: \"\"};\n\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                } else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: type, value: skipped};\n                }\n            }\n\n            for (var i = 0; i < match.length-2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n\n                rule = state[mapping[i]];\n\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    } else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    \n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    } else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = {type: type, value: value};\n                    }\n                } else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: null, value: \"\"};\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n\n            if (lastIndex == line.length)\n                break;\n\n            lastIndex = index;\n\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 500),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n\n        if (token.type)\n            tokens.push(token);\n        \n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens : tokens,\n            state : stack.length ? stack : currentState\n        };\n    };\n    \n    this.reportError = config.reportError;\n    \n}).call(Tokenizer.prototype);\n\nexports.Tokenizer = Tokenizer;\n});\n\nace.define(\"ace/mode/text_highlight_rules\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\"], function(require, exports, module) {\n\"use strict\";\n\nvar lang = require(\"../lib/lang\");\n\nvar TextHighlightRules = function() {\n\n    this.$rules = {\n        \"start\" : [{\n            token : \"empty_line\",\n            regex : '^$'\n        }, {\n            defaultToken : \"text\"\n        }]\n    };\n};\n\n(function() {\n\n    this.addRules = function(rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n\n    this.getRules = function() {\n        return this.$rules;\n    };\n\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        } else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n\n        this.addRules(embedRules, prefix);\n\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));\n        }\n\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n\n    this.getEmbeds = function() {\n        return this.$embeds;\n    };\n\n    var pushState = function(currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function(currentState, stack) {\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n\n    this.normalizeRules = function() {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state.processed = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName)  {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                } else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        } else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function(x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n\n                if (toInsert) {\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function(x) {return !x.next;});\n                    state.splice.apply(state, args);\n                    i--;\n                }\n                \n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(\n                        rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive\n                    );\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n\n    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        this.$keywordList = [];\n        Object.keys(map).forEach(function(className) {\n            var a = map[className];\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--; ) {\n                var word = list[i];\n                this.$keywordList.push(word);\n                if (ignoreCase)\n                    word = word.toLowerCase(); \n                keywords[word] = className;\n            }\n        }, this);\n        map = null;\n        return ignoreCase\n            ? function(value) {return keywords[value.toLowerCase()] || defaultToken; }\n            : function(value) {return keywords[value] || defaultToken; };\n    };\n\n    this.getKeywords = function() {\n        return this.$keywords;\n    };\n\n}).call(TextHighlightRules.prototype);\n\nexports.TextHighlightRules = TextHighlightRules;\n});\n\nace.define(\"ace/mode/behaviour\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nvar Behaviour = function() {\n   this.$behaviours = {};\n};\n\n(function () {\n\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n          case this.$behaviours:\n              this.$behaviours = {};\n          case this.$behaviours[name]:\n              this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n    \n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n    \n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n    \n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        } else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n    \n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        } else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n\n}).call(Behaviour.prototype);\n\nexports.Behaviour = Behaviour;\n});\n\nace.define(\"ace/token_iterator\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"./range\").Range;\nvar TokenIterator = function(session, initialRow, initialColumn) {\n    this.$session = session;\n    this.$row = initialRow;\n    this.$rowTokens = session.getTokens(initialRow);\n\n    var token = session.getTokenAt(initialRow, initialColumn);\n    this.$tokenIndex = token ? token.index : -1;\n};\n\n(function() { \n    this.stepBackward = function() {\n        this.$tokenIndex -= 1;\n        \n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n                \n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };   \n    this.stepForward = function() {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };      \n    this.getCurrentToken = function () {\n        return this.$rowTokens[this.$tokenIndex];\n    };      \n    this.getCurrentTokenRow = function () {\n        return this.$row;\n    };     \n    this.getCurrentTokenColumn = function() {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n            \n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        \n        return column;  \n    };\n    this.getCurrentTokenPosition = function() {\n        return {row: this.$row, column: this.getCurrentTokenColumn()};\n    };\n    this.getCurrentTokenRange = function() {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    };\n    \n}).call(TokenIterator.prototype);\n\nexports.TokenIterator = TokenIterator;\n});\n\nace.define(\"ace/mode/behaviour/cstyle\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/mode/behaviour\",\"ace/token_iterator\",\"ace/lib/lang\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\nvar lang = require(\"../../lib/lang\");\n\nvar SAFE_INSERT_IN_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\", \"comment\"];\n\nvar context;\nvar contextCache = {};\nvar defaultQuotes = {'\"' : '\"', \"'\" : \"'\"};\n\nvar initContext = function(editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = {rangeCount: editor.multiSelect.rangeCount};\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\n\nvar getWrapped = function(selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n                0,\n                selection.start.column + 1,\n                rowDiff,\n                selection.end.column + (rowDiff ? 0 : 1)\n            ]\n    };\n};\n\nvar CstyleBehaviour = function(options) {\n    this.add(\"braces\", \"insertion\", function(state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                } else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({row: cursor.row, column: cursor.column+1}, '}');\n                if (!openBracePos)\n                     return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            } else if (closing) {\n                var next_indent = this.$getIndent(line);\n            } else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        } else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n\n    this.add(\"braces\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            } else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n\n    this.add(\"parens\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"parens\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"insertion\", function(state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1) \n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            } else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column-1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n                \n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n                \n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n                \n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                } else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(leftChar);\n                    if (isWordBefore || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    var charBefore = line[cursor.column - 2];\n                    if (leftChar == quote &&  (charBefore == quote || wordRe.test(charBefore)))\n                        return null;\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1,1]\n                };\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"deletion\", function(state, action, editor, session, range) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && quotes.hasOwnProperty(selected)) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n};\n\n    \nCstyleBehaviour.isSaneInsertion = function(editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        if (/[)}\\]]/.test(editor.session.getLine(cursor.row)[cursor.column]))\n            return true;\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\n\nCstyleBehaviour.$matchTokenType = function(token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\n\nCstyleBehaviour.recordAutoInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\n\nCstyleBehaviour.recordMaybeInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isMaybeInsertedClosing(cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\n\nCstyleBehaviour.isAutoInsertedClosing = function(cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\n\nCstyleBehaviour.isMaybeInsertedClosing = function(cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\n\nCstyleBehaviour.popAutoInsertedClosing = function() {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\n\nCstyleBehaviour.clearMaybeInsertedClosing = function() {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\n\n\n\noop.inherits(CstyleBehaviour, Behaviour);\n\nexports.CstyleBehaviour = CstyleBehaviour;\n});\n\nace.define(\"ace/unicode\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\nvar wordChars = [48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2];\n\nvar code = 0;\nvar str = [];\nfor (var i = 0; i < wordChars.length; i += 2) {\n    str.push(code += wordChars[i]);\n    if (wordChars[i + 1])\n        str.push(45, code += wordChars[i + 1]);\n}\n\nexports.wordChars = String.fromCharCode.apply(null, str);\n\n});\n\nace.define(\"ace/mode/text\",[\"require\",\"exports\",\"module\",\"ace/config\",\"ace/tokenizer\",\"ace/mode/text_highlight_rules\",\"ace/mode/behaviour/cstyle\",\"ace/unicode\",\"ace/lib/lang\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\nvar config = require(\"../config\");\n\nvar Tokenizer = require(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = require(\"../unicode\");\nvar lang = require(\"../lib/lang\");\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\n\nvar Mode = function() {\n    this.HighlightRules = TextHighlightRules;\n};\n\n(function() {\n    this.$defaultBehaviour = new CstyleBehaviour();\n\n    this.tokenRe = new RegExp(\"^[\" + unicode.wordChars + \"\\\\$_]+\", \"g\");\n\n    this.nonTokenRe = new RegExp(\"^(?:[^\" + unicode.wordChars + \"\\\\$_]|\\\\s])+\", \"g\");\n\n    this.getTokenizer = function() {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n\n    this.toggleCommentLines = function(state, session, startRow, endRow) {\n        var doc = session.doc;\n\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n\n            var comment = function(line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);\n                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n\n            var uncomment = function(line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n\n            var testRemove = function(line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        } else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            } else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            \n            insertAtTabStop = session.getUseSoftTabs();\n\n            var uncomment = function(line, i) {\n                var m = line.match(regexpStart);\n                if (!m) return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function(line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);\n                    else\n                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n            var testRemove = function(line, i) {\n                return regexpStart.test(line);\n            };\n            \n            var shouldInsertSpace = function(line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n            };\n        }\n\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n\n\n        var minEmptyLength = Infinity;\n        iter(function(line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            } else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n\n        iter(shouldRemove ? uncomment : comment);\n    };\n\n    this.toggleBlockComment = function(state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        } else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n    this.createWorker = function(session) {\n        return null;\n    };\n\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                var Mode = mapping[i];\n                var id = Mode.prototype.$id;\n                var mode = config.$modes[id];\n                if (!mode)\n                    config.$modes[id] = mode = new Mode();\n                if (!config.$modes[i])\n                    config.$modes[i] = mode;\n                this.$embeds.push(i);\n                this.$modes[i] = mode;\n            }\n        }\n\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\", \n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n\n        for (var i = 0; i < delegations.length; i++) {\n            (function(scope) {\n              var functionName = delegations[i];\n              var defaultHandler = scope[functionName];\n              scope[delegations[i]] = function() {\n                  return this.$delegator(functionName, arguments, defaultHandler);\n              };\n            }(this));\n        }\n    };\n\n    this.$delegator = function(method, args, defaultHandler) {\n        var state = args[0] || \"start\";\n        if (typeof state != \"string\") {\n            if (Array.isArray(state[2])) {\n                var language = state[2][state[2].length - 1];\n                var mode = this.$modes[language];\n                if (mode)\n                    return mode[method].apply(mode, [state[1]].concat([].slice.call(args, 1)));\n            }\n            state = state[0] || \"start\";\n        }\n            \n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]]) continue;\n\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n\n    this.transformAction = function(state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    \n    this.getKeywords = function(append) {\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer.rules;\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {    \n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    \n    this.$createKeywordList = function() {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function(word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n});\n\nace.define(\"ace/apply_delta\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n           position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\nfunction validateDelta(docLines, delta) {\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n    if (!delta.start || !delta.end)\n       throwDeltaError(delta, \"delta.start/end must be an present\");\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n\nexports.applyDelta = function(docLines, delta, doNotValidate) {\n    \n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n    }\n};\n});\n\nace.define(\"ace/anchor\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\nvar Anchor = exports.Anchor = function(doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    \n    if (typeof column == \"undefined\")\n        this.setPosition(row.row, row.column);\n    else\n        this.setPosition(row, column);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.getPosition = function() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n    this.getDocument = function() {\n        return this.document;\n    };\n    this.$insertRight = false;\n    this.onChange = function(delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n            \n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    \n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n    }\n            \n    function $getTransformedPoint(delta, point, moveIfEqual) {\n        var deltaIsInsert = delta.action == \"insert\";\n        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n        var deltaStart = delta.start;\n        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n            return {\n                row: point.row,\n                column: point.column\n            };\n        }\n        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n            return {\n                row: point.row + deltaRowShift,\n                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n            };\n        }\n        \n        return {\n            row: deltaStart.row,\n            column: deltaStart.column\n        };\n    }\n    this.setPosition = function(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n    this.detach = function() {\n        this.document.off(\"change\", this.$onChange);\n    };\n    this.attach = function(doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n    this.$clipPositionToDocument = function(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    };\n\n}).call(Anchor.prototype);\n\n});\n\nace.define(\"ace/document\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/apply_delta\",\"ace/lib/event_emitter\",\"ace/range\",\"ace/anchor\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar applyDelta = require(\"./apply_delta\").applyDelta;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Anchor = require(\"./anchor\").Anchor;\n\nvar Document = function(textOrLines) {\n    this.$lines = [\"\"];\n    if (textOrLines.length === 0) {\n        this.$lines = [\"\"];\n    } else if (Array.isArray(textOrLines)) {\n        this.insertMergedLines({row: 0, column: 0}, textOrLines);\n    } else {\n        this.insert({row: 0, column:0}, textOrLines);\n    }\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setValue = function(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text);\n    };\n    this.getValue = function() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n    this.createAnchor = function(row, column) {\n        return new Anchor(this, row, column);\n    };\n    if (\"aaa\".split(/a/).length === 0) {\n        this.$split = function(text) {\n            return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n        };\n    } else {\n        this.$split = function(text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n        };\n    }\n\n\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineCharacter = function() {\n        switch (this.$newLineMode) {\n          case \"windows\":\n            return \"\\r\\n\";\n          case \"unix\":\n            return \"\\n\";\n          default:\n            return this.$autoNewLine || \"\\n\";\n        }\n    };\n\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n    this.setNewLineMode = function(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n    this.getNewLineMode = function() {\n        return this.$newLineMode;\n    };\n    this.isNewLine = function(text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n    this.getLine = function(row) {\n        return this.$lines[row] || \"\";\n    };\n    this.getLines = function(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n    this.getAllLines = function() {\n        return this.getLines(0, this.getLength());\n    };\n    this.getLength = function() {\n        return this.$lines.length;\n    };\n    this.getTextRange = function(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    this.getLinesForRange = function(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n    this.insertLines = function(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    this.removeLines = function(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    this.insertNewLine = function(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n    this.insert = function(position, text) {\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        \n        return this.insertMergedLines(position, this.$split(text));\n    };\n    this.insertInLine = function(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        \n        return this.clonePos(end);\n    };\n    \n    this.clippedPos = function(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    };\n    \n    this.clonePos = function(pos) {\n        return {row: pos.row, column: pos.column};\n    };\n    \n    this.pos = function(row, column) {\n        return {row: row, column: column};\n    };\n    \n    this.$clipPosition = function(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n    this.insertFullLines = function(row, lines) {\n        row = Math.min(Math.max(row, 0), this.getLength());\n        var column = 0;\n        if (row < this.getLength()) {\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        this.insertMergedLines({row: row, column: column}, lines);\n    };    \n    this.insertMergedLines = function(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        \n        return this.clonePos(end);\n    };\n    this.remove = function(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    };\n    this.removeInLine = function(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n        \n        return this.clonePos(start);\n    };\n    this.removeFullLines = function(firstRow, lastRow) {\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); \n        var range = new Range(startRow, startCol, endRow, endCol);\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        \n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        return deletedLines;\n    };\n    this.removeNewLine = function(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n    this.replace = function(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n        if (text == this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        \n        return end;\n    };\n    this.applyDeltas = function(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    this.revertDeltas = function(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    this.applyDelta = function(delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        \n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    };\n    \n    this.$safeApplyDelta = function(delta) {\n        var docLength = this.$lines.length;\n        if (\n            delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength\n        ) {\n            this.applyDelta(delta);\n        }\n    };\n    \n    this.$splitAndapplyLargeDelta = function(delta, MAX) {\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row; \n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    };\n    this.revertDelta = function(delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    this.indexToPosition = function(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: index + lines[l-1].length + newlineLength};\n    };\n    this.positionToIndex = function(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    };\n\n}).call(Document.prototype);\n\nexports.Document = Document;\n});\n\nace.define(\"ace/background_tokenizer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\nvar BackgroundTokenizer = function(tokenizer, editor) {\n    this.running = false;\n    this.lines = [];\n    this.states = [];\n    this.currentLine = 0;\n    this.tokenizer = tokenizer;\n\n    var self = this;\n\n    this.$worker = function() {\n        if (!self.running) { return; }\n\n        var workerStart = new Date();\n        var currentLine = self.currentLine;\n        var endLine = -1;\n        var doc = self.doc;\n\n        var startLine = currentLine;\n        while (self.lines[currentLine])\n            currentLine++;\n        \n        var len = doc.getLength();\n        var processedLines = 0;\n        self.running = false;\n        while (currentLine < len) {\n            self.$tokenizeRow(currentLine);\n            endLine = currentLine;\n            do {\n                currentLine++;\n            } while (self.lines[currentLine]);\n            processedLines ++;\n            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {\n                self.running = setTimeout(self.$worker, 20);\n                break;\n            }\n        }\n        self.currentLine = currentLine;\n        \n        if (endLine == -1)\n            endLine = currentLine;\n        \n        if (startLine <= endLine)\n            self.fireUpdateEvent(startLine, endLine);\n    };\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n    this.setTokenizer = function(tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n\n        this.start(0);\n    };\n    this.setDocument = function(doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n\n        this.stop();\n    };\n    this.fireUpdateEvent = function(firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", {data: data});\n    };\n    this.start = function(startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n\n        this.stop();\n        this.running = setTimeout(this.$worker, 700);\n    };\n    \n    this.scheduleStart = function() {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    };\n\n    this.$updateOnChange = function(delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            this.lines[startRow] = null;\n        } else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n\n        this.stop();\n    };\n    this.stop = function() {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    };\n    this.getTokens = function(row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    };\n    this.getState = function(row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    };\n\n    this.$tokenizeRow = function(row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n\n        var data = this.tokenizer.getLineTokens(line, state, row);\n\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        } else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n\n        return this.lines[row] = data.tokens;\n    };\n\n}).call(BackgroundTokenizer.prototype);\n\nexports.BackgroundTokenizer = BackgroundTokenizer;\n});\n\nace.define(\"ace/search_highlight\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\n\nvar SearchHighlight = function(regExp, clazz, type) {\n    this.setRegexp(regExp);\n    this.clazz = clazz;\n    this.type = type || \"text\";\n};\n\n(function() {\n    this.MAX_RANGES = 500;\n    \n    this.setRegexp = function(regExp) {\n        if (this.regExp+\"\" == regExp+\"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    };\n\n    this.update = function(html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow, end = config.lastRow;\n\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null) {\n                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                if (ranges.length > this.MAX_RANGES)\n                    ranges = ranges.slice(0, this.MAX_RANGES);\n                ranges = ranges.map(function(match) {\n                    return new Range(i, match.offset, i, match.offset + match.length);\n                });\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n\n            for (var j = ranges.length; j --; ) {\n                markerLayer.drawSingleLineMarker(\n                    html, ranges[j].toScreenRange(session), this.clazz, config);\n            }\n        }\n    };\n\n}).call(SearchHighlight.prototype);\n\nexports.SearchHighlight = SearchHighlight;\n});\n\nace.define(\"ace/edit_session/fold_line\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../range\").Range;\nfunction FoldLine(foldData, folds) {\n    this.foldData = foldData;\n    if (Array.isArray(folds)) {\n        this.folds = folds;\n    } else {\n        folds = this.folds = [ folds ];\n    }\n\n    var last = folds[folds.length - 1];\n    this.range = new Range(folds[0].start.row, folds[0].start.column,\n                           last.end.row, last.end.column);\n    this.start = this.range.start;\n    this.end   = this.range.end;\n\n    this.folds.forEach(function(fold) {\n        fold.setFoldLine(this);\n    }, this);\n}\n\n(function() {\n    this.shiftRow = function(shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function(fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    };\n\n    this.addFold = function(fold) {\n        if (fold.sameRow) {\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function(a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column =  fold.end.column;\n            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        } else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        } else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        } else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    };\n\n    this.containsRow = function(row) {\n        return row >= this.start.row && row <= this.end.row;\n    };\n\n    this.walk = function(callback, endRow, endColumn) {\n        var lastEnd = 0,\n            folds = this.folds,\n            fold,\n            cmp, stop, isNewRow = true;\n\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n\n            cmp = fold.range.compareStart(endRow, endColumn);\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n            if (stop || cmp === 0) {\n                return;\n            }\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    };\n\n    this.getNextFoldTo = function(row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            } else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    };\n\n    this.addRemoveChars = function(row, column, len) {\n        var ret = this.getNextFoldTo(row, column),\n            fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row)\n            {\n                window.console && window.console.log(row, column, fold);\n            } else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    };\n\n    this.split = function(row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        \n        if (!pos || pos.kind == \"inside\")\n            return null;\n            \n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        \n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n        folds = folds.splice(i, folds.length - i);\n\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    };\n\n    this.merge = function(foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    };\n\n    this.toString = function() {\n        var ret = [this.range.toString() + \": [\" ];\n\n        this.folds.forEach(function(fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    };\n\n    this.idxToPosition = function(idx) {\n        var lastFoldEndColumn = 0;\n\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n\n            lastFoldEndColumn = fold.end.column;\n        }\n\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    };\n}).call(FoldLine.prototype);\n\nexports.FoldLine = FoldLine;\n});\n\nace.define(\"ace/range_list\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\nvar Range = require(\"./range\").Range;\nvar comparePoints = Range.comparePoints;\n\nvar RangeList = function() {\n    this.ranges = [];\n    this.$bias = 1;\n};\n\n(function() {\n    this.comparePoints = comparePoints;\n\n    this.pointIndex = function(pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i-2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n\n            return -i-1;\n        }\n        return -i - 1;\n    };\n\n    this.add = function(range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    };\n\n    this.addList = function(list) {\n        var removed = [];\n        for (var i = list.length; i--; ) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    };\n\n    this.substractPoint = function(pos) {\n        var i = this.pointIndex(pos);\n\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    };\n    this.merge = function() {\n        var removed = [];\n        var list = this.ranges;\n        \n        list = list.sort(function(a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        \n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        \n        this.ranges = list;\n\n        return removed;\n    };\n\n    this.contains = function(row, column) {\n        return this.pointIndex({row: row, column: column}) >= 0;\n    };\n\n    this.containsPoint = function(pos) {\n        return this.pointIndex(pos) >= 0;\n    };\n\n    this.rangeAtPoint = function(pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    };\n\n\n    this.clipRows = function(startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n\n        var startIndex = this.pointIndex({row: startRow, column: 0});\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    };\n\n    this.removeAll = function() {\n        return this.ranges.splice(0, this.ranges.length);\n    };\n\n    this.attach = function(session) {\n        if (this.session)\n            this.detach();\n\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n\n        this.session.on('change', this.onChange);\n    };\n\n    this.detach = function() {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    };\n\n    this.$onChange = function(delta) {\n        var start = delta.start;\n        var end = delta.end;\n        var startRow = start.row;\n        var endRow = end.row;\n        var ranges = this.ranges;\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row >= startRow)\n                break;\n        }\n        \n        if (delta.action == \"insert\") {\n            var lineDif = endRow - startRow;\n            var colDiff = -start.column + end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > startRow)\n                    break;\n    \n                if (r.start.row == startRow && r.start.column >= start.column) {\n                    if (r.start.column == start.column && this.$bias <= 0) {\n                    } else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                if (r.end.row == startRow && r.end.column >= start.column) {\n                    if (r.end.column == start.column && this.$bias < 0) {\n                        continue;\n                    }\n                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {\n                        if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)\n                            r.end.column -= colDiff;\n                    }\n                    r.end.column += colDiff;\n                    r.end.row += lineDif;\n                }\n            }\n        } else {\n            var lineDif = startRow - endRow;\n            var colDiff = start.column - end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                \n                if (r.start.row > endRow)\n                    break;\n                    \n                if (r.end.row < endRow\n                    && (\n                        startRow < r.end.row \n                        || startRow == r.end.row && start.column < r.end.column\n                    )\n                ) {\n                    r.end.row = startRow;\n                    r.end.column = start.column;\n                }\n                else if (r.end.row == endRow) {\n                    if (r.end.column <= end.column) {\n                        if (lineDif || r.end.column > start.column) {\n                            r.end.column = start.column;\n                            r.end.row = start.row;\n                        }\n                    }\n                    else {\n                        r.end.column += colDiff;\n                        r.end.row += lineDif;\n                    }\n                }\n                else if (r.end.row > endRow) {\n                    r.end.row += lineDif;\n                }\n                \n                if (r.start.row < endRow\n                    && (\n                        startRow < r.start.row \n                        || startRow == r.start.row && start.column < r.start.column\n                    )\n                ) {\n                    r.start.row = startRow;\n                    r.start.column = start.column;\n                }\n                else if (r.start.row == endRow) {\n                    if (r.start.column <= end.column) {\n                        if (lineDif || r.start.column > start.column) {\n                            r.start.column = start.column;\n                            r.start.row = start.row;\n                        }\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                else if (r.start.row > endRow) {\n                    r.start.row += lineDif;\n                }\n            }\n        }\n\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    };\n\n}).call(RangeList.prototype);\n\nexports.RangeList = RangeList;\n});\n\nace.define(\"ace/edit_session/fold\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/lib/oop\"], function(require, exports, module) {\n\"use strict\";\n\nvar RangeList = require(\"../range_list\").RangeList;\nvar oop = require(\"../lib/oop\");\nvar Fold = exports.Fold = function(range, placeholder) {\n    this.foldLine = null;\n    this.placeholder = placeholder;\n    this.range = range;\n    this.start = range.start;\n    this.end = range.end;\n\n    this.sameRow = range.start.row == range.end.row;\n    this.subFolds = this.ranges = [];\n};\n\noop.inherits(Fold, RangeList);\n\n(function() {\n\n    this.toString = function() {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    };\n\n    this.setFoldLine = function(foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function(fold) {\n            fold.setFoldLine(foldLine);\n        });\n    };\n\n    this.clone = function() {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function(subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    };\n\n    this.addSubFold = function(fold) {\n        if (this.range.isEqual(fold))\n            return;\n        consumeRange(fold, this.start);\n\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n        var firstConsumed = 0;\n\n        if (cmp == 0) {\n            if (afterStart.range.containsRange(fold))\n                return afterStart.addSubFold(fold);\n            else\n                firstConsumed = 1;\n        }\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        if (cmp == 0)  j++;\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        var last = cmp == 0 ? consumedFolds.length - 1 : consumedFolds.length;\n        for (var k = firstConsumed; k < last; k++) {\n            fold.addSubFold(consumedFolds[k]);\n        }\n        fold.setFoldLine(this.foldLine);\n\n        return fold;\n    };\n    \n    this.restoreRange = function(range) {\n        return restoreRange(range, this.start);\n    };\n\n}).call(Fold.prototype);\n\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\n\n});\n\nace.define(\"ace/edit_session/folding\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/edit_session/fold_line\",\"ace/edit_session/fold\",\"ace/token_iterator\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../range\").Range;\nvar FoldLine = require(\"./fold_line\").FoldLine;\nvar Fold = require(\"./fold\").Fold;\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\n\nfunction Folding() {\n    this.getFoldAt = function(row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var range = folds[i].range;\n            if (range.contains(row, column)) {\n                if (side == 1 && range.isEnd(row, column) && !range.isEmpty()) {\n                    continue;\n                } else if (side == -1 && range.isStart(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                return folds[i];\n            }\n        }\n    };\n    this.getFoldsInRange = function(range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n\n        start.column += 1;\n        end.column -= 1;\n\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                continue;\n            }\n            else if (cmp == -2) {\n                break;\n            }\n\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                } else if (cmp == 2) {\n                    continue;\n                } else\n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n\n        return foundFolds;\n    };\n\n    this.getFoldsInRangeList = function(ranges) {\n        if (Array.isArray(ranges)) {\n            var folds = [];\n            ranges.forEach(function(range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        } else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    this.getAllFolds = function() {\n        var folds = [];\n        var foldLines = this.$foldData;\n        \n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n\n        return folds;\n    };\n    this.getFoldStringAt = function(row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var lastFold = {\n            end: { column: 0 }\n        };\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n\n    this.getFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            } else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n    this.getNextFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n\n    this.getFoldedRowCount = function(first, last) {\n        var foldData = this.$foldData, rowCount = last-first+1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i],\n                end = foldLine.end.row,\n                start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last-start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            } else if (end >= first){\n                if (start >= first) // fold inside range\n                    rowCount -=  end-start;\n                else\n                    rowCount -=  end-first+1;\n            }\n        }\n        return rowCount;\n    };\n\n    this.$addFoldLine = function(foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function(a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n    this.addFold = function(placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        var fold;\n        \n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        \n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            this.removeFolds(folds);\n            if (!fold.collapseChildren) {\n                folds.forEach(function(subFold) {\n                    fold.addSubFold(subFold);\n                });\n            }\n        }\n\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            } else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            } else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n\n        return fold;\n    };\n\n    this.addFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.addFold(fold);\n        }, this);\n    };\n\n    this.removeFold = function(fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        } else\n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        } else\n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        } else\n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        } else\n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n\n    this.removeFolds = function(folds) {\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n\n        cloneFolds.forEach(function(fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n\n    this.expandFold = function(fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function(subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);\n        }\n        fold.subFolds = [];\n    };\n\n    this.expandFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n\n    this.unfold = function(location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            if (expandInner == null) expandInner = true;\n        } else if (typeof location == \"number\")\n            range = new Range(location, 0, location, this.getLine(location).length);\n        else if (\"row\" in location)\n            range = Range.fromPoints(location, location);\n        else\n            range = location;\n        \n        folds = this.getFoldsInRangeList(range);\n        if (expandInner != false) {\n            this.removeFolds(folds);\n        } else {\n            this.expandFolds(folds);\n        }\n        if (folds.length)\n            return folds;\n    };\n    this.isRowFolded = function(docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n\n    this.getRowFoldEnd = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n\n    this.getRowFoldStart = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n\n    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        var doc = this.doc;\n        var textLine = \"\";\n\n        foldLine.walk(function(placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n\n            if (placeholder != null) {\n                textLine += placeholder;\n            } else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n\n    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        } else {\n            return this.getFoldDisplayLine(\n                foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n\n    this.$cloneFoldData = function() {\n        var fd = [];\n        fd = this.$foldData.map(function(foldLine) {\n            var folds = foldLine.folds.map(function(fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n\n        return fd;\n    };\n\n    this.toggleFold = function(tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            } else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                } else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n\n                range.start.column++;\n            } else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        } else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            } else if (folds.length == 1 ) {\n                fold = folds[0];\n            }\n        }\n\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n\n        this.addFold(placeholder, range);\n    };\n\n    this.getCommentFoldRange = function(row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token && token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type));\n                iterator.stepForward();\n            }\n            \n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + 2;\n\n            iterator = new TokenIterator(this, row, column);\n            \n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (!re.test(state))\n                            lastRow = iterator.$row;\n                    } else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type));\n                token = iterator.stepBackward();\n            } else\n                token = iterator.getCurrentToken();\n\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn() + token.value.length - 2;\n            return range;\n        }\n    };\n\n    this.foldAll = function(startRow, endRow, depth, test) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n            \n            if (test && !test(row)) continue;\n\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow\n            ) {\n                row = range.end.row;\n                range.collapseChildren = depth;\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    \n    this.foldToLevel = function(level) {\n        this.foldAll();\n        while (level-- > 0)\n            this.unfold(null, false);\n    };\n    \n    this.foldAllComments = function() {\n        var session = this;\n        this.foldAll(null, null, null, function(row) {\n            var tokens = session.getTokens(row);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                if (token.type == \"text\" && /^\\s+$/.test(token.value))\n                    continue;\n                if (/comment/.test(token.type))\n                    return true;\n                return false;\n            }\n        });\n    };\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    this.setFoldStyle = function(style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        \n        if (this.$foldStyle == style)\n            return;\n\n        this.$foldStyle = style;\n        \n        if (style == \"manual\")\n            this.unfold();\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n\n    this.$setFolding = function(foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n            \n        this.$foldMode = foldMode;\n        \n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        \n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        \n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        \n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n\n    this.onFoldWidgetClick = function(row, e) {\n        e = e.domEvent;\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        \n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n    \n    this.$toggleFoldWidget = function(row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n\n        var range = this.getFoldWidgetRange(row, true);\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        \n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        } else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        } else if (range) {\n            if (options.all) \n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        \n        return range;\n    };\n    \n    \n    \n    this.toggleFoldWidget = function(toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        \n        if (range)\n            return;\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        \n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n\n            if (fold) {\n                this.removeFold(fold);\n            } else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n\n    this.updateFoldWidgets = function(delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        } else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    this.tokenizerUpdateFoldWidgets = function(e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\n\nexports.Folding = Folding;\n\n});\n\nace.define(\"ace/edit_session/bracket_match\",[\"require\",\"exports\",\"module\",\"ace/token_iterator\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\n\n\nfunction BracketMatch() {\n\n    this.findMatchingBracket = function(position, chr) {\n        if (position.column == 0) return null;\n\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);\n        if (charBeforeCursor == \"\") return null;\n\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n    \n    this.getBracketRange = function(pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = {row: pos.row, column: pos.column + 1};\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        } else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        \n        return range;\n    };\n    this.getMatchingBracketRanges = function(pos) {\n        var line = this.getLine(pos.row);\n\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = {row: pos.row, column: pos.column + 1};\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        }\n\n        if (!match)\n            return null;\n\n        var startRange = new Range(pos.row, pos.column - 1, pos.row, pos.column);\n        var bracketPos = match[1] ? this.$findClosingBracket(match[1], pos)\n            : this.$findOpeningBracket(match[2], pos);\n        if (!bracketPos)\n            return [startRange];\n        var endRange = new Range(bracketPos.row, bracketPos.column, bracketPos.row, bracketPos.column + 1);\n\n        return [startRange, endRange];\n    };\n\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\",\n        \"<\": \">\",\n        \">\": \"<\"\n    };\n\n    this.$findOpeningBracket = function(bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        \n         if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        \n        while (true) {\n        \n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n                \n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        \n        return null;\n    };\n\n    this.$findClosingBracket = function(bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n\n        if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n\n        while (true) {\n\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n\n            valueIndex = 0;\n        }\n        \n        return null;\n    };\n}\nexports.BracketMatch = BracketMatch;\n\n});\n\nace.define(\"ace/edit_session\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/bidihandler\",\"ace/config\",\"ace/lib/event_emitter\",\"ace/selection\",\"ace/mode/text\",\"ace/range\",\"ace/document\",\"ace/background_tokenizer\",\"ace/search_highlight\",\"ace/edit_session/folding\",\"ace/edit_session/bracket_match\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar BidiHandler = require(\"./bidihandler\").BidiHandler;\nvar config = require(\"./config\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Selection = require(\"./selection\").Selection;\nvar TextMode = require(\"./mode/text\").Mode;\nvar Range = require(\"./range\").Range;\nvar Document = require(\"./document\").Document;\nvar BackgroundTokenizer = require(\"./background_tokenizer\").BackgroundTokenizer;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n\nvar EditSession = function(text, mode) {\n    this.$breakpoints = [];\n    this.$decorations = [];\n    this.$frontMarkers = {};\n    this.$backMarkers = {};\n    this.$markerId = 1;\n    this.$undoSelect = true;\n\n    this.$foldData = [];\n    this.id = \"session\" + (++EditSession.$uid);\n    this.$foldData.toString = function() {\n        return this.join(\"\\n\");\n    };\n    this.on(\"changeFold\", this.onChangeFold.bind(this));\n    this.$onChange = this.onChange.bind(this);\n\n    if (typeof text != \"object\" || !text.getLine)\n        text = new Document(text);\n\n    this.setDocument(text);\n    this.selection = new Selection(this);\n    this.$bidiHandler = new BidiHandler(this);\n\n    config.resetOptions(this);\n    this.setMode(mode);\n    config._signal(\"session\", this);\n};\n\n\nEditSession.$uid = 0;\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setDocument = function(doc) {\n        if (this.doc)\n            this.doc.removeListener(\"change\", this.$onChange);\n\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange);\n\n        if (this.bgTokenizer)\n            this.bgTokenizer.setDocument(this.getDocument());\n\n        this.resetCaches();\n    };\n    this.getDocument = function() {\n        return this.doc;\n    };\n    this.$resetRowCache = function(docRow) {\n        if (!docRow) {\n            this.$docRowCache = [];\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    };\n\n    this.$getRowCacheIndex = function(cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n\n        return low -1;\n    };\n\n    this.resetCaches = function() {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (this.bgTokenizer)\n            this.bgTokenizer.start(0);\n    };\n\n    this.onChangeFold = function(e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    };\n\n    this.onChange = function(delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager) {\n            if (removedFolds && removedFolds.length) {\n                this.$undoManager.add({\n                    action: \"removeFolds\",\n                    folds:  removedFolds\n                }, this.mergeUndoDeltas);\n                this.mergeUndoDeltas = true;\n            }\n            this.$undoManager.add(delta, this.mergeUndoDeltas);\n            this.mergeUndoDeltas = true;\n            \n            this.$informUndoManager.schedule();\n        }\n\n        this.bgTokenizer && this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    };\n    this.setValue = function(text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n\n        this.$resetRowCache(0);\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    };\n    this.getValue =\n    this.toString = function() {\n        return this.doc.getValue();\n    };\n    this.getSelection = function() {\n        return this.selection;\n    };\n    this.getState = function(row) {\n        return this.bgTokenizer.getState(row);\n    };\n    this.getTokens = function(row) {\n        return this.bgTokenizer.getTokens(row);\n    };\n    this.getTokenAt = function(row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        } else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    };\n    this.setUndoManager = function(undoManager) {\n        this.$undoManager = undoManager;\n        \n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n        \n        if (undoManager) {\n            var self = this;\n            undoManager.addSession(this);\n            this.$syncInformUndoManager = function() {\n                self.$informUndoManager.cancel();\n                self.mergeUndoDeltas = false;\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        } else {\n            this.$syncInformUndoManager = function() {};\n        }\n    };\n    this.markUndoGroup = function() {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    };\n    \n    this.$defaultUndoManager = {\n        undo: function() {},\n        redo: function() {},\n        hasUndo: function() {},\n        hasRedo: function() {},\n        reset: function() {},\n        add: function() {},\n        addSelection: function() {},\n        startNewGroup: function() {},\n        addSession: function() {}\n    };\n    this.getUndoManager = function() {\n        return this.$undoManager || this.$defaultUndoManager;\n    };\n    this.getTabString = function() {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        } else {\n            return \"\\t\";\n        }\n    };\n    this.setUseSoftTabs = function(val) {\n        this.setOption(\"useSoftTabs\", val);\n    };\n    this.getUseSoftTabs = function() {\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    };\n    this.setTabSize = function(tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    };\n    this.getTabSize = function() {\n        return this.$tabSize;\n    };\n    this.isTabStop = function(position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    };\n    this.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    };\n    this.getNavigateWithinSoftTabs = function() {\n        return this.$navigateWithinSoftTabs;\n    };\n\n    this.$overwrite = false;\n    this.setOverwrite = function(overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    };\n    this.getOverwrite = function() {\n        return this.$overwrite;\n    };\n    this.toggleOverwrite = function() {\n        this.setOverwrite(!this.$overwrite);\n    };\n    this.addGutterDecoration = function(row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.removeGutterDecoration = function(row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.getBreakpoints = function() {\n        return this.$breakpoints;\n    };\n    this.setBreakpoints = function(rows) {\n        this.$breakpoints = [];\n        for (var i=0; i<rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoints = function() {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.setBreakpoint = function(row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.clearBreakpoint = function(row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n    this.addMarker = function(range, clazz, type, inFront) {\n        var id = this.$markerId++;\n\n        var marker = {\n            range : range,\n            type : type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz : clazz,\n            inFront: !!inFront,\n            id: id\n        };\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return id;\n    };\n    this.addDynamicMarker = function(marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return marker;\n    };\n    this.removeMarker = function(markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        delete (markers[markerId]);\n        this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n    };\n    this.getMarkers = function(inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    };\n\n    this.highlight = function(re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    };\n    this.highlightLines = function(startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    };\n    this.setAnnotations = function(annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    };\n    this.getAnnotations = function() {\n        return this.$annotations || [];\n    };\n    this.clearAnnotations = function() {\n        this.setAnnotations([]);\n    };\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        } else {\n            this.$autoNewLine = \"\\n\";\n        }\n    };\n    this.getWordRange = function(row, column) {\n        var line = this.getLine(row);\n\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column-1, column+1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            }\n            while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n\n        return new Range(row, start, row, end);\n    };\n    this.getAWordRange = function(row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    };\n    this.setNewLineMode = function(newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    };\n    this.getNewLineMode = function() {\n        return this.doc.getNewLineMode();\n    };\n    this.setUseWorker = function(useWorker) { this.setOption(\"useWorker\", useWorker); };\n    this.getUseWorker = function() { return this.$useWorker; };\n    this.onReloadTokenizer = function(e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    };\n\n    this.$modes = config.$modes;\n    this.$mode = null;\n    this.$modeId = null;\n    this.setMode = function(mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        } else {\n            path = mode || \"ace/mode/text\";\n        }\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function(m) {\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            } else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    };\n\n    this.$onChangeMode = function(mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode) \n            return;\n            \n        var oldMode = this.$mode;\n        this.$mode = mode;\n\n        this.$stopWorker();\n\n        if (this.$useWorker)\n            this.$startWorker();\n\n        var tokenizer = mode.getTokenizer();\n\n        if(tokenizer.on !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.on(\"update\", onReloadTokenizer);\n        }\n\n        if (!this.bgTokenizer) {\n            this.bgTokenizer = new BackgroundTokenizer(tokenizer);\n            var _self = this;\n            this.bgTokenizer.on(\"update\", function(e) {\n                _self._signal(\"tokenizerUpdate\", e);\n            });\n        } else {\n            this.bgTokenizer.setTokenizer(tokenizer);\n        }\n\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        this.tokenRe = mode.tokenRe;\n        this.nonTokenRe = mode.nonTokenRe;\n\n        \n        if (!$isPlaceholder) {\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\", {oldMode: oldMode, mode: mode});\n        }\n    };\n\n    this.$stopWorker = function() {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    };\n\n    this.$startWorker = function() {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        } catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    };\n    this.getMode = function() {\n        return this.$mode;\n    };\n\n    this.$scrollTop = 0;\n    this.setScrollTop = function(scrollTop) {\n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    };\n    this.getScrollTop = function() {\n        return this.$scrollTop;\n    };\n\n    this.$scrollLeft = 0;\n    this.setScrollLeft = function(scrollLeft) {\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    };\n    this.getScrollLeft = function() {\n        return this.$scrollLeft;\n    };\n    this.getScreenWidth = function() {\n        this.$computeWidth();\n        if (this.lineWidgets) \n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    };\n    \n    this.getLineWidgetMaxWidth = function() {\n        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function(w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    };\n\n    this.$computeWidth = function(force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    };\n    this.getLine = function(row) {\n        return this.doc.getLine(row);\n    };\n    this.getLines = function(firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    };\n    this.getLength = function() {\n        return this.doc.getLength();\n    };\n    this.getTextRange = function(range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    };\n    this.insert = function(position, text) {\n        return this.doc.insert(position, text);\n    };\n    this.remove = function(range) {\n        return this.doc.remove(range);\n    };\n    this.removeFullLines = function(firstRow, lastRow){\n        return this.doc.removeFullLines(firstRow, lastRow);\n    };\n    this.undoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.revertDelta(delta);\n            } else if (delta.folds) {\n                this.addFolds(delta.folds);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionBefore)\n                this.selection.fromJSON(deltas.selectionBefore);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, true));\n        }\n        this.$fromUndo = false;\n    };\n    this.redoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.$safeApplyDelta(delta);\n            }\n        }\n\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionAfter)\n                this.selection.fromJSON(deltas.selectionAfter);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, false));\n        }\n        this.$fromUndo = false;\n    };\n    this.setUndoSelect = function(enable) {\n        this.$undoSelect = enable;\n    };\n\n    this.$getUndoSelection = function(deltas, isUndo) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n\n        var range, point;\n\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (!delta.start) continue; // skip folds\n            if (!range) {\n                if (isInsert(delta)) {\n                    range = Range.fromPoints(delta.start, delta.end);\n                } else {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                continue;\n            }\n            \n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n            } else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n            }\n        }\n        return range;\n    };\n    this.replace = function(range, text) {\n        return this.doc.replace(range, text);\n    };\n    this.moveText = function(fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function(x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n\n        return toRange;\n    };\n    this.indentRows = function(startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row=startRow; row<=endRow; row++)\n            this.doc.insertInLine({row: row, column: 0}, indentString);\n    };\n    this.outdentRows = function (range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            } else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    };\n\n    this.$moveLines = function(firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0) return 0;\n            var diff = row-firstRow;\n        } else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength()-1) return 0;\n            var diff = row-lastRow;\n        } else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function(x){\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n        \n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow+diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    };\n    this.moveLinesUp = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    };\n    this.moveLinesDown = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    };\n    this.duplicateLines = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    };\n\n\n    this.$clipRowToDocument = function(row) {\n        return Math.max(0, Math.min(row, this.doc.getLength()-1));\n    };\n\n    this.$clipColumnToRow = function(row, column) {\n        if (column < 0)\n            return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    };\n\n\n    this.$clipPositionToDocument = function(row, column) {\n        column = Math.max(0, column);\n\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        } else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len-1).length;\n            } else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n\n        return {\n            row: row,\n            column: column\n        };\n    };\n\n    this.$clipRangeToDocument = function(range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        } else {\n            range.start.column = this.$clipColumnToRow(\n                range.start.row,\n                range.start.column\n            );\n        }\n\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        } else {\n            range.end.column = this.$clipColumnToRow(\n                range.end.row,\n                range.end.column\n            );\n        }\n        return range;\n    };\n    this.$wrapLimit = 80;\n    this.$useWrapMode = false;\n    this.$wrapLimitRange = {\n        min : null,\n        max : null\n    };\n    this.setUseWrapMode = function(useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n\n            this._signal(\"changeWrapMode\");\n        }\n    };\n    this.getUseWrapMode = function() {\n        return this.$useWrapMode;\n    };\n    this.setWrapLimitRange = function(min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    };\n    this.adjustWrapLimit = function(desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = {min: $printMargin, max: $printMargin};\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    };\n\n    this.$constrainWrapLimit = function(wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n\n        return wrapLimit;\n    };\n    this.getWrapLimit = function() {\n        return this.$wrapLimit;\n    };\n    this.setWrapLimit = function (limit) {\n        this.setWrapLimitRange(limit, limit);\n    };\n    this.getWrapLimitRange = function() {\n        return {\n            min : this.$wrapLimitRange.min,\n            max : this.$wrapLimitRange.max\n        };\n    };\n\n    this.$updateInternalDataOnChange = function(delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n        \n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n\n                lastRow = firstRow;\n            } else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    } else\n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        } else {\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n\n        return removedFolds;\n    };\n\n    this.$updateRowLengthCache = function(firstRow, lastRow, b) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    };\n\n    this.$updateWrapData = function(firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row ++;\n            } else {\n                tokens = [];\n                foldLine.walk(function(placeholder, row, column, lastColumn) {\n                        var walkTokens;\n                        if (placeholder != null) {\n                            walkTokens = this.$getDisplayTokens(\n                                            placeholder, tokens.length);\n                            walkTokens[0] = PLACEHOLDER_START;\n                            for (var i = 1; i < walkTokens.length; i++) {\n                                walkTokens[i] = PLACEHOLDER_BODY;\n                            }\n                        } else {\n                            walkTokens = this.$getDisplayTokens(\n                                lines[row].substring(lastColumn, column),\n                                tokens.length);\n                        }\n                        tokens = tokens.concat(walkTokens);\n                    }.bind(this),\n                    foldLine.end.row,\n                    lines[foldLine.end.row].length + 1\n                );\n\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    };\n    var CHAR = 1,\n        CHAR_EXT = 2,\n        PLACEHOLDER_START = 3,\n        PLACEHOLDER_BODY =  4,\n        PUNCTUATION = 9,\n        SPACE = 10,\n        TAB = 11,\n        TAB_SPACE = 12;\n\n\n    this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n\n        var isCode = this.$wrapAsCode;\n\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            var len = screenPos - lastSplit;\n            for (var i = lastSplit; i < screenPos; i++) {\n                var ch = tokens[i];\n                if (ch === 12 || ch === 2) len -= 1;\n            }\n\n            if (!splits.length) {\n                indent = getWrapIndent();\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            var split = lastSplit + wrapLimit - indent;\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                addSplit(split);\n                continue;\n            }\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        break;\n                    }\n                }\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n                if (split == tokens.length) {\n                    break;  // Breaks the while-loop.\n                }\n                addSplit(split);\n                continue;\n            }\n            var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split --;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split --;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split --;\n                }\n            } else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split --;\n                }\n            }\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n            split = lastSplit + wrapLimit;\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    };\n    this.$getDisplayTokens = function(str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            else if (c == 32) {\n                arr.push(SPACE);\n            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            } else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    };\n    this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            } else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n\n        return [screenColumn, column];\n    };\n\n    this.lineWidgets = null;\n    this.getRowLength = function(row) {\n        var h = 1;\n        if (this.lineWidgets)\n            h += this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        \n        if (!this.$useWrapMode || !this.$wrapData[row])\n            return h;\n        else\n            return this.$wrapData[row].length + h;\n    };\n    this.getRowLineCount = function(row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        } else {\n            return this.$wrapData[row].length + 1;\n        }\n    };\n\n    this.getRowWrapIndent = function(screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        } else {\n            return 0;\n        }\n    };\n    this.getScreenLastRowColumn = function(screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    };\n    this.getDocumentLastRowColumn = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    };\n    this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    };\n    this.getRowSplitData = function(row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        } else {\n            return this.$wrapData[row];\n        }\n    };\n    this.getScreenTabSize = function(screenColumn) {\n        return this.$tabSize - (screenColumn % this.$tabSize | 0);\n    };\n\n\n    this.screenToDocumentRow = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    };\n\n\n    this.screenToDocumentColumn = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    };\n    this.screenToDocumentPosition = function(screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return {row: 0, column: 0};\n\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            } else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row+1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        } else if (row + rowLength <= screenRow || docRow > maxRow) {\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        } else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if(splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n\n        return {row: docRow, column: docColumn};\n    };\n    this.documentToScreenPosition = function(docRow, docColumn) {\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);\n        else\n            pos = this.$clipPositionToDocument(docRow, docColumn);\n\n        docRow = pos.row;\n        docColumn = pos.column;\n\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n\n        var rowEnd, row = 0;\n\n\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ?foldLine.start.row :Infinity;\n\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ?foldLine.start.row :Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n        var textLine = \"\";\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        } else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow ++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(\n                    wrapRow[screenRowOffset - 1] || 0, textLine.length\n                );\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n        \n        if (this.lineWidgets && this.lineWidgets[row] && this.lineWidgets[row].rowsAbove)\n            screenRow += this.lineWidgets[row].rowsAbove;\n\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    };\n    this.documentToScreenColumn = function(row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    };\n    this.documentToScreenRow = function(docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    };\n    this.getScreenLength = function() {\n        var screenRows = 0;\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        } else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row :Infinity;\n\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row ++;\n                if (row > foldStart) {\n                    row = fold.end.row+1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ?fold.start.row :Infinity;\n                }\n            }\n        }\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n\n        return screenRows;\n    };\n    this.$setFontMetrics = function(fm) {\n        if (!this.$enableVarChar) return;\n        this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n            \n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                } else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n            \n            return [screenColumn, column];\n        };\n    };\n    \n    this.destroy = function() {\n        if (this.bgTokenizer) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer = null;\n        }\n        this.$stopWorker();\n        this.removeAllListeners();\n        this.selection.detach();\n    };\n\n    this.isFullWidth = isFullWidth;\n    function isFullWidth(c) {\n        if (c < 0x1100)\n            return false;\n        return c >= 0x1100 && c <= 0x115F ||\n               c >= 0x11A3 && c <= 0x11A7 ||\n               c >= 0x11FA && c <= 0x11FF ||\n               c >= 0x2329 && c <= 0x232A ||\n               c >= 0x2E80 && c <= 0x2E99 ||\n               c >= 0x2E9B && c <= 0x2EF3 ||\n               c >= 0x2F00 && c <= 0x2FD5 ||\n               c >= 0x2FF0 && c <= 0x2FFB ||\n               c >= 0x3000 && c <= 0x303E ||\n               c >= 0x3041 && c <= 0x3096 ||\n               c >= 0x3099 && c <= 0x30FF ||\n               c >= 0x3105 && c <= 0x312D ||\n               c >= 0x3131 && c <= 0x318E ||\n               c >= 0x3190 && c <= 0x31BA ||\n               c >= 0x31C0 && c <= 0x31E3 ||\n               c >= 0x31F0 && c <= 0x321E ||\n               c >= 0x3220 && c <= 0x3247 ||\n               c >= 0x3250 && c <= 0x32FE ||\n               c >= 0x3300 && c <= 0x4DBF ||\n               c >= 0x4E00 && c <= 0xA48C ||\n               c >= 0xA490 && c <= 0xA4C6 ||\n               c >= 0xA960 && c <= 0xA97C ||\n               c >= 0xAC00 && c <= 0xD7A3 ||\n               c >= 0xD7B0 && c <= 0xD7C6 ||\n               c >= 0xD7CB && c <= 0xD7FB ||\n               c >= 0xF900 && c <= 0xFAFF ||\n               c >= 0xFE10 && c <= 0xFE19 ||\n               c >= 0xFE30 && c <= 0xFE52 ||\n               c >= 0xFE54 && c <= 0xFE66 ||\n               c >= 0xFE68 && c <= 0xFE6B ||\n               c >= 0xFF01 && c <= 0xFF60 ||\n               c >= 0xFFE0 && c <= 0xFFE6;\n    }\n\n}).call(EditSession.prototype);\n\nrequire(\"./edit_session/folding\").Folding.call(EditSession.prototype);\nrequire(\"./edit_session/bracket_match\").BracketMatch.call(EditSession.prototype);\n\n\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        set: function(value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            } else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function() {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },    \n    wrapMethod: {\n        set: function(val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$useWrapMode = false;\n                    this.setUseWrapMode(true);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: {\n        set: function() {\n            if (this.$useWrapMode) {\n                this.$useWrapMode = false;\n                this.setUseWrapMode(true);\n            }\n        },\n        initialValue: true \n    },\n    firstLineNumber: {\n        set: function() {this._signal(\"changeBreakpoint\");},\n        initialValue: 1\n    },\n    useWorker: {\n        set: function(useWorker) {\n            this.$useWorker = useWorker;\n\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: {initialValue: true},\n    tabSize: {\n        set: function(tabSize) {\n            tabSize = parseInt(tabSize);\n            if (tabSize > 0 && this.$tabSize !== tabSize) {\n                this.$modified = true;\n                this.$rowLengthCache = [];\n                this.$tabSize = tabSize;\n                this._signal(\"changeTabSize\");\n            }\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: {initialValue: false},\n    foldStyle: {\n        set: function(val) {this.setFoldStyle(val);},\n        handlesSet: true\n    },\n    overwrite: {\n        set: function(val) {this._signal(\"changeOverwrite\");},\n        initialValue: false\n    },\n    newLineMode: {\n        set: function(val) {this.doc.setNewLineMode(val);},\n        get: function() {return this.doc.getNewLineMode();},\n        handlesSet: true\n    },\n    mode: {\n        set: function(val) { this.setMode(val); },\n        get: function() { return this.$modeId; },\n        handlesSet: true\n    }\n});\n\nexports.EditSession = EditSession;\n});\n\nace.define(\"ace/search\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/lib/oop\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\n\nvar Search = function() {\n    this.$options = {};\n};\n\n(function() {\n    this.set = function(options) {\n        oop.mixin(this.$options, options);\n        return this;\n    };\n    this.getOptions = function() {\n        return lang.copyObject(this.$options);\n    };\n    this.setOptions = function(options) {\n        this.$options = options;\n    };\n    this.find = function(session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n\n        var firstRange = null;\n        iterator.forEach(function(sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && options.start.start\n                && options.skipCurrent != false && firstRange.isEqual(options.start)\n            ) {\n                firstRange = null;\n                return false;\n            }\n            \n            return true;\n        });\n\n        return firstRange;\n    };\n    this.findAll = function(session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n                \n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n                \n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex\n                ) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(\n                    row, startIndex, row + len - 1, endIndex\n                ));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        } else {\n            for (var i = 0; i < lines.length; i++) {\n                var matches = lang.getMatchOffsets(lines[i], re);\n                for (var j = 0; j < matches.length; j++) {\n                    var match = matches[j];\n                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                }\n            }\n        }\n\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.start.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == range.start.row)\n                i++;\n\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == range.end.row)\n                j--;\n            \n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n\n        return ranges;\n    };\n    this.replace = function(input, replacement) {\n        var options = this.$options;\n\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n\n        if (!re)\n            return;\n\n        var match = re.exec(input);\n        if (!match || match[0].length != input.length)\n            return null;\n        \n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--; ) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n        \n        return replacement;\n    };\n\n    this.$assembleRegExp = function(options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n\n        var needle = options.needle;\n\n        if (!options.needle)\n            return options.re = false;\n\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n\n        try {\n            var re = new RegExp(needle, modifier);\n        } catch(e) {\n            re = false;\n        }\n        return options.re = re;\n    };\n\n    this.$assembleMultilineRegExp = function(needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++) try {\n            re.push(new RegExp(parts[i], modifier));\n        } catch(e) {\n            return false;\n        }\n        return re;\n    };\n\n    this.$matchIterator = function(session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n         \n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n        \n        if (backwards) {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n        \n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function(row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0) return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1) return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset) return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function(row, endIndex, callback) {\n                var line = session.getLine(row);\n                var matches = [];\n                var m, last = 0;\n                re.lastIndex = 0;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (!length) {\n                        if (last >= line.length) break;\n                        re.lastIndex = last += 1;\n                    }\n                    if (m.index + length > endIndex)\n                        break;\n                    matches.push(m.index, length);\n                }\n                for (var i = matches.length - 1; i >= 0; i -= 2) {\n                    var column = matches[i - 1];\n                    var length = matches[i];\n                    if (callback(row, column, row, column + length))\n                        return true;\n                }\n            };\n        }\n        else {\n            var forEachInLine = function(row, startIndex, callback) {\n                var line = session.getLine(row);\n                var last;\n                var m;\n                re.lastIndex = startIndex;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (callback(row, last, row,last + length))\n                        return true;\n                    if (!length) {\n                        re.lastIndex = last += 1;\n                        if (last >= line.length) return false;\n                    }\n                }\n            };\n        }\n        return {forEach: forEach};\n    };\n\n}).call(Search.prototype);\n\nfunction addWordBoundary(needle, options) {\n    function wordBoundary(c) {\n        if (/\\w/.test(c) || options.regExp) return \"\\\\b\";\n        return \"\";\n    }\n    return wordBoundary(needle[0]) + needle\n        + wordBoundary(needle[needle.length - 1]);\n}\n\nexports.Search = Search;\n});\n\nace.define(\"ace/keyboard/hash_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/keys\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar keyUtil = require(\"../lib/keys\");\nvar useragent = require(\"../lib/useragent\");\nvar KEY_MODS = keyUtil.KEY_MODS;\n\nfunction HashHandler(config, platform) {\n    this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n    this.commands = {};\n    this.commandKeyBinding = {};\n    this.addCommands(config);\n    this.$singleCommand = true;\n}\n\nfunction MultiHashHandler(config, platform) {\n    HashHandler.call(this, config, platform);\n    this.$singleCommand = false;\n}\n\nMultiHashHandler.prototype = HashHandler.prototype;\n\n(function() {\n    \n\n    this.addCommand = function(command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n\n        this.commands[command.name] = command;\n\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    };\n\n    this.removeCommand = function(command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            } else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    };\n\n    this.bindKey = function(key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({exec: command, bindKey: key, name: command.name || key});\n        \n        key.split(\"|\").forEach(function(keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function(keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    };\n    \n    function getPosition(command) {\n        return typeof command == \"object\" && command.bindKey\n            && command.bindKey.position \n            || (command.isDefault ? -100 : 0);\n    }\n    this._addCommandToBinding = function(keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        } else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        } else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            } else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n            \n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    };\n\n    this.addCommands = function(commands) {\n        commands && Object.keys(commands).forEach(function(name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            \n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n\n            if (typeof command === \"function\")\n                command = { exec: command };\n\n            if (typeof command !== \"object\")\n                return;\n\n            if (!command.name)\n                command.name = name;\n\n            this.addCommand(command);\n        }, this);\n    };\n\n    this.removeCommands = function(commands) {\n        Object.keys(commands).forEach(function(name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    };\n\n    this.bindKeys = function(keyList) {\n        Object.keys(keyList).forEach(function(key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    };\n\n    this._buildKeyHash = function(command) {\n        this.bindKey(command.bindKey, command);\n    };\n    this.parseKeys = function(keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(x){return x;});\n        var key = parts.pop();\n\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return {key: key, hashId: -1};\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return {key: key.toUpperCase(), hashId: -1};\n\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return {key: key, hashId: hashId};\n    };\n\n    this.findKeyCommand = function findKeyCommand(hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    };\n\n    this.handleKeyboard = function(data, hashId, keyString, keyCode) {\n        if (keyCode < 0) return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        \n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return {command: \"null\"};\n            }\n        }\n        \n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return {command: command};\n    };\n    \n    this.getStatusText = function(editor, data) {\n        return data.$keyChain || \"\";\n    };\n\n}).call(HashHandler.prototype);\n\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n});\n\nace.define(\"ace/commands/command_manager\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/keyboard/hash_handler\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar MultiHashHandler = require(\"../keyboard/hash_handler\").MultiHashHandler;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar CommandManager = function(platform, commands) {\n    MultiHashHandler.call(this, commands, platform);\n    this.byName = this.commands;\n    this.setDefaultHandler(\"exec\", function(e) {\n        return e.command.exec(e.editor, e.args || {});\n    });\n};\n\noop.inherits(CommandManager, MultiHashHandler);\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.exec = function(command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--; ) {\n                if (this.exec(command[i], editor, args)) return true;\n            }\n            return false;\n        }\n\n        if (typeof command === \"string\")\n            command = this.commands[command];\n\n        if (!command)\n            return false;\n\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n\n        if (this.$checkCommandState != false && command.isAvailable && !command.isAvailable(editor))\n            return false;\n\n        var e = {editor: editor, command: command, args: args};\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n\n        return e.returnValue === false ? false : true;\n    };\n\n    this.toggleRecording = function(editor) {\n        if (this.$inReplay)\n            return;\n\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.off(\"exec\", this.$addCommandToMacro);\n\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function(e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    };\n\n    this.replay = function(editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n\n        if (this.recording)\n            return this.toggleRecording(editor);\n\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function(x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        } finally {\n            this.$inReplay = false;\n        }\n    };\n\n    this.trimMacro = function(m) {\n        return m.map(function(x){\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    };\n\n}).call(CommandManager.prototype);\n\nexports.CommandManager = CommandManager;\n\n});\n\nace.define(\"ace/commands/default_commands\",[\"require\",\"exports\",\"module\",\"ace/lib/lang\",\"ace/config\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar lang = require(\"../lib/lang\");\nvar config = require(\"../config\");\nvar Range = require(\"../range\").Range;\n\nfunction bindKey(win, mac) {\n    return {win: win, mac: mac};\n}\nexports.commands = [{\n    name: \"showSettingsMenu\",\n    bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/settings_menu\", function(module) {\n            module.init(editor);\n            editor.showSettingsMenu();\n        });\n    },\n    readOnly: true\n}, {\n    name: \"goToNextError\",\n    bindKey: bindKey(\"Alt-E\", \"F4\"),\n    exec: function(editor) {\n        config.loadModule(\"./ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, 1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"goToPreviousError\",\n    bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n    exec: function(editor) {\n        config.loadModule(\"./ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, -1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selectall\",\n    description: \"Select all\",\n    bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n    exec: function(editor) { editor.selectAll(); },\n    readOnly: true\n}, {\n    name: \"centerselection\",\n    description: \"Center selection\",\n    bindKey: bindKey(null, \"Ctrl-L\"),\n    exec: function(editor) { editor.centerSelection(); },\n    readOnly: true\n}, {\n    name: \"gotoline\",\n    description: \"Go to line...\",\n    bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n    exec: function(editor, line) {\n        if (typeof line === \"number\" && !isNaN(line))\n            editor.gotoLine(line);\n        editor.prompt({ $type: \"gotoLine\" });\n    },\n    readOnly: true\n}, {\n    name: \"fold\",\n    bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n    exec: function(editor) { editor.session.toggleFold(false); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfold\",\n    bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n    exec: function(editor) { editor.session.toggleFold(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleFoldWidget\",\n    bindKey: bindKey(\"F2\", \"F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleParentFoldWidget\",\n    bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldall\",\n    description: \"Fold all\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAll(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldAllComments\",\n    description: \"Fold all comments\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAllComments(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldOther\",\n    description: \"Fold other\",\n    bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n    exec: function(editor) { \n        editor.session.foldAll();\n        editor.session.unfold(editor.selection.getAllRanges());\n    },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfoldall\",\n    description: \"Unfold all\",\n    bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n    exec: function(editor) { editor.session.unfold(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findnext\",\n    description: \"Find next\",\n    bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n    exec: function(editor) { editor.findNext(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findprevious\",\n    description: \"Find previous\",\n    bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n    exec: function(editor) { editor.findPrevious(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"selectOrFindNext\",\n    description: \"Select or find next\",\n    bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n    exec: function(editor) {\n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findNext(); \n    },\n    readOnly: true\n}, {\n    name: \"selectOrFindPrevious\",\n    description: \"Select or find previous\",\n    bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n    exec: function(editor) { \n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findPrevious();\n    },\n    readOnly: true\n}, {\n    name: \"find\",\n    description: \"Find\",\n    bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor);});\n    },\n    readOnly: true\n}, {\n    name: \"overwrite\",\n    description: \"Overwrite\",\n    bindKey: \"Insert\",\n    exec: function(editor) { editor.toggleOverwrite(); },\n    readOnly: true\n}, {\n    name: \"selecttostart\",\n    description: \"Select to start\",\n    bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n    exec: function(editor) { editor.getSelection().selectFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotostart\",\n    description: \"Go to start\",\n    bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n    exec: function(editor) { editor.navigateFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectup\",\n    description: \"Select up\",\n    bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n    exec: function(editor) { editor.getSelection().selectUp(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golineup\",\n    description: \"Go line up\",\n    bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n    exec: function(editor, args) { editor.navigateUp(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttoend\",\n    description: \"Select to end\",\n    bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n    exec: function(editor) { editor.getSelection().selectFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotoend\",\n    description: \"Go to end\",\n    bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n    exec: function(editor) { editor.navigateFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectdown\",\n    description: \"Select down\",\n    bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n    exec: function(editor) { editor.getSelection().selectDown(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golinedown\",\n    description: \"Go line down\",\n    bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n    exec: function(editor, args) { editor.navigateDown(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordleft\",\n    description: \"Select word left\",\n    bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n    exec: function(editor) { editor.getSelection().selectWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordleft\",\n    description: \"Go to word left\",\n    bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n    exec: function(editor) { editor.navigateWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolinestart\",\n    description: \"Select to line start\",\n    bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolinestart\",\n    description: \"Go to line start\",\n    bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n    exec: function(editor) { editor.navigateLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectleft\",\n    description: \"Select left\",\n    bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n    exec: function(editor) { editor.getSelection().selectLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoleft\",\n    description: \"Go to left\",\n    bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n    exec: function(editor, args) { editor.navigateLeft(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordright\",\n    description: \"Select word right\",\n    bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordright\",\n    description: \"Go to word right\",\n    bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n    exec: function(editor) { editor.navigateWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolineend\",\n    description: \"Select to line end\",\n    bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolineend\",\n    description: \"Go to line end\",\n    bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n    exec: function(editor) { editor.navigateLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectright\",\n    description: \"Select right\",\n    bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoright\",\n    description: \"Go to right\",\n    bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n    exec: function(editor, args) { editor.navigateRight(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectpagedown\",\n    description: \"Select page down\",\n    bindKey: \"Shift-PageDown\",\n    exec: function(editor) { editor.selectPageDown(); },\n    readOnly: true\n}, {\n    name: \"pagedown\",\n    description: \"Page down\",\n    bindKey: bindKey(null, \"Option-PageDown\"),\n    exec: function(editor) { editor.scrollPageDown(); },\n    readOnly: true\n}, {\n    name: \"gotopagedown\",\n    description: \"Go to page down\",\n    bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n    exec: function(editor) { editor.gotoPageDown(); },\n    readOnly: true\n}, {\n    name: \"selectpageup\",\n    description: \"Select page up\",\n    bindKey: \"Shift-PageUp\",\n    exec: function(editor) { editor.selectPageUp(); },\n    readOnly: true\n}, {\n    name: \"pageup\",\n    description: \"Page up\",\n    bindKey: bindKey(null, \"Option-PageUp\"),\n    exec: function(editor) { editor.scrollPageUp(); },\n    readOnly: true\n}, {\n    name: \"gotopageup\",\n    description: \"Go to page up\",\n    bindKey: \"PageUp\",\n    exec: function(editor) { editor.gotoPageUp(); },\n    readOnly: true\n}, {\n    name: \"scrollup\",\n    description: \"Scroll up\",\n    bindKey: bindKey(\"Ctrl-Up\", null),\n    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"scrolldown\",\n    description: \"Scroll down\",\n    bindKey: bindKey(\"Ctrl-Down\", null),\n    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"selectlinestart\",\n    description: \"Select line start\",\n    bindKey: \"Shift-Home\",\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectlineend\",\n    description: \"Select line end\",\n    bindKey: \"Shift-End\",\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"togglerecording\",\n    description: \"Toggle recording\",\n    bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n    exec: function(editor) { editor.commands.toggleRecording(editor); },\n    readOnly: true\n}, {\n    name: \"replaymacro\",\n    description: \"Replay macro\",\n    bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n    exec: function(editor) { editor.commands.replay(editor); },\n    readOnly: true\n}, {\n    name: \"jumptomatching\",\n    description: \"Jump to matching\",\n    bindKey: bindKey(\"Ctrl-\\\\|Ctrl-P\", \"Command-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selecttomatching\",\n    description: \"Select to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\", \"Command-Shift-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"expandToMatching\",\n    description: \"Expand to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n    exec: function(editor) { editor.jumpToMatching(true, true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"passKeysToBrowser\",\n    description: \"Pass keys to browser\",\n    bindKey: bindKey(null, null),\n    exec: function() {},\n    passEvent: true,\n    readOnly: true\n}, {\n    name: \"copy\",\n    description: \"Copy\",\n    exec: function(editor) {\n    },\n    readOnly: true\n},\n{\n    name: \"cut\",\n    description: \"Cut\",\n    exec: function(editor) {\n        var cutLine = editor.$copyWithEmptySelection && editor.selection.isEmpty();\n        var range = cutLine ? editor.selection.getLineRange() : editor.selection.getRange();\n        editor._emit(\"cut\", range);\n\n        if (!range.isEmpty())\n            editor.session.remove(range);\n        editor.clearSelection();\n    },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"paste\",\n    description: \"Paste\",\n    exec: function(editor, args) {\n        editor.$handlePaste(args);\n    },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removeline\",\n    description: \"Remove line\",\n    bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n    exec: function(editor) { editor.removeLines(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"duplicateSelection\",\n    description: \"Duplicate selection\",\n    bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n    exec: function(editor) { editor.duplicateSelection(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"sortlines\",\n    description: \"Sort lines\",\n    bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n    exec: function(editor) { editor.sortLines(); },\n    scrollIntoView: \"selection\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"togglecomment\",\n    description: \"Toggle comment\",\n    bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n    exec: function(editor) { editor.toggleCommentLines(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"toggleBlockComment\",\n    description: \"Toggle block comment\",\n    bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n    exec: function(editor) { editor.toggleBlockComment(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"modifyNumberUp\",\n    description: \"Modify number up\",\n    bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n    exec: function(editor) { editor.modifyNumber(1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"modifyNumberDown\",\n    description: \"Modify number down\",\n    bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n    exec: function(editor) { editor.modifyNumber(-1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"replace\",\n    description: \"Replace\",\n    bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor, true);});\n    }\n}, {\n    name: \"undo\",\n    description: \"Undo\",\n    bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n    exec: function(editor) { editor.undo(); }\n}, {\n    name: \"redo\",\n    description: \"Redo\",\n    bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n    exec: function(editor) { editor.redo(); }\n}, {\n    name: \"copylinesup\",\n    description: \"Copy lines up\",\n    bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n    exec: function(editor) { editor.copyLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesup\",\n    description: \"Move lines up\",\n    bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n    exec: function(editor) { editor.moveLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"copylinesdown\",\n    description: \"Copy lines down\",\n    bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n    exec: function(editor) { editor.copyLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesdown\",\n    description: \"Move lines down\",\n    bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n    exec: function(editor) { editor.moveLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"del\",\n    description: \"Delete\",\n    bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n    exec: function(editor) { editor.remove(\"right\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"backspace\",\n    description: \"Backspace\",\n    bindKey: bindKey(\n        \"Shift-Backspace|Backspace\",\n        \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"\n    ),\n    exec: function(editor) { editor.remove(\"left\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"cut_or_delete\",\n    description: \"Cut or delete\",\n    bindKey: bindKey(\"Shift-Delete\", null),\n    exec: function(editor) { \n        if (editor.selection.isEmpty()) {\n            editor.remove(\"left\");\n        } else {\n            return false;\n        }\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestart\",\n    description: \"Remove to line start\",\n    bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n    exec: function(editor) { editor.removeToLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineend\",\n    description: \"Remove to line end\",\n    bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n    exec: function(editor) { editor.removeToLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestarthard\",\n    description: \"Remove to line start hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.start.column = 0;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineendhard\",\n    description: \"Remove to line end hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.end.column = Number.MAX_VALUE;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordleft\",\n    description: \"Remove word left\",\n    bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n    exec: function(editor) { editor.removeWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordright\",\n    description: \"Remove word right\",\n    bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n    exec: function(editor) { editor.removeWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"outdent\",\n    description: \"Outdent\",\n    bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"indent\",\n    description: \"Indent\",\n    bindKey: bindKey(\"Tab\", \"Tab\"),\n    exec: function(editor) { editor.indent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockoutdent\",\n    description: \"Block outdent\",\n    bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockindent\",\n    description: \"Block indent\",\n    bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n    exec: function(editor) { editor.blockIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"insertstring\",\n    description: \"Insert string\",\n    exec: function(editor, str) { editor.insert(str); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"inserttext\",\n    description: \"Insert text\",\n    exec: function(editor, args) {\n        editor.insert(lang.stringRepeat(args.text  || \"\", args.times || 1));\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"splitline\",\n    description: \"Split line\",\n    bindKey: bindKey(null, \"Ctrl-O\"),\n    exec: function(editor) { editor.splitLine(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"transposeletters\",\n    description: \"Transpose letters\",\n    bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n    exec: function(editor) { editor.transposeLetters(); },\n    multiSelectAction: function(editor) {editor.transposeSelections(1); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"touppercase\",\n    description: \"To uppercase\",\n    bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n    exec: function(editor) { editor.toUpperCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"tolowercase\",\n    description: \"To lowercase\",\n    bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n    exec: function(editor) { editor.toLowerCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"autoindent\",\n    description: \"Auto Indent\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) { editor.autoIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"animate\"\n}, {\n    name: \"expandtoline\",\n    description: \"Expand to line\",\n    bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n\n        range.start.column = range.end.column = 0;\n        range.end.row++;\n        editor.selection.setRange(range, false);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"joinlines\",\n    description: \"Join lines\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var isBackwards = editor.selection.isBackwards();\n        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n        var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n        var insertLine = editor.session.doc.getLine(selectionStart.row);\n\n        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n            if (curLine.length !== 0) {\n                curLine = \" \" + curLine;\n            }\n            insertLine += curLine;\n        }\n\n        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n            insertLine += editor.session.doc.getNewLineCharacter();\n        }\n\n        editor.clearSelection();\n        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n\n        if (selectedCount > 0) {\n            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n        } else {\n            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n        }\n    },\n    multiSelectAction: \"forEach\",\n    readOnly: true\n}, {\n    name: \"invertSelection\",\n    description: \"Invert selection\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var endRow = editor.session.doc.getLength() - 1;\n        var endCol = editor.session.doc.getLine(endRow).length;\n        var ranges = editor.selection.rangeList.ranges;\n        var newRanges = [];\n        if (ranges.length < 1) {\n            ranges = [editor.selection.getRange()];\n        }\n\n        for (var i = 0; i < ranges.length; i++) {\n            if (i == (ranges.length - 1)) {\n                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                }\n            }\n\n            if (i === 0) {\n                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                }\n            } else {\n                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));\n            }\n        }\n\n        editor.exitMultiSelectMode();\n        editor.clearSelection();\n\n        for(var i = 0; i < newRanges.length; i++) {\n            editor.selection.addRange(newRanges[i], false);\n        }\n    },\n    readOnly: true,\n    scrollIntoView: \"none\"\n}, {\n    name: \"addLineAfter\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        editor.navigateLineEnd();\n        editor.insert(\"\\n\");\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"addLineBefore\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        var cursor = editor.getCursorPosition();\n        editor.selection.moveTo(cursor.row - 1, Number.MAX_VALUE);\n        editor.insert(\"\\n\");\n        if (cursor.row === 0) editor.navigateUp();\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"openCommandPallete\",\n    description: \"Open command pallete\",\n    bindKey: bindKey(\"F1\", \"F1\"),\n    exec: function(editor) {\n        editor.prompt({ $type: \"commands\" });\n    },\n    readOnly: true\n}, {\n    name: \"modeSelect\",\n    description: \"Change language mode...\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        editor.prompt({ $type: \"modes\" });\n    },\n    readOnly: true\n}];\n\nfor (var i = 1; i < 9; i++) {\n    exports.commands.push({\n        name: \"foldToLevel\" + i,\n        description: \"Fold To Level \" + i,\n        level: i,\n        exec: function(editor) { editor.session.foldToLevel(this.level); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    });\n}\n\n});\n\nace.define(\"ace/editor\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/useragent\",\"ace/keyboard/textinput\",\"ace/mouse/mouse_handler\",\"ace/mouse/fold_handler\",\"ace/keyboard/keybinding\",\"ace/edit_session\",\"ace/search\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/commands/command_manager\",\"ace/commands/default_commands\",\"ace/config\",\"ace/token_iterator\",\"ace/clipboard\"], function(require, exports, module) {\n\"use strict\";\n\nrequire(\"./lib/fixoldbrowsers\");\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar lang = require(\"./lib/lang\");\nvar useragent = require(\"./lib/useragent\");\nvar TextInput = require(\"./keyboard/textinput\").TextInput;\nvar MouseHandler = require(\"./mouse/mouse_handler\").MouseHandler;\nvar FoldHandler = require(\"./mouse/fold_handler\").FoldHandler;\nvar KeyBinding = require(\"./keyboard/keybinding\").KeyBinding;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar Search = require(\"./search\").Search;\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar CommandManager = require(\"./commands/command_manager\").CommandManager;\nvar defaultCommands = require(\"./commands/default_commands\").commands;\nvar config = require(\"./config\");\nvar TokenIterator = require(\"./token_iterator\").TokenIterator;\n\nvar clipboard = require(\"./clipboard\");\nvar Editor = function(renderer, session, options) {\n    this.$toDestroy = [];\n    var container = renderer.getContainerElement();\n    this.container = container;\n    this.renderer = renderer;\n    this.id = \"editor\" + (++Editor.$uid);\n\n    this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n    if (typeof document == \"object\") {\n        this.textInput = new TextInput(renderer.getTextAreaContainer(), this);\n        this.renderer.textarea = this.textInput.getElement();\n        this.$mouseHandler = new MouseHandler(this);\n        new FoldHandler(this);\n    }\n\n    this.keyBinding = new KeyBinding(this);\n\n    this.$search = new Search().set({\n        wrap: true\n    });\n\n    this.$historyTracker = this.$historyTracker.bind(this);\n    this.commands.on(\"exec\", this.$historyTracker);\n\n    this.$initOperationListeners();\n    \n    this._$emitInputEvent = lang.delayedCall(function() {\n        this._signal(\"input\", {});\n        if (this.session && this.session.bgTokenizer)\n            this.session.bgTokenizer.scheduleStart();\n    }.bind(this));\n    \n    this.on(\"change\", function(_, _self) {\n        _self._$emitInputEvent.schedule(31);\n    });\n\n    this.setSession(session || options && options.session || new EditSession(\"\"));\n    config.resetOptions(this);\n    if (options)\n        this.setOptions(options);\n    config._signal(\"editor\", this);\n};\n\nEditor.$uid = 0;\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$initOperationListeners = function() {\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n\n        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this, true));\n        this.on(\"change\", function() {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.docChanged = true;\n        }.bind(this), true);\n        \n        this.on(\"changeSelection\", function() {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.selectionChanged = true;\n        }.bind(this), true);\n    };\n\n    this.curOp = null;\n    this.prevOp = {};\n    this.startOperation = function(commandEvent) {\n        if (this.curOp) {\n            if (!commandEvent || this.curOp.command)\n                return;\n            this.prevOp = this.curOp;\n        }\n        if (!commandEvent) {\n            this.previousCommand = null;\n            commandEvent = {};\n        }\n\n        this.$opResetTimer.schedule();\n        this.curOp = this.session.curOp = {\n            command: commandEvent.command || {},\n            args: commandEvent.args,\n            scrollTop: this.renderer.scrollTop\n        };\n        this.curOp.selectionBefore = this.selection.toJSON();\n    };\n\n    this.endOperation = function(e) {\n        if (this.curOp && this.session) {\n            if (e && e.returnValue === false || !this.session)\n                return (this.curOp = null);\n            if (e == true && this.curOp.command && this.curOp.command.name == \"mouse\")\n                return;\n            this._signal(\"beforeEndOperation\");\n            if (!this.curOp) return;\n            var command = this.curOp.command;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n            var sel = this.selection.toJSON();\n            this.curOp.selectionAfter = sel;\n            this.$lastSel = this.selection.toJSON();\n            this.session.getUndoManager().addSelection(sel);\n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    };\n    this.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\n    this.$historyTracker = function(e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n\n            this.mergeNextCommand = true;\n        } else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n\n        if (\n            this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000\n        ) {\n            shouldMerge = false; // the sequence is too long\n        }\n\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    };\n    this.setKeyboardHandler = function(keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\" && keyboardHandler != \"ace\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function(module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        } else {\n            this.$keybindingId = null;\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    };\n    this.getKeyboardHandler = function() {\n        return this.keyBinding.getKeyboardHandler();\n    };\n    this.setSession = function(session) {\n        if (this.session == session)\n            return;\n        if (this.curOp) this.endOperation();\n        this.curOp = {};\n\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n    \n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n    \n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n    \n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n    \n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n    \n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n    \n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n    \n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n    \n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n    \n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n    \n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n    \n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n    \n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n    \n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n    \n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n    \n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n    \n            this.onChangeMode();\n    \n            this.onCursorChange();\n    \n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        } else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n        \n        this.curOp = null;\n        \n        oldSession && oldSession._signal(\"changeEditor\", {oldEditor: this});\n        session && session._signal(\"changeEditor\", {editor: this});\n        \n        if (session && session.bgTokenizer)\n            session.bgTokenizer.scheduleStart();\n    };\n    this.getSession = function() {\n        return this.session;\n    };\n    this.setValue = function(val, cursorPos) {\n        this.session.doc.setValue(val);\n\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n\n        return val;\n    };\n    this.getValue = function() {\n        return this.session.getValue();\n    };\n    this.getSelection = function() {\n        return this.selection;\n    };\n    this.resize = function(force) {\n        this.renderer.onResize(force);\n    };\n    this.setTheme = function(theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    };\n    this.getTheme = function() {\n        return this.renderer.getTheme();\n    };\n    this.setStyle = function(style) {\n        this.renderer.setStyle(style);\n    };\n    this.unsetStyle = function(style) {\n        this.renderer.unsetStyle(style);\n    };\n    this.getFontSize = function () {\n        return this.getOption(\"fontSize\") ||\n           dom.computedStyle(this.container).fontSize;\n    };\n    this.setFontSize = function(size) {\n        this.setOption(\"fontSize\", size);\n    };\n\n    this.$highlightBrackets = function() {\n        if (this.$highlightPending) {\n            return;\n        }\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function () {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || !session.bgTokenizer) return;\n            if (session.$bracketHighlight) {\n                session.$bracketHighlight.markerIds.forEach(function(id) {\n                    session.removeMarker(id);\n                });\n                session.$bracketHighlight = null;\n            }\n            var ranges = session.getMatchingBracketRanges(self.getCursorPosition());\n            if (!ranges && session.$mode.getMatching) \n                ranges = session.$mode.getMatching(self.session);\n            if (!ranges)\n                return;\n\n            var markerType = \"ace_bracket\";\n            if (!Array.isArray(ranges)) {\n                ranges = [ranges];\n            } else if (ranges.length == 1) {\n                markerType = \"ace_error_bracket\";\n            }\n            if (ranges.length == 2) {\n                if (Range.comparePoints(ranges[0].end, ranges[1].start) == 0)\n                    ranges = [Range.fromPoints(ranges[0].start, ranges[1].end)];\n                else if (Range.comparePoints(ranges[0].start, ranges[1].end) == 0)\n                    ranges = [Range.fromPoints(ranges[1].start, ranges[0].end)];\n            }\n\n            session.$bracketHighlight = {\n                ranges: ranges,\n                markerIds: ranges.map(function(range) {\n                    return session.addMarker(range, markerType, \"text\");\n                })\n            };\n        }, 50);\n    };\n    this.$highlightTags = function() {\n        if (this.$highlightTagPending)\n            return;\n        var self = this;\n        this.$highlightTagPending = true;\n        setTimeout(function() {\n            self.$highlightTagPending = false;\n            \n            var session = self.session;\n            if (!session || !session.bgTokenizer) return;\n            \n            var pos = self.getCursorPosition();\n            var iterator = new TokenIterator(self.session, pos.row, pos.column);\n            var token = iterator.getCurrentToken();\n            \n            if (!token || !/\\b(?:tag-open|tag-name)/.test(token.type)) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n                return;\n            }\n            \n            if (token.type.indexOf(\"tag-open\") !== -1) {\n                token = iterator.stepForward();\n                if (!token)\n                    return;\n            }\n            \n            var tag = token.value;\n            var currentTag = token.value;\n            var depth = 0;\n            var prevToken = iterator.stepBackward();\n            \n            if (prevToken.value === '<'){\n                do {\n                    prevToken = token;\n                    token = iterator.stepForward();\n\n                    if (token) {\n                        if (token.type.indexOf('tag-name') !== -1) {\n                            currentTag = token.value;\n                            if (tag === currentTag) {\n                                if (prevToken.value === '<') {\n                                    depth++;\n                                } else if (prevToken.value === '</') {\n                                    depth--;\n                                }\n                            }\n                        } else if (tag === currentTag && token.value === '/>') { // self closing tag\n                            depth--;\n                        }\n                    }\n                    \n                } while (token && depth >= 0);\n            } else {\n                do {\n                    token = prevToken;\n                    prevToken = iterator.stepBackward();\n\n                    if (token) {\n                        if (token.type.indexOf('tag-name') !== -1) {\n                            if (tag === token.value) {\n                                if (prevToken.value === '<') {\n                                    depth++;\n                                } else if (prevToken.value === '</') {\n                                    depth--;\n                                }\n                            }\n                        } else if (token.value === '/>') { // self closing tag\n                            var stepCount = 0;\n                            var tmpToken = prevToken;\n                            while (tmpToken) {\n                                if (tmpToken.type.indexOf('tag-name') !== -1 && tmpToken.value === tag) {\n                                    depth--;\n                                    break;\n                                } else if (tmpToken.value === '<') {\n                                    break;\n                                }\n                                tmpToken = iterator.stepBackward();\n                                stepCount++;\n                            }\n                            for (var i = 0; i < stepCount; i++) {\n                                iterator.stepForward();\n                            }\n                        }\n                    }\n                } while (prevToken && depth <= 0);\n                iterator.stepForward();\n            }\n            \n            if (!token) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n                return;\n            }\n            \n            var row = iterator.getCurrentTokenRow();\n            var column = iterator.getCurrentTokenColumn();\n            var range = new Range(row, column, row, column+token.value.length);\n            var sbm = session.$backMarkers[session.$tagHighlight];\n            if (session.$tagHighlight && sbm != undefined && range.compareRange(sbm.range) !== 0) {\n                session.removeMarker(session.$tagHighlight);\n                session.$tagHighlight = null;\n            }\n            \n            if (!session.$tagHighlight)\n                session.$tagHighlight = session.addMarker(range, \"ace_bracket\", \"text\");\n        }, 50);\n    };\n    this.focus = function() {\n        var _self = this;\n        setTimeout(function() {\n            if (!_self.isFocused())\n                _self.textInput.focus();\n        });\n        this.textInput.focus();\n    };\n    this.isFocused = function() {\n        return this.textInput.isFocused();\n    };\n    this.blur = function() {\n        this.textInput.blur();\n    };\n    this.onFocus = function(e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    };\n    this.onBlur = function(e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    };\n\n    this.$cursorChange = function() {\n        this.renderer.updateCursor();\n        this.$highlightBrackets();\n        this.$highlightTags();\n        this.$updateHighlightActiveLine();\n    };\n    this.onDocumentChange = function(delta) {\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n\n        this._signal(\"change\", delta);\n        this.$cursorChange();\n    };\n\n    this.onTokenizerUpdate = function(e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    };\n\n\n    this.onScrollTopChange = function() {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    };\n\n    this.onScrollLeftChange = function() {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    };\n    this.onCursorChange = function() {\n        this.$cursorChange();\n        this._signal(\"changeSelection\");\n    };\n\n    this.$updateHighlightActiveLine = function() {\n        var session = this.getSession();\n\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if (this.$selectionStyle != \"line\" || !this.selection.isMultiLine())\n                highlight = this.getCursorPosition();\n            if (this.renderer.theme && this.renderer.theme.$selectionColorConflict && !this.selection.isEmpty())\n                highlight = false;\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        } else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        } else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    };\n\n    this.onSelectionChange = function(e) {\n        var session = this.session;\n\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        } else {\n            this.$updateHighlightActiveLine();\n        }\n\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n\n        this._signal(\"changeSelection\");\n    };\n\n    this.$getSelectionHighLightRegexp = function() {\n        var session = this.session;\n\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n\n        var startColumn = selection.start.column;\n        var endColumn = selection.end.column;\n        var line = session.getLine(selection.start.row);\n        \n        var needle = line.substring(startColumn, endColumn);\n        if (needle.length > 5000 || !/[\\w\\d]/.test(needle))\n            return;\n\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n        \n        var wordWithBoundary = line.substring(startColumn - 1, endColumn + 1);\n        if (!re.test(wordWithBoundary))\n            return;\n        \n        return re;\n    };\n\n\n    this.onChangeFrontMarker = function() {\n        this.renderer.updateFrontMarkers();\n    };\n\n    this.onChangeBackMarker = function() {\n        this.renderer.updateBackMarkers();\n    };\n\n\n    this.onChangeBreakpoint = function() {\n        this.renderer.updateBreakpoints();\n    };\n\n    this.onChangeAnnotation = function() {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    };\n\n\n    this.onChangeMode = function(e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    };\n\n\n    this.onChangeWrapLimit = function() {\n        this.renderer.updateFull();\n    };\n\n    this.onChangeWrapMode = function() {\n        this.renderer.onResize(true);\n    };\n\n\n    this.onChangeFold = function() {\n        this.$updateHighlightActiveLine();\n        this.renderer.updateFull();\n    };\n    this.getSelectedText = function() {\n        return this.session.getTextRange(this.getSelectionRange());\n    };\n    this.getCopyText = function() {\n        var text = this.getSelectedText();\n        var nl = this.session.doc.getNewLineCharacter();\n        var copyLine= false;\n        if (!text && this.$copyWithEmptySelection) {\n            copyLine = true;\n            var ranges = this.selection.getAllRanges();\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                if (i && ranges[i - 1].start.row == range.start.row)\n                    continue;\n                text += this.session.getLine(range.start.row) + nl;\n            }\n        }\n        var e = {text: text};\n        this._signal(\"copy\", e);\n        clipboard.lineMode = copyLine ? e.text : \"\";\n        return e.text;\n    };\n    this.onCopy = function() {\n        this.commands.exec(\"copy\", this);\n    };\n    this.onCut = function() {\n        this.commands.exec(\"cut\", this);\n    };\n    this.onPaste = function(text, event) {\n        var e = {text: text, event: event};\n        this.commands.exec(\"paste\", this, e);\n    };\n    \n    this.$handlePaste = function(e) {\n        if (typeof e == \"string\") \n            e = {text: e};\n        this._signal(\"paste\", e);\n        var text = e.text;\n\n        var lineMode = text == clipboard.lineMode;\n        var session = this.session;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            if (lineMode)\n                session.insert({ row: this.selection.lead.row, column: 0 }, text);\n            else\n                this.insert(text);\n        } else if (lineMode) {\n            this.selection.rangeList.ranges.forEach(function(range) {\n                session.insert({ row: range.start.row, column: 0 }, text);\n            });\n        } else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n    \n            var isFullLine = lines.length == 2 && (!lines[0] || !lines[1]);\n            if (lines.length != ranges.length || isFullLine)\n                return this.commands.exec(\"insertstring\", this, text);\n    \n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    session.remove(range);\n    \n                session.insert(range.start, lines[i]);\n            }\n        }\n    };\n\n    this.execCommand = function(command, args) {\n        return this.commands.exec(command, this, args);\n    };\n    this.insert = function(text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n\n        if (this.getBehavioursEnabled() && !pasted) {\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    if (!this.inVirtualSelectionMode) {\n                        this.session.mergeUndoDeltas = false;\n                        this.mergeNextCommand = false;\n                    }\n                }\n                text = transform.text;\n\n            }\n        }\n        \n        if (text == \"\\t\")\n            text = this.session.getTabString();\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = new Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        session.insert(cursor, text);\n\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(\n                    new Range(cursor.row, start + transform.selection[0],\n                              cursor.row, start + transform.selection[1]));\n            } else { // Transform relative to the current row.\n                this.selection.setSelectionRange(\n                    new Range(cursor.row + transform.selection[0],\n                              transform.selection[1],\n                              cursor.row + transform.selection[2],\n                              transform.selection[3]));\n            }\n        }\n        if (this.$enableAutoIndent) {\n            if (session.getDocument().isNewLine(text)) {\n                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n\n                session.insert({row: cursor.row+1, column: 0}, lineIndent);\n            }\n            if (shouldOutdent)\n                mode.autoOutdent(lineState, session, cursor.row);\n        }\n    };\n\n    this.autoIndent = function () {\n        var session = this.session;\n        var mode = session.getMode();\n\n        var startRow, endRow;\n        if (this.selection.isEmpty()) {\n            startRow = 0;\n            endRow = session.doc.getLength() - 1;\n        } else {\n            var selectedRange = this.getSelectionRange();\n\n            startRow = selectedRange.start.row;\n            endRow = selectedRange.end.row;\n        }\n\n        var prevLineState = \"\";\n        var prevLine = \"\";\n        var lineIndent = \"\";\n        var line, currIndent, range;\n        var tab = session.getTabString();\n\n        for (var row = startRow; row <= endRow; row++) {\n            if (row > 0) {\n                prevLineState = session.getState(row - 1);\n                prevLine = session.getLine(row - 1);\n                lineIndent = mode.getNextLineIndent(prevLineState, prevLine, tab);\n            }\n\n            line = session.getLine(row);\n            currIndent = mode.$getIndent(line);\n            if (lineIndent !== currIndent) {\n                if (currIndent.length > 0) {\n                    range = new Range(row, 0, row, currIndent.length);\n                    session.remove(range);\n                }\n                if (lineIndent.length > 0) {\n                    session.insert({row: row, column: 0}, lineIndent);\n                }\n            }\n\n            mode.autoOutdent(prevLineState, session, row);\n        }\n    };\n\n\n    this.onTextInput = function(text, composition) {\n        if (!composition)\n            return this.keyBinding.onTextInput(text);\n        \n        this.startOperation({command: { name: \"insertstring\" }});\n        var applyComposition = this.applyComposition.bind(this, text, composition);\n        if (this.selection.rangeCount)\n            this.forEachSelection(applyComposition);\n        else\n            applyComposition();\n        this.endOperation();\n    };\n    \n    this.applyComposition = function(text, composition) {\n        if (composition.extendLeft || composition.extendRight) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.extendLeft;\n            r.end.column += composition.extendRight;\n            if (r.start.column < 0) {\n                r.start.row--;\n                r.start.column += this.session.getLine(r.start.row).length + 1;\n            }\n            this.selection.setRange(r);\n            if (!text && !r.isEmpty())\n                this.remove();\n        }\n        if (text || !this.selection.isEmpty())\n            this.insert(text, true);\n        if (composition.restoreStart || composition.restoreEnd) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.restoreStart;\n            r.end.column -= composition.restoreEnd;\n            this.selection.setRange(r);\n        }\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        return this.keyBinding.onCommandKey(e, hashId, keyCode);\n    };\n    this.setOverwrite = function(overwrite) {\n        this.session.setOverwrite(overwrite);\n    };\n    this.getOverwrite = function() {\n        return this.session.getOverwrite();\n    };\n    this.toggleOverwrite = function() {\n        this.session.toggleOverwrite();\n    };\n    this.setScrollSpeed = function(speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    };\n    this.getScrollSpeed = function() {\n        return this.getOption(\"scrollSpeed\");\n    };\n    this.setDragDelay = function(dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    };\n    this.getDragDelay = function() {\n        return this.getOption(\"dragDelay\");\n    };\n    this.setSelectionStyle = function(val) {\n        this.setOption(\"selectionStyle\", val);\n    };\n    this.getSelectionStyle = function() {\n        return this.getOption(\"selectionStyle\");\n    };\n    this.setHighlightActiveLine = function(shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    };\n    this.getHighlightActiveLine = function() {\n        return this.getOption(\"highlightActiveLine\");\n    };\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n    this.setHighlightSelectedWord = function(shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    };\n    this.getHighlightSelectedWord = function() {\n        return this.$highlightSelectedWord;\n    };\n\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    };\n\n    this.getAnimatedScroll = function(){\n        return this.renderer.getAnimatedScroll();\n    };\n    this.setShowInvisibles = function(showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function() {\n        return this.renderer.getShowInvisibles();\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.renderer.setDisplayIndentGuides(display);\n    };\n\n    this.getDisplayIndentGuides = function() {\n        return this.renderer.getDisplayIndentGuides();\n    };\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    };\n    this.getShowPrintMargin = function() {\n        return this.renderer.getShowPrintMargin();\n    };\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    };\n    this.getPrintMarginColumn = function() {\n        return this.renderer.getPrintMarginColumn();\n    };\n    this.setReadOnly = function(readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    };\n    this.getReadOnly = function() {\n        return this.getOption(\"readOnly\");\n    };\n    this.setBehavioursEnabled = function (enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    };\n    this.getBehavioursEnabled = function () {\n        return this.getOption(\"behavioursEnabled\");\n    };\n    this.setWrapBehavioursEnabled = function (enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    };\n    this.getWrapBehavioursEnabled = function () {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    };\n    this.setShowFoldWidgets = function(show) {\n        this.setOption(\"showFoldWidgets\", show);\n\n    };\n    this.getShowFoldWidgets = function() {\n        return this.getOption(\"showFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    };\n\n    this.getFadeFoldWidgets = function() {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n    this.remove = function(dir) {\n        if (this.selection.isEmpty()){\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                range = new_range;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.removeWordRight = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeWordLeft = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineStart = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n        if (this.selection.isEmpty())\n            this.selection.selectLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n    this.removeToLineEnd = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n    this.splitLine = function() {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    };\n    this.transposeLetters = function() {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column-1);\n            range = new Range(cursor.row, column-1, cursor.row, column+1);\n        }\n        else {\n            swap = line.charAt(column-1) + line.charAt(column-2);\n            range = new Range(cursor.row, column-2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    };\n    this.toLowerCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.toUpperCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n    this.indent = function() {\n        var session = this.session;\n        var range = this.getSelectionRange();\n\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        } else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n        \n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        } else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    };\n    this.blockIndent = function() {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    };\n    this.blockOutdent = function() {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    };\n    this.sortLines = function() {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n\n        lines.sort(function(a, b) {\n            if (a.toLowerCase() < b.toLowerCase()) return -1;\n            if (a.toLowerCase() > b.toLowerCase()) return 1;\n            return 0;\n        });\n\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i-rows.first]);\n        }\n    };\n    this.toggleCommentLines = function() {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    };\n\n    this.toggleBlockComment = function() {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    };\n    this.getNumberAt = function(row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if(m.index <= column && m.index+m[0].length >= column){\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index+m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    };\n    this.modifyNumber = function(amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        var charRange = new Range(row, column-1, row, column);\n\n        var c = this.session.getTextRange(charRange);\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            var nr = this.getNumberAt(row, column);\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n\n\n                if(fp !== nr.end && column < fp){\n                    amount *= Math.pow(10, nr.end - column - 1);\n                } else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));\n\n            }\n        } else {\n            this.toggleWord();\n        }\n    };\n\n    this.$toggleWordPairs = [\n        [\"first\", \"last\"],\n        [\"true\", \"false\"],\n        [\"yes\", \"no\"],\n        [\"width\", \"height\"],\n        [\"top\", \"bottom\"],\n        [\"right\", \"left\"],\n        [\"on\", \"off\"],\n        [\"x\", \"y\"],\n        [\"get\", \"set\"],\n        [\"max\", \"min\"],\n        [\"horizontal\", \"vertical\"],\n        [\"show\", \"hide\"],\n        [\"add\", \"remove\"],\n        [\"up\", \"down\"],\n        [\"before\", \"after\"],\n        [\"even\", \"odd\"],\n        [\"in\", \"out\"],\n        [\"inside\", \"outside\"],\n        [\"next\", \"previous\"],\n        [\"increase\", \"decrease\"],\n        [\"attach\", \"detach\"],\n        [\"&&\", \"||\"],\n        [\"==\", \"!=\"]\n    ];\n\n    this.toggleWord = function () {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        this.selection.selectWord();\n        var currentState = this.getSelectedText();\n        var currWordStart = this.selection.getWordRange().start.column;\n        var wordParts = currentState.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g, '$1 ').split(/\\s/);\n        var delta = column - currWordStart - 1;\n        if (delta < 0) delta = 0;\n        var curLength = 0, itLength = 0;\n        var that = this;\n        if (currentState.match(/[A-Za-z0-9_]+/)) {\n            wordParts.forEach(function (item, i) {\n                itLength = curLength + item.length;\n                if (delta >= curLength && delta <= itLength) {\n                    currentState = item;\n                    that.selection.clearSelection();\n                    that.moveCursorTo(row, curLength + currWordStart);\n                    that.selection.selectTo(row, itLength + currWordStart);\n                }\n                curLength = itLength;\n            });\n        }\n\n        var wordPairs = this.$toggleWordPairs;\n        var reg;\n        for (var i = 0; i < wordPairs.length; i++) {\n            var item = wordPairs[i];\n            for (var j = 0; j <= 1; j++) {\n                var negate = +!j;\n                var firstCondition = currentState.match(new RegExp('^\\\\s?_?(' + lang.escapeRegExp(item[j]) + ')\\\\s?$', 'i'));\n                if (firstCondition) {\n                    var secondCondition = currentState.match(new RegExp('([_]|^|\\\\s)(' + lang.escapeRegExp(firstCondition[1]) + ')($|\\\\s)', 'g'));\n                    if (secondCondition) {\n                        reg = currentState.replace(new RegExp(lang.escapeRegExp(item[j]), 'i'), function (result) {\n                            var res = item[negate];\n                            if (result.toUpperCase() == result) {\n                                res = res.toUpperCase();\n                            } else if (result.charAt(0).toUpperCase() == result.charAt(0)) {\n                                res = res.substr(0, 0) + item[negate].charAt(0).toUpperCase() + res.substr(1);\n                            }\n                            return res;\n                        });\n                        this.insert(reg);\n                        reg = \"\";\n                    }\n                }\n            }\n        }\n    };\n    this.removeLines = function() {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    };\n\n    this.duplicateSelection = function() {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        } else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range), false);\n            range.start = point;\n            range.end = endPoint;\n\n            sel.setSelectionRange(range, reverse);\n        }\n    };\n    this.moveLinesDown = function() {\n        this.$moveLines(1, false);\n    };\n    this.moveLinesUp = function() {\n        this.$moveLines(-1, false);\n    };\n    this.moveText = function(range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    };\n    this.copyLinesUp = function() {\n        this.$moveLines(-1, true);\n    };\n    this.copyLinesDown = function() {\n        this.$moveLines(1, true);\n    };\n    this.$moveLines = function(dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1) moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        } else {\n            var ranges = selection.rangeList.ranges;\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n            \n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff) ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1) rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy) diff = 0;\n                totalDiff += diff;\n            }\n            \n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    };\n    this.$getSelectedRows = function(range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    };\n\n    this.onCompositionStart = function(compositionState) {\n        this.renderer.showComposition(compositionState);\n    };\n\n    this.onCompositionUpdate = function(text) {\n        this.renderer.setCompositionText(text);\n    };\n\n    this.onCompositionEnd = function() {\n        this.renderer.hideComposition();\n    };\n    this.getFirstVisibleRow = function() {\n        return this.renderer.getFirstVisibleRow();\n    };\n    this.getLastVisibleRow = function() {\n        return this.renderer.getLastVisibleRow();\n    };\n    this.isRowVisible = function(row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    };\n    this.isRowFullyVisible = function(row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    };\n    this.$getVisibleRowCount = function() {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    };\n\n    this.$moveByPage = function(dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n\n        if (select === true) {\n            this.selection.$moveSelection(function(){\n                this.moveCursorBy(rows, 0);\n            });\n        } else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n\n        var scrollTop = renderer.scrollTop;\n\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n\n        renderer.animateScrolling(scrollTop);\n    };\n    this.selectPageDown = function() {\n        this.$moveByPage(1, true);\n    };\n    this.selectPageUp = function() {\n        this.$moveByPage(-1, true);\n    };\n    this.gotoPageDown = function() {\n       this.$moveByPage(1, false);\n    };\n    this.gotoPageUp = function() {\n        this.$moveByPage(-1, false);\n    };\n    this.scrollPageDown = function() {\n        this.$moveByPage(1);\n    };\n    this.scrollPageUp = function() {\n        this.$moveByPage(-1);\n    };\n    this.scrollToRow = function(row) {\n        this.renderer.scrollToRow(row);\n    };\n    this.scrollToLine = function(line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    };\n    this.centerSelection = function() {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    };\n    this.getCursorPosition = function() {\n        return this.selection.getCursor();\n    };\n    this.getCursorPositionScreen = function() {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    };\n    this.getSelectionRange = function() {\n        return this.selection.getRange();\n    };\n    this.selectAll = function() {\n        this.selection.selectAll();\n    };\n    this.clearSelection = function() {\n        this.selection.clearSelection();\n    };\n    this.moveCursorTo = function(row, column) {\n        this.selection.moveCursorTo(row, column);\n    };\n    this.moveCursorToPosition = function(pos) {\n        this.selection.moveCursorToPosition(pos);\n    };\n    this.jumpToMatching = function(select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var token = prevToken || iterator.stepForward();\n\n        if (!token) return;\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n        \n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                        break;\n                    }\n                }\n            }\n            else if (token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n                \n                if (prevToken.value === '<') {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n                \n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n\n            if (!found) {\n                prevToken = token;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n        if (!matchType)\n            return;\n\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(\n                    iterator.getCurrentTokenRow(),\n                    iterator.getCurrentTokenColumn() + i - 1,\n                    iterator.getCurrentTokenRow(),\n                    iterator.getCurrentTokenColumn() + i - 1\n                );\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column) < 2)\n                    range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (token && token.type.indexOf('tag-name') !== -1) \n                var tag = token.value;\n            else\n                return;\n\n            range = new Range(\n                iterator.getCurrentTokenRow(),\n                iterator.getCurrentTokenColumn() - 2,\n                iterator.getCurrentTokenRow(),\n                iterator.getCurrentTokenColumn() - 2\n            );\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                found = false;\n                do {\n                    token = prevToken;\n                    prevToken = iterator.stepBackward();\n                    \n                    if (prevToken) {\n                        if (prevToken.type.indexOf('tag-close') !== -1) {\n                            range.setEnd(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1);\n                        }\n\n                        if (token.value === tag && token.type.indexOf('tag-name') !== -1) {\n                            if (prevToken.value === '<') {\n                                depth[tag]++;\n                            }\n                            else if (prevToken.value === '</') {\n                                depth[tag]--;\n                            }\n                            \n                            if (depth[tag] === 0)\n                                found = true;\n                        }\n                    }\n                } while (prevToken && !found);\n            }\n            if (token && token.type.indexOf('tag-name')) {\n                pos = range.start;\n                if (pos.row == cursor.row && Math.abs(pos.column - cursor.column) < 2)\n                    pos = range.end;\n            }\n        }\n\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                } else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                } else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            } else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    };\n    this.gotoLine = function(lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({row: lineNumber - 1, column: column || 0});\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    };\n    this.navigateTo = function(row, column) {\n        this.selection.moveTo(row, column);\n    };\n    this.navigateUp = function(times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    };\n    this.navigateDown = function(times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    };\n    this.navigateLeft = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateRight = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    };\n    this.navigateLineStart = function() {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    };\n    this.navigateLineEnd = function() {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    };\n    this.navigateFileEnd = function() {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    };\n    this.navigateFileStart = function() {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    };\n    this.navigateWordRight = function() {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    };\n    this.navigateWordLeft = function() {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    };\n    this.replace = function(replacement, options) {\n        if (options)\n            this.$search.set(options);\n\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n\n        this.selection.setSelectionRange(range);\n        this.renderer.scrollSelectionIntoView(range.start, range.end);\n\n        return replaced;\n    };\n    this.replaceAll = function(replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if(this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n\n        this.selection.setSelectionRange(selection);\n\n        return replaced;\n    };\n\n    this.$tryReplace = function(range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        } else {\n            return null;\n        }\n    };\n    this.getLastSearchOptions = function() {\n        return this.$search.getOptions();\n    };\n    this.find = function(needle, options, animate) {\n        if (!options)\n            options = {};\n\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({needle: needle});\n        }\n\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({start: range});\n\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    };\n    this.findNext = function(options, animate) {\n        this.find({skipCurrent: true, backwards: false}, options, animate);\n    };\n    this.findPrevious = function(options, animate) {\n        this.find(options, {skipCurrent: true, backwards: true}, animate);\n    };\n\n    this.revealRange = function(range, animate) {\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    };\n    this.undo = function() {\n        this.session.getUndoManager().undo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.redo = function() {\n        this.session.getUndoManager().redo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n    this.destroy = function() {\n        if (this.$toDestroy) {\n            this.$toDestroy.forEach(function(el) {\n                el.destroy();\n            });\n            this.$toDestroy = null;\n        }\n        if (this.$mouseHandler)\n            this.$mouseHandler.destroy();\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session)\n            this.session.destroy();\n        if (this._$emitInputEvent)\n            this._$emitInputEvent.cancel();\n        this.removeAllListeners();\n    };\n    this.setAutoScrollEditorIntoView = function(enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function() {\n            shouldScroll = true;\n        });\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function() {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function() {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())\n            ) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                } else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                } else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function(enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    };\n\n\n    this.$resetCursorStyle = function() {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    };\n    this.prompt = function(message, options, callback) {\n        var editor = this;\n        config.loadModule(\"./ext/prompt\", function (module) {\n            module.prompt(editor, message, options, callback);\n        });\n    };\n\n}).call(Editor.prototype);\n\n\n\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function(style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", {data: style});\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function() {this.$updateHighlightActiveLine();},\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function(shouldHighlight) {this.$onSelectionChange();},\n        initialValue: true\n    },\n    readOnly: {\n        set: function(readOnly) {\n            this.textInput.setReadOnly(readOnly);\n            this.$resetCursorStyle(); \n        },\n        initialValue: false\n    },\n    copyWithEmptySelection: {\n        set: function(value) {\n            this.textInput.setCopyWithEmptySelection(value);\n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function(val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: {initialValue: true},\n    wrapBehavioursEnabled: {initialValue: true},\n    enableAutoIndent: {initialValue: true},\n    autoScrollEditorIntoView: {\n        set: function(val) {this.setAutoScrollEditorIntoView(val);}\n    },\n    keyboardHandler: {\n        set: function(val) { this.setKeyboardHandler(val); },\n        get: function() { return this.$keybindingId; },\n        handlesSet: true\n    },\n    value: {\n        set: function(val) { this.session.setValue(val); },\n        get: function() { return this.getValue(); },\n        handlesSet: true,\n        hidden: true\n    },\n    session: {\n        set: function(val) { this.setSession(val); },\n        get: function() { return this.session; },\n        handlesSet: true,\n        hidden: true\n    },\n    \n    showLineNumbers: {\n        set: function(show) {\n            this.renderer.$gutterLayer.setShowLineNumbers(show);\n            this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER);\n            if (show && this.$relativeLineNumbers)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        },\n        initialValue: true\n    },\n    relativeLineNumbers: {\n        set: function(value) {\n            if (this.$showLineNumbers && value)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        }\n    },\n    placeholder: {\n        set: function(message) {\n            if (!this.$updatePlaceholder) {\n                this.$updatePlaceholder = function() {\n                    var value = this.session && (this.renderer.$composition || this.getValue());\n                    if (value && this.renderer.placeholderNode) {\n                        this.renderer.off(\"afterRender\", this.$updatePlaceholder);\n                        dom.removeCssClass(this.container, \"ace_hasPlaceholder\");\n                        this.renderer.placeholderNode.remove();\n                        this.renderer.placeholderNode = null;\n                    } else if (!value && !this.renderer.placeholderNode) {\n                        this.renderer.on(\"afterRender\", this.$updatePlaceholder);\n                        dom.addCssClass(this.container, \"ace_hasPlaceholder\");\n                        var el = dom.createElement(\"div\");\n                        el.className = \"ace_placeholder\";\n                        el.textContent = this.$placeholder || \"\";\n                        this.renderer.placeholderNode = el;\n                        this.renderer.content.appendChild(this.renderer.placeholderNode);\n                    } else if (!value && this.renderer.placeholderNode) {\n                        this.renderer.placeholderNode.textContent = this.$placeholder || \"\";\n                    }\n                }.bind(this);\n                this.on(\"input\", this.$updatePlaceholder);\n            }\n            this.$updatePlaceholder();\n        }\n    },\n\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    showGutter: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n    hasCssTransforms: \"renderer\",\n    maxPixelHeight: \"renderer\",\n    useTextareaForIME: \"renderer\",\n\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimeout: \"$mouseHandler\",\n    tooltipFollowsMouse: \"$mouseHandler\",\n\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    navigateWithinSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\n\n\nvar relativeNumberRenderer = {\n    getText: function(session, row) {\n        return (Math.abs(session.selection.lead.row - row) || (row + 1 + (row < 9 ? \"\\xb7\" : \"\"))) + \"\";\n    },\n    getWidth: function(session, lastLineNumber, config) {\n        return Math.max(\n            lastLineNumber.toString().length,\n            (config.lastRow + 1).toString().length,\n            2\n        ) * config.characterWidth;\n    },\n    update: function(e, editor) {\n        editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER);\n    },\n    attach: function(editor) {\n        editor.renderer.$gutterLayer.$renderer = this;\n        editor.on(\"changeSelection\", this.update);\n        this.update(null, editor);\n    },\n    detach: function(editor) {\n        if (editor.renderer.$gutterLayer.$renderer == this)\n            editor.renderer.$gutterLayer.$renderer = null;\n        editor.off(\"changeSelection\", this.update);\n        this.update(null, editor);\n    }\n};\n\nexports.Editor = Editor;\n});\n\nace.define(\"ace/undomanager\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\nvar UndoManager = function() {\n    this.$maxRev = 0;\n    this.$fromUndo = false;\n    this.reset();\n};\n\n(function() {\n    \n    this.addSession = function(session) {\n        this.$session = session;\n    };\n    this.add = function(delta, allowMerge, session) {\n        if (this.$fromUndo) return;\n        if (delta == this.$lastDelta) return;\n        if (!this.$keepRedoStack) this.$redoStack.length = 0;\n        if (allowMerge === false || !this.lastDeltas) {\n            this.lastDeltas = [];\n            this.$undoStack.push(this.lastDeltas);\n            delta.id = this.$rev = ++this.$maxRev;\n        }\n        if (delta.action == \"remove\" || delta.action == \"insert\")\n            this.$lastDelta = delta;\n        this.lastDeltas.push(delta);\n    };\n    \n    this.addSelection = function(selection, rev) {\n        this.selections.push({\n            value: selection,\n            rev: rev || this.$rev\n        });\n    };\n    \n    this.startNewGroup = function() {\n        this.lastDeltas = null;\n        return this.$rev;\n    };\n    \n    this.markIgnored = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id <= from)\n                break;\n            if (delta.id < to)\n                delta.ignore = true;\n        }\n        this.lastDeltas = null;\n    };\n    \n    this.getSelection = function(rev, after) {\n        var stack = this.selections;\n        for (var i = stack.length; i--;) {\n            var selection = stack[i];\n            if (selection.rev < rev) {\n                if (after)\n                    selection = stack[i + 1];\n                return selection;\n            }\n        }\n    };\n    \n    this.getRevision = function() {\n        return this.$rev;\n    };\n    \n    this.getDeltas = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        var end = null, start = 0;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id < to && !end)\n                end = i+1;\n            if (delta.id <= from) {\n                start = i + 1;\n                break;\n            }\n        }\n        return stack.slice(start, end);\n    };\n    \n    this.getChangedRanges = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        \n    };\n    \n    this.getChangedLines = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        \n    };\n    this.undo = function(session, dontSelect) {\n        this.lastDeltas = null;\n        var stack = this.$undoStack;\n        \n        if (!rearrangeUndoStack(stack, stack.length))\n            return;\n        \n        if (!session)\n            session = this.$session;\n        \n        if (this.$redoStackBaseRev !== this.$rev && this.$redoStack.length)\n            this.$redoStack = [];\n        \n        this.$fromUndo = true;\n        \n        var deltaSet = stack.pop();\n        var undoSelectionRange = null;\n        if (deltaSet) {\n            undoSelectionRange = session.undoChanges(deltaSet, dontSelect);\n            this.$redoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        \n        this.$fromUndo = false;\n\n        return undoSelectionRange;\n    };\n    this.redo = function(session, dontSelect) {\n        this.lastDeltas = null;\n        \n        if (!session)\n            session = this.$session;\n        \n        this.$fromUndo = true;\n        if (this.$redoStackBaseRev != this.$rev) {\n            var diff = this.getDeltas(this.$redoStackBaseRev, this.$rev + 1);\n            rebaseRedoStack(this.$redoStack, diff);\n            this.$redoStackBaseRev = this.$rev;\n            this.$redoStack.forEach(function(x) {\n                x[0].id = ++this.$maxRev;\n            }, this);\n        }\n        var deltaSet = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        \n        if (deltaSet) {\n            redoSelectionRange = session.redoChanges(deltaSet, dontSelect);\n            this.$undoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        \n        return redoSelectionRange;\n    };\n    \n    this.$syncRev = function() {\n        var stack = this.$undoStack;\n        var nextDelta = stack[stack.length - 1];\n        var id = nextDelta && nextDelta[0].id || 0;\n        this.$redoStackBaseRev = id;\n        this.$rev = id;\n    };\n    this.reset = function() {\n        this.lastDeltas = null;\n        this.$lastDelta = null;\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.$rev = 0;\n        this.mark = 0;\n        this.$redoStackBaseRev = this.$rev;\n        this.selections = [];\n    };\n    this.canUndo = function() {\n        return this.$undoStack.length > 0;\n    };\n    this.canRedo = function() {\n        return this.$redoStack.length > 0;\n    };\n    this.bookmark = function(rev) {\n        if (rev == undefined)\n            rev = this.$rev;\n        this.mark = rev;\n    };\n    this.isAtBookmark = function() {\n        return this.$rev === this.mark;\n    };\n    \n    this.toJSON = function() {\n        \n    };\n    \n    this.fromJSON = function() {\n        \n    };\n    \n    this.hasUndo = this.canUndo;\n    this.hasRedo = this.canRedo;\n    this.isClean = this.isAtBookmark;\n    this.markClean = this.bookmark;\n    \n    this.$prettyPrint = function(delta) {\n        if (delta) return stringifyDelta(delta);\n        return stringifyDelta(this.$undoStack) + \"\\n---\\n\" + stringifyDelta(this.$redoStack);\n    };\n}).call(UndoManager.prototype);\n\nfunction rearrangeUndoStack(stack, pos) {\n    for (var i = pos; i--; ) {\n        var deltaSet = stack[i];\n        if (deltaSet && !deltaSet[0].ignore) {\n            while(i < pos - 1) {\n                var swapped = swapGroups(stack[i], stack[i + 1]);\n                stack[i] = swapped[0];\n                stack[i + 1] = swapped[1];\n                i++;\n            }\n            return true;\n        }\n    }\n}\n\nvar Range = require(\"./range\").Range;\nvar cmp = Range.comparePoints;\nvar comparePoints = Range.comparePoints;\n\nfunction $updateMarkers(delta) {\n    var isInsert = delta.action == \"insert\";\n    var start = delta.start;\n    var end = delta.end;\n    var rowShift = (end.row - start.row) * (isInsert ? 1 : -1);\n    var colShift = (end.column - start.column) * (isInsert ? 1 : -1);\n    if (isInsert) end = start;\n\n    for (var i in this.marks) {\n        var point = this.marks[i];\n        var cmp = comparePoints(point, start);\n        if (cmp < 0) {\n            continue; // delta starts after the range\n        }\n        if (cmp === 0) {\n            if (isInsert) {\n                if (point.bias == 1) {\n                    cmp = 1;\n                }\n                else {\n                    point.bias == -1;\n                    continue;\n                }\n            }\n        }\n        var cmp2 = isInsert ? cmp : comparePoints(point, end);\n        if (cmp2 > 0) {\n            point.row += rowShift;\n            point.column += point.row == end.row ? colShift : 0;\n            continue;\n        }\n        if (!isInsert && cmp2 <= 0) {\n            point.row = start.row;\n            point.column = start.column;\n            if (cmp2 === 0)\n                point.bias = 1;\n        }\n    }\n}\n\n\n\nfunction clonePos(pos) {\n    return {row: pos.row,column: pos.column};\n}\nfunction cloneDelta(d) {\n    return {\n        start: clonePos(d.start),\n        end: clonePos(d.end),\n        action: d.action,\n        lines: d.lines.slice()\n    };\n}\nfunction stringifyDelta(d) {\n    d = d || this;\n    if (Array.isArray(d)) {\n        return d.map(stringifyDelta).join(\"\\n\");\n    }\n    var type = \"\";\n    if (d.action) {\n        type = d.action == \"insert\" ? \"+\" : \"-\";\n        type += \"[\" + d.lines + \"]\";\n    } else if (d.value) {\n        if (Array.isArray(d.value)) {\n            type = d.value.map(stringifyRange).join(\"\\n\");\n        } else {\n            type = stringifyRange(d.value);\n        }\n    }\n    if (d.start) {\n        type += stringifyRange(d);\n    }\n    if (d.id || d.rev) {\n        type += \"\\t(\" + (d.id || d.rev) + \")\";\n    }\n    return type;\n}\nfunction stringifyRange(r) {\n    return r.start.row + \":\" + r.start.column \n        + \"=>\" + r.end.row + \":\" + r.end.column;\n}\n\nfunction swap(d1, d2) {\n    var i1 = d1.action == \"insert\";\n    var i2 = d2.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    }\n    return [d2, d1];\n}\nfunction swapGroups(ds1, ds2) {\n    for (var i = ds1.length; i--; ) {\n        for (var j = 0; j < ds2.length; j++) {\n            if (!swap(ds1[i], ds2[j])) {\n                while (i < ds1.length) {\n                    while (j--) {\n                        swap(ds2[j], ds1[i]);\n                    }\n                    j = ds2.length;\n                    i++;\n                }                \n                return [ds1, ds2];\n            }\n        }\n    }\n    ds1.selectionBefore = ds2.selectionBefore = \n    ds1.selectionAfter = ds2.selectionAfter = null;\n    return [ds2, ds1];\n}\nfunction xform(d1, c1) {\n    var i1 = d1.action == \"insert\";\n    var i2 = c1.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d1.start, c1.start) < 0) {\n            shift(c1, d1, 1);\n        } else {\n            shift(d1, c1, 1);\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d1.start, c1.end) >= 0) {\n            shift(d1, c1, -1);\n        } else if (cmp(d1.start, c1.start) <= 0) {\n            shift(c1, d1, +1);\n        } else {\n            shift(d1, Range.fromPoints(c1.start, d1.start), -1);\n            shift(c1, d1, +1);\n        }\n    } else if (!i1 && i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.start, d1.start) <= 0) {\n            shift(d1, c1, +1);\n        } else {\n            shift(c1, Range.fromPoints(d1.start, c1.start), -1);\n            shift(d1, c1, +1);\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.end, d1.start) <= 0) {\n            shift(d1, c1, -1);\n        } else {\n            var before, after;\n            if (cmp(d1.start, c1.start) < 0) {\n                before = d1;\n                d1 = splitDelta(d1, c1.start);\n            }\n            if (cmp(d1.end, c1.end) > 0) {\n                after = splitDelta(d1, c1.end);\n            }\n\n            shiftPos(c1.end, d1.start, d1.end, -1);\n            if (after && !before) {\n                d1.lines = after.lines;\n                d1.start = after.start;\n                d1.end = after.end;\n                after = d1;\n            }\n\n            return [c1, before, after].filter(Boolean);\n        }\n    }\n    return [c1, d1];\n}\n    \nfunction shift(d1, d2, dir) {\n    shiftPos(d1.start, d2.start, d2.end, dir);\n    shiftPos(d1.end, d2.start, d2.end, dir);\n}\nfunction shiftPos(pos, start, end, dir) {\n    if (pos.row == (dir == 1 ? start : end).row) {\n        pos.column += dir * (end.column - start.column);\n    }\n    pos.row += dir * (end.row - start.row);\n}\nfunction splitDelta(c, pos) {\n    var lines = c.lines;\n    var end = c.end;\n    c.end = clonePos(pos);    \n    var rowsBefore = c.end.row - c.start.row;\n    var otherLines = lines.splice(rowsBefore, lines.length);\n    \n    var col = rowsBefore ? pos.column : pos.column - c.start.column;\n    lines.push(otherLines[0].substring(0, col));\n    otherLines[0] = otherLines[0].substr(col)   ; \n    var rest = {\n        start: clonePos(pos),\n        end: end,\n        lines: otherLines,\n        action: c.action\n    };\n    return rest;\n}\n\nfunction moveDeltasByOne(redoStack, d) {\n    d = cloneDelta(d);\n    for (var j = redoStack.length; j--;) {\n        var deltaSet = redoStack[j];\n        for (var i = 0; i < deltaSet.length; i++) {\n            var x = deltaSet[i];\n            var xformed = xform(x, d);\n            d = xformed[0];\n            if (xformed.length != 2) {\n                if (xformed[2]) {\n                    deltaSet.splice(i + 1, 1, xformed[1], xformed[2]);\n                    i++;\n                } else if (!xformed[1]) {\n                    deltaSet.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (!deltaSet.length) {\n            redoStack.splice(j, 1); \n        }\n    }\n    return redoStack;\n}\nfunction rebaseRedoStack(redoStack, deltaSets) {\n    for (var i = 0; i < deltaSets.length; i++) {\n        var deltas = deltaSets[i];\n        for (var j = 0; j < deltas.length; j++) {\n            moveDeltasByOne(redoStack, deltas[j]);\n        }\n    }\n}\n\nexports.UndoManager = UndoManager;\n\n});\n\nace.define(\"ace/layer/lines\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"../lib/dom\");\n\nvar Lines = function(element, canvasHeight) {\n    this.element = element;\n    this.canvasHeight = canvasHeight || 500000;\n    this.element.style.height = (this.canvasHeight * 2) + \"px\";\n    \n    this.cells = [];\n    this.cellCache = [];\n    this.$offsetCoefficient = 0;\n};\n\n(function() {\n    \n    this.moveContainer = function(config) {\n        dom.translate(this.element, 0, -((config.firstRowScreen * config.lineHeight) % this.canvasHeight) - config.offset * this.$offsetCoefficient);\n    };    \n    \n    this.pageChanged = function(oldConfig, newConfig) {\n        return (\n            Math.floor((oldConfig.firstRowScreen * oldConfig.lineHeight) / this.canvasHeight) !==\n            Math.floor((newConfig.firstRowScreen * newConfig.lineHeight) / this.canvasHeight)\n        );\n    };\n    \n    this.computeLineTop = function(row, config, session) {\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / this.canvasHeight);\n        var lineTop = session.documentToScreenRow(row, 0) * config.lineHeight;\n        return lineTop - (screenPage * this.canvasHeight);\n    };\n    \n    this.computeLineHeight = function(row, config, session) {\n        return config.lineHeight * session.getRowLineCount(row);\n    };\n    \n    this.getLength = function() {\n        return this.cells.length;\n    };\n    \n    this.get = function(index) {\n        return this.cells[index];\n    };\n    \n    this.shift = function() {\n        this.$cacheCell(this.cells.shift());\n    };\n    \n    this.pop = function() {\n        this.$cacheCell(this.cells.pop());\n    };\n    \n    this.push = function(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.push.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            this.element.appendChild(fragment);\n        } else {\n            this.cells.push(cell);\n            this.element.appendChild(cell.element);\n        }\n    };\n    \n    this.unshift = function(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.unshift.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            if (this.element.firstChild)\n                this.element.insertBefore(fragment, this.element.firstChild);\n            else\n                this.element.appendChild(fragment);\n        } else {\n            this.cells.unshift(cell);\n            this.element.insertAdjacentElement(\"afterbegin\", cell.element);\n        }\n    };\n    \n    this.last = function() {\n        if (this.cells.length)\n            return this.cells[this.cells.length-1];\n        else\n            return null;\n    };\n    \n    this.$cacheCell = function(cell) {\n        if (!cell)\n            return;\n            \n        cell.element.remove();\n        this.cellCache.push(cell);\n    };\n    \n    this.createCell = function(row, config, session, initElement) {\n        var cell = this.cellCache.pop();\n        if (!cell) {\n            var element = dom.createElement(\"div\");\n            if (initElement)\n                initElement(element);\n            \n            this.element.appendChild(element);\n            \n            cell = {\n                element: element,\n                text: \"\",\n                row: row\n            };\n        }\n        cell.row = row;\n        \n        return cell;\n    };\n    \n}).call(Lines.prototype);\n\nexports.Lines = Lines;\n\n});\n\nace.define(\"ace/layer/gutter\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\",\"ace/lib/oop\",\"ace/lib/lang\",\"ace/lib/event_emitter\",\"ace/layer/lines\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Lines = require(\"./lines\").Lines;\n\nvar Gutter = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_gutter-layer\";\n    parentEl.appendChild(this.element);\n    this.setShowFoldWidgets(this.$showFoldWidgets);\n    \n    this.gutterWidth = 0;\n\n    this.$annotations = [];\n    this.$updateAnnotations = this.$updateAnnotations.bind(this);\n    \n    this.$lines = new Lines(this.element);\n    this.$lines.$offsetCoefficient = 1;\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.off(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    };\n\n    this.addGutterDecoration = function(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    };\n\n    this.removeGutterDecoration = function(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    };\n\n    this.setAnnotations = function(annotations) {\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = {text: []};\n           \n            var annoText = annotation.text;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n\n            if (rowInfo.text.indexOf(annoText) === -1)\n                rowInfo.text.push(annoText);\n\n            var type = annotation.type;\n            if (type == \"error\")\n                rowInfo.className = \" ace_error\";\n            else if (type == \"warning\" && rowInfo.className != \" ace_error\")\n                rowInfo.className = \" ace_warning\";\n            else if (type == \"info\" && (!rowInfo.className))\n                rowInfo.className = \" ace_info\";\n        }\n    };\n\n    this.$updateAnnotations = function (delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n        } else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        } else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    };\n\n    this.update = function(config) {\n        this.config = config;\n        \n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            session.getLength() - 1);\n            \n        this.oldLastRow = lastRow;\n        this.config = config;\n        \n        this.$lines.moveContainer(config);\n        this.$updateCursorRow();\n            \n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        \n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$lines.getLength() > index + 1)\n                    this.$lines.pop();\n                    \n                break;\n            }\n\n            cell = this.$lines.get(++index);\n            if (cell) {\n                cell.row = row;\n            } else {\n                cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n                this.$lines.push(cell);\n            }\n\n            this.$renderCell(cell, config, fold, row);\n            row++;\n        }\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n\n    this.$updateGutterWidth = function(config) {\n        var session = this.session;\n        \n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        \n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineText = this.$lines.last() ? this.$lines.last().text : \"\";\n        \n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineText = session.getLength() + firstLineNumber - 1;\n\n        var gutterWidth = gutterRenderer \n            ? gutterRenderer.getWidth(session, lastLineText, config)\n            : lastLineText.toString().length * config.characterWidth;\n        \n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth;\n            this.element.parentNode.style.width = \n            this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._signal(\"changeGutterWidth\", gutterWidth);\n        }\n    };\n    \n    this.$updateCursorRow = function() {\n        if (!this.$highlightGutterLine)\n            return;\n            \n        var position = this.session.selection.getCursor();\n        if (this.$cursorRow === position.row)\n            return;\n        \n        this.$cursorRow = position.row;\n    };\n    \n    this.updateLineHighlight = function() {\n        if (!this.$highlightGutterLine)\n            return;\n        var row = this.session.selection.cursor.row;\n        this.$cursorRow = row;\n\n        if (this.$cursorCell && this.$cursorCell.row == row)\n            return;\n        if (this.$cursorCell)\n            this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n        var cells = this.$lines.cells;\n        this.$cursorCell = null;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            if (cell.row >= this.$cursorRow) {\n                if (cell.row > this.$cursorRow) {\n                    var fold = this.session.getFoldLine(this.$cursorRow);\n                    if (i > 0 && fold && fold.start.row == cells[i - 1].row)\n                        cell = cells[i - 1];\n                    else\n                        break;\n                }\n                cell.element.className = \"ace_gutter-active-line \" + cell.element.className;\n                this.$cursorCell = cell;\n                break;\n            }\n        }\n    };\n    \n    this.scrollLines = function(config) {\n        var oldConfig = this.config;\n        this.config = config;\n        \n        this.$updateCursorRow();\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        \n        this.$lines.moveContainer(config);\n\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            this.session.getLength() - 1);\n        var oldLastRow = this.oldLastRow;\n        this.oldLastRow = lastRow;\n        \n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldLastRow > lastRow)\n            for (var row=this.session.getFoldedRowCount(lastRow + 1, oldLastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLines(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (lastRow > oldLastRow) {\n            this.$lines.push(this.$renderLines(config, oldLastRow + 1, lastRow));\n        }\n        \n        this.updateLineHighlight();\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n\n    this.$renderLines = function(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n            this.$renderCell(cell, config, foldLine, row);\n            fragment.push(cell);\n\n            row++;\n        }\n        return fragment;\n    };\n    \n    this.$renderCell = function(cell, config, fold, row) {\n        var element = cell.element;\n        \n        var session = this.session;\n        \n        var textNode = element.childNodes[0];\n        var foldWidget = element.childNodes[1];\n\n        var firstLineNumber = session.$firstLineNumber;\n        \n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var foldStart = fold ? fold.start.row : Number.MAX_VALUE;\n        \n        var className = \"ace_gutter-cell \";\n        if (this.$highlightGutterLine) {\n            if (row == this.$cursorRow || (fold && row < this.$cursorRow && row >= foldStart &&  this.$cursorRow <= fold.end.row)) {\n                className += \"ace_gutter-active-line \";\n                if (this.$cursorCell != cell) {\n                    if (this.$cursorCell)\n                        this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n                    this.$cursorCell = cell;\n                }\n            }\n        }\n        \n        if (breakpoints[row])\n            className += breakpoints[row];\n        if (decorations[row])\n            className += decorations[row];\n        if (this.$annotations[row])\n            className += this.$annotations[row].className;\n        if (element.className != className)\n            element.className = className;\n\n        if (foldWidgets) {\n            var c = foldWidgets[row];\n            if (c == null)\n                c = foldWidgets[row] = session.getFoldWidget(row);\n        }\n\n        if (c) {\n            var className = \"ace_fold-widget ace_\" + c;\n            if (c == \"start\" && row == foldStart && row < fold.end.row)\n                className += \" ace_closed\";\n            else\n                className += \" ace_open\";\n            if (foldWidget.className != className)\n                foldWidget.className = className;\n\n            var foldHeight = config.lineHeight + \"px\";\n            dom.setStyle(foldWidget.style, \"height\", foldHeight);\n            dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n        } else {\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n            }\n        }\n        \n        var text = (gutterRenderer\n            ? gutterRenderer.getText(session, row)\n            : row + firstLineNumber).toString();\n            \n        if (text !== textNode.data) {\n            textNode.data = text;\n        }\n        \n        dom.setStyle(cell.element.style, \"height\", this.$lines.computeLineHeight(row, config, session) + \"px\");\n        dom.setStyle(cell.element.style, \"top\", this.$lines.computeLineTop(row, config, session) + \"px\");\n        \n        cell.text = text;\n        return cell;\n    };\n\n    this.$fixedWidth = false;\n    \n    this.$highlightGutterLine = true;\n    this.$renderer = \"\";\n    this.setHighlightGutterLine = function(highlightGutterLine) {\n        this.$highlightGutterLine = highlightGutterLine;\n    };\n    \n    this.$showLineNumbers = true;\n    this.$renderer = \"\";\n    this.setShowLineNumbers = function(show) {\n        this.$renderer = !show && {\n            getWidth: function() {return 0;},\n            getText: function() {return \"\";}\n        };\n    };\n    \n    this.getShowLineNumbers = function() {\n        return this.$showLineNumbers;\n    };\n    \n    this.$showFoldWidgets = true;\n    this.setShowFoldWidgets = function(show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    };\n    \n    this.getShowFoldWidgets = function() {\n        return this.$showFoldWidgets;\n    };\n\n    this.$computePadding = function() {\n        if (!this.element.firstChild)\n            return {left: 0, right: 0};\n        var style = dom.computedStyle(this.element.firstChild);\n        this.$padding = {};\n        this.$padding.left = (parseInt(style.borderLeftWidth) || 0)\n            + (parseInt(style.paddingLeft) || 0) + 1;\n        this.$padding.right = (parseInt(style.borderRightWidth) || 0)\n            + (parseInt(style.paddingRight) || 0);\n        return this.$padding;\n    };\n\n    this.getRegion = function(point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    };\n\n}).call(Gutter.prototype);\n\nfunction onCreateCell(element) {\n    var textNode = document.createTextNode('');\n    element.appendChild(textNode);\n    \n    var foldWidget = dom.createElement(\"span\");\n    element.appendChild(foldWidget);\n    \n    return element;\n}\n\nexports.Gutter = Gutter;\n\n});\n\nace.define(\"ace/layer/marker\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../range\").Range;\nvar dom = require(\"../lib/dom\");\n\nvar Marker = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_marker-layer\";\n    parentEl.appendChild(this.element);\n};\n\n(function() {\n\n    this.$padding = 0;\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n    this.setSession = function(session) {\n        this.session = session;\n    };\n    \n    this.setMarkers = function(markers) {\n        this.markers = markers;\n    };\n    \n    this.elt = function(className, css) {\n        var x = this.i != -1 && this.element.childNodes[this.i];\n        if (!x) {\n            x = document.createElement(\"div\");\n            this.element.appendChild(x);\n            this.i = -1;\n        } else {\n            this.i++;\n        }\n        x.style.cssText = css;\n        x.className = className;\n    };\n\n    this.update = function(config) {\n        if (!config) return;\n\n        this.config = config;\n\n        this.i = 0;\n        var html;\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty()) continue;\n\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + range.start.column * config.characterWidth;\n                marker.renderer(html, range, left, top, config);\n            } else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            } else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            } else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            } else {\n                this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n            }\n        }\n        if (this.i !=-1) {\n            while (this.i < this.element.childElementCount)\n                this.element.removeChild(this.element.lastChild);\n        }\n    };\n\n    this.$getTop = function(row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    };\n\n    function getBorderClass(tl, tr, br, bl) {\n        return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n    }\n    this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0; \n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            this.drawSingleLineMarker(stringBuilder, lineRange, \n                clazz + (row == start  ? \" ace_start\" : \"\") + \" ace_br\"\n                    + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end),\n                layerConfig, row == end ? 0 : 1, extraStyle);\n        }\n    };\n    this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var padding = this.$padding;\n        var height = config.lineHeight;\n        var top = this.$getTop(range.start.row, config);\n        var left = padding + range.start.column * config.characterWidth;\n        extraStyle = extraStyle || \"\";\n\n        if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n           var range1 = range.clone();\n           range1.end.row = range1.start.row;\n           range1.end.column = this.session.getLine(range1.start.row).length;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        } else {\n            this.elt(\n                clazz + \" ace_br1 ace_start\",\n                \"height:\"+ height+ \"px;\"+ \"right:0;\"+ \"top:\"+top+ \"px;left:\"+ left+ \"px;\" + (extraStyle || \"\")\n            );\n        }\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n           var range1 = range.clone();\n           range1.start.row = range1.end.row;\n           range1.start.column = 0;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        } else {\n            top = this.$getTop(range.end.row, config);\n            var width = range.end.column * config.characterWidth;\n\n            this.elt(\n                clazz + \" ace_br12\",\n                \"height:\"+ height+ \"px;\"+\n                \"width:\"+ width+ \"px;\"+\n                \"top:\"+ top+ \"px;\"+\n                \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n            );\n        }\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        \n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n\n        this.elt(\n            clazz + (radiusClass ? \" ace_br\" + radiusClass : \"\"),\n            \"height:\"+ height+ \"px;\"+\n            \"right:0;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n        );\n    };\n    this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        if (this.session.$bidiHandler.isBidiRow(range.start.row))\n            return this.drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle);\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"width:\"+ width+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ left+ \"px;\"+ (extraStyle || \"\")\n        );\n    };\n    this.drawBidiSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n\n        selections.forEach(function(selection) {\n            this.elt(\n                clazz,\n                \"height:\" + height + \"px;\" +\n                \"width:\" + selection.width + (extraLength || 0) + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + (padding + selection.left) + \"px;\" + (extraStyle || \"\")\n            );\n        }, this);\n    };\n\n    this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    };\n    \n    this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    };\n\n}).call(Marker.prototype);\n\nexports.Marker = Marker;\n\n});\n\nace.define(\"ace/layer/text\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/layer/lines\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar Lines = require(\"./lines\").Lines;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar Text = function(parentEl) {\n    this.dom = dom; \n    this.element = this.dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_text-layer\";\n    parentEl.appendChild(this.element);\n    this.$updateEolChar = this.$updateEolChar.bind(this);\n    this.$lines = new Lines(this.element);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.EOF_CHAR = \"\\xB6\";\n    this.EOL_CHAR_LF = \"\\xAC\";\n    this.EOL_CHAR_CRLF = \"\\xa4\";\n    this.EOL_CHAR = this.EOL_CHAR_LF;\n    this.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\n    this.SPACE_CHAR = \"\\xB7\";\n    this.$padding = 0;\n    this.MAX_LINE_LENGTH = 10000;\n\n    this.$updateEolChar = function() {\n        var doc = this.session.doc;\n        var unixMode = doc.getNewLineCharacter() == \"\\n\" && doc.getNewLineMode() != \"windows\";\n        var EOL_CHAR = unixMode ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    };\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.element.style.margin = \"0 \" + padding + \"px\";\n    };\n\n    this.getLineHeight = function() {\n        return this.$fontMetrics.$characterSize.height || 0;\n    };\n\n    this.getCharacterWidth = function() {\n        return this.$fontMetrics.$characterSize.width || 0;\n    };\n    \n    this.$setFontMetrics = function(measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\", function(e) {\n            this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    };\n\n    this.checkForSizeChanges = function() {\n        this.$fontMetrics.checkForSizeChanges();\n    };\n    this.$pollSizeChanges = function() {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    };\n    this.setSession = function(session) {\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    };\n\n    this.showInvisibles = false;\n    this.showSpaces = false;\n    this.showTabs = false;\n    this.showEOL = false;\n    this.setShowInvisibles = function(showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n\n        this.showInvisibles = showInvisibles;\n        if (typeof showInvisibles == \"string\") {\n            this.showSpaces = /tab/i.test(showInvisibles);\n            this.showTabs = /space/i.test(showInvisibles);\n            this.showEOL = /eol/i.test(showInvisibles);\n        } else {\n            this.showSpaces = this.showTabs = this.showEOL = showInvisibles;\n        }\n        this.$computeTabString();\n        return true;\n    };\n\n    this.displayIndentGuides = true;\n    this.setDisplayIndentGuides = function(display) {\n        if (this.displayIndentGuides == display)\n            return false;\n\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    };\n\n    this.$tabStrings = [];\n    this.onChangeTabSize =\n    this.$computeTabString = function() {\n        var tabSize = this.session.getTabSize();\n        this.tabSize = tabSize;\n        var tabStr = this.$tabStrings = [0];\n        for (var i = 1; i < tabSize + 1; i++) {\n            if (this.showTabs) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_tab\";\n                span.textContent = lang.stringRepeat(this.TAB_CHAR, i);\n                tabStr.push(span);\n            } else {\n                tabStr.push(this.dom.createTextNode(lang.stringRepeat(\" \", i), this.element));\n            }\n        }\n        if (this.displayIndentGuides) {\n            this.$indentGuideRe =  /\\s\\S| \\t|\\t |\\s$/;\n            var className = \"ace_indent-guide\";\n            var spaceClass = this.showSpaces ? \" ace_invisible ace_invisible_space\" : \"\";\n            var spaceContent = this.showSpaces\n                ? lang.stringRepeat(this.SPACE_CHAR, this.tabSize)\n                : lang.stringRepeat(\" \", this.tabSize);\n\n            var tabClass = this.showTabs ? \" ace_invisible ace_invisible_tab\" : \"\";\n            var tabContent = this.showTabs \n                ? lang.stringRepeat(this.TAB_CHAR, this.tabSize)\n                : spaceContent;\n\n            var span = this.dom.createElement(\"span\");\n            span.className = className + spaceClass;\n            span.textContent = spaceContent;\n            this.$tabStrings[\" \"] = span;\n            \n            var span = this.dom.createElement(\"span\");\n            span.className = className + tabClass;\n            span.textContent = tabContent;\n            this.$tabStrings[\"\\t\"] = span;\n        }\n    };\n\n    this.updateLines = function(config, firstRow, lastRow) {\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            return this.update(config);\n        }\n        \n        this.config = config;\n\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                } else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx ++;\n        }\n\n        var heightChanged = false;\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row :Infinity;\n            }\n            if (row > last)\n                break;\n\n            var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                this.dom.removeChildren(lineElement);\n                this.$renderLine(\n                    lineElement, row, row == foldStart ? foldLine : false\n                );\n\n                if (heightChanged)\n                    lineElement.style.top = this.$lines.computeLineTop(row, config, this.session) + \"px\";\n\n                var height = (config.lineHeight * this.session.getRowLength(row)) + \"px\";\n                if (lineElement.style.height != height) {\n                    heightChanged = true;\n                    lineElement.style.height = height;\n                }\n            }\n            row++;\n        }\n        if (heightChanged) {\n            while (lineElementsIdx < this.$lines.cells.length) {\n                var cell = this.$lines.cells[lineElementsIdx++];\n                cell.element.style.top = this.$lines.computeLineTop(cell.row, config, this.session) + \"px\";\n            }\n        }\n    };\n\n    this.scrollLines = function(config) {\n        var oldConfig = this.config;\n        this.config = config;\n\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n            \n        this.$lines.moveContainer(config);\n        \n        var lastRow = config.lastRow;\n        var oldLastRow = oldConfig ? oldConfig.lastRow : -1;\n\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (config.lastRow > oldConfig.lastRow) {\n            this.$lines.push(this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow));\n        }\n    };\n\n    this.$renderLinesFragment = function(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var line = this.$lines.createCell(row, config, this.session);\n            \n            var lineEl = line.element;\n            this.dom.removeChildren(lineEl);\n            dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\");\n            dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\");\n            this.$renderLine(lineEl, row, row == foldStart ? foldLine : false);\n\n            if (this.$useLineGroups()) {\n                lineEl.className = \"ace_line_group\";\n            } else {\n                lineEl.className = \"ace_line\";\n            }\n            fragment.push(line);\n\n            row++;\n        }\n        return fragment;\n    };\n\n    this.update = function(config) {\n        this.$lines.moveContainer(config);\n        \n        this.config = config;\n\n        var firstRow = config.firstRow;\n        var lastRow = config.lastRow;\n\n        var lines = this.$lines;\n        while (lines.getLength())\n            lines.pop();\n            \n        lines.push(this.$renderLinesFragment(config, firstRow, lastRow));\n    };\n\n    this.$textToken = {\n        \"text\": true,\n        \"rparen\": true,\n        \"lparen\": true\n    };\n\n    this.$renderToken = function(parent, screenColumn, token, value) {\n        var self = this;\n        var re = /(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g;\n        \n        var valueFragment = this.dom.createFragment(this.element);\n\n        var m;\n        var i = 0;\n        while (m = re.exec(value)) {\n            var tab = m[1];\n            var simpleSpace = m[2];\n            var controlCharacter = m[3];\n            var cjkSpace = m[4];\n            var cjk = m[5];\n            \n            if (!self.showSpaces && simpleSpace)\n                continue;\n\n            var before = i != m.index ? value.slice(i, m.index) : \"\";\n\n            i = m.index + m[0].length;\n            \n            if (before) {\n                valueFragment.appendChild(this.dom.createTextNode(before, this.element));\n            }\n                \n            if (tab) {\n                var tabSize = self.session.getScreenTabSize(screenColumn + m.index);\n                valueFragment.appendChild(self.$tabStrings[tabSize].cloneNode(true));\n                screenColumn += tabSize - 1;\n            } else if (simpleSpace) {\n                if (self.showSpaces) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_space\";\n                    span.textContent = lang.stringRepeat(self.SPACE_CHAR, simpleSpace.length);\n                    valueFragment.appendChild(span);\n                } else {\n                    valueFragment.appendChild(this.com.createTextNode(simpleSpace, this.element));\n                }\n            } else if (controlCharacter) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_space ace_invalid\";\n                span.textContent = lang.stringRepeat(self.SPACE_CHAR, controlCharacter.length);\n                valueFragment.appendChild(span);\n            } else if (cjkSpace) {\n                screenColumn += 1;\n                \n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = self.showSpaces ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                span.textContent = self.showSpaces ? self.SPACE_CHAR : cjkSpace;\n                valueFragment.appendChild(span);\n            } else if (cjk) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = \"ace_cjk\";\n                span.textContent = cjk;\n                valueFragment.appendChild(span);\n            }\n        }\n        \n        valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element));\n\n        if (!this.$textToken[token.type]) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            var span = this.dom.createElement(\"span\");\n            if (token.type == \"fold\")\n                span.style.width = (token.value.length * this.config.characterWidth) + \"px\";\n                \n            span.className = classes;\n            span.appendChild(valueFragment);\n            \n            parent.appendChild(span);\n        }\n        else {\n            parent.appendChild(valueFragment);\n        }\n        \n        return screenColumn + value.length;\n    };\n\n    this.renderIndentGuide = function(parent, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            var count = cols/this.tabSize;\n            for (var i=0; i<count; i++) {\n                parent.appendChild(this.$tabStrings[\" \"].cloneNode(true));\n            }\n            return value.substr(cols);\n        } else if (value[0] == \"\\t\") {\n            for (var i=0; i<cols; i++) {\n                parent.appendChild(this.$tabStrings[\"\\t\"].cloneNode(true));\n            }\n            return value.substr(cols);\n        }\n        return value;\n    };\n\n    this.$createLineElement = function(parent) {\n        var lineEl = this.dom.createElement(\"div\");\n        lineEl.className = \"ace_line\";\n        lineEl.style.height = this.config.lineHeight + \"px\";\n        \n        return lineEl;\n    };\n\n    this.$renderWrappedLine = function(parent, tokens, splits) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n\n        var lineEl = this.$createLineElement();\n        parent.appendChild(lineEl);\n        \n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(lineEl, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderToken(lineEl, screenColumn, token, value);\n                chars += value.length;\n            } else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderToken(\n                        lineEl, screenColumn,\n                        token, value.substring(0, splitChars - chars)\n                    );\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n\n                    lineEl = this.$createLineElement();\n                    parent.appendChild(lineEl);\n\n                    lineEl.appendChild(this.dom.createTextNode(lang.stringRepeat(\"\\xa0\", splits.indent), this.element));\n\n                    split ++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderToken(\n                        lineEl, screenColumn, token, value\n                    );\n                }\n            }\n        }\n        \n        if (splits[splits.length - 1] > this.MAX_LINE_LENGTH)\n            this.$renderOverflowMessage(lineEl, screenColumn, null, \"\", true);\n    };\n\n    this.$renderSimpleLine = function(parent, tokens) {\n        var screenColumn = 0;\n        var token = tokens[0];\n        var value = token.value;\n        if (this.displayIndentGuides)\n            value = this.renderIndentGuide(parent, value);\n        if (value)\n            screenColumn = this.$renderToken(parent, screenColumn, token, value);\n        for (var i = 1; i < tokens.length; i++) {\n            token = tokens[i];\n            value = token.value;\n            if (screenColumn + value.length > this.MAX_LINE_LENGTH)\n                return this.$renderOverflowMessage(parent, screenColumn, token, value);\n            screenColumn = this.$renderToken(parent, screenColumn, token, value);\n        }\n    };\n    \n    this.$renderOverflowMessage = function(parent, screenColumn, token, value, hide) {\n        token && this.$renderToken(parent, screenColumn, token,\n            value.slice(0, this.MAX_LINE_LENGTH - screenColumn));\n            \n        var overflowEl = this.dom.createElement(\"span\");\n        overflowEl.className = \"ace_inline_button ace_keyword ace_toggle_wrap\";\n        overflowEl.textContent = hide ? \"<hide>\" : \"<click to see more...>\";\n        \n        parent.appendChild(overflowEl);        \n    };\n    this.$renderLine = function(parent, row, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n\n        var lastLineEl = parent;\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length) {\n                this.$renderWrappedLine(parent, tokens, splits);\n                var lastLineEl = parent.lastChild;\n            } else {\n                var lastLineEl = parent;\n                if (this.$useLineGroups()) {\n                    lastLineEl = this.$createLineElement();\n                    parent.appendChild(lastLineEl);\n                }\n                this.$renderSimpleLine(lastLineEl, tokens);\n            }\n        } else if (this.$useLineGroups()) {\n            lastLineEl = this.$createLineElement();\n            parent.appendChild(lastLineEl);\n        }\n\n        if (this.showEOL && lastLineEl) {\n            if (foldLine)\n                row = foldLine.end.row;\n\n            var invisibleEl = this.dom.createElement(\"span\");\n            invisibleEl.className = \"ace_invisible ace_invisible_eol\";\n            invisibleEl.textContent = row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR;\n            \n            lastLineEl.appendChild(invisibleEl);\n        }\n    };\n\n    this.$getFoldLineTokens = function(row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n\n                col = from + value.length;\n                idx += 1;\n            }\n\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                } else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n\n        var tokens = session.getTokens(row);\n        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            } else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n\n        return renderTokens;\n    };\n\n    this.$useLineGroups = function() {\n        return this.session.getUseWrapMode();\n    };\n\n    this.destroy = function() {};\n}).call(Text.prototype);\n\nexports.Text = Text;\n\n});\n\nace.define(\"ace/layer/cursor\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"../lib/dom\");\n\nvar Cursor = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_cursor-layer\";\n    parentEl.appendChild(this.element);\n    \n    this.isVisible = false;\n    this.isBlinking = true;\n    this.blinkInterval = 1000;\n    this.smoothBlinking = false;\n\n    this.cursors = [];\n    this.cursor = this.addCursor();\n    dom.addCssClass(this.element, \"ace_hidden-cursors\");\n    this.$updateCursors = this.$updateOpacity.bind(this);\n};\n\n(function() {\n    \n    this.$updateOpacity = function(val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            dom.setStyle(cursors[i].style, \"opacity\", val ? \"\" : \"0\");\n    };\n\n    this.$startCssAnimation = function() {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            cursors[i].style.animationDuration = this.blinkInterval + \"ms\";\n\n        setTimeout(function() {\n            dom.addCssClass(this.element, \"ace_animate-blinking\");\n        }.bind(this));\n    };\n    \n    this.$stopCssAnimation = function() {\n        dom.removeCssClass(this.element, \"ace_animate-blinking\");\n    };\n\n    this.$padding = 0;\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n\n    this.setSession = function(session) {\n        this.session = session;\n    };\n\n    this.setBlinking = function(blinking) {\n        if (blinking != this.isBlinking) {\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    };\n\n    this.setBlinkInterval = function(blinkInterval) {\n        if (blinkInterval != this.blinkInterval) {\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    };\n\n    this.setSmoothBlinking = function(smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.restartTimer();\n        }\n    };\n\n    this.addCursor = function() {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    };\n\n    this.removeCursor = function() {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    };\n\n    this.hideCursor = function() {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.showCursor = function() {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.restartTimer = function() {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        this.$stopCssAnimation();\n\n        if (this.smoothBlinking) {\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        \n        update(true);\n\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible) {\n            this.$stopCssAnimation();\n            return;\n        }\n\n        if (this.smoothBlinking) {\n            setTimeout(function(){\n                dom.addCssClass(this.element, \"ace_smooth-blinking\");\n            }.bind(this));\n        }\n        \n        if (dom.HAS_CSS_ANIMATION) {\n            this.$startCssAnimation();\n        } else {\n            var blink = function(){\n                this.timeoutId = setTimeout(function() {\n                    update(false);\n                }, 0.6 * this.blinkInterval);\n            }.bind(this);\n    \n            this.intervalId = setInterval(function() {\n                update(true);\n                blink();\n            }, this.blinkInterval);\n            blink();\n        }\n    };\n\n    this.getPixelPosition = function(position, onScreen) {\n        if (!this.config || !this.session)\n            return {left : 0, top : 0};\n\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n\n        return {left : cursorLeft, top : cursorTop};\n    };\n\n    this.isCursorInView = function(pixelPos, config) {\n        return pixelPos.top >= 0 && pixelPos.top < config.maxHeight;\n    };\n\n    this.update = function(config) {\n        this.config = config;\n\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n\n        if (selections === undefined || selections.length === 0){\n            selections = [{cursor: null}];\n        }\n\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                 pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n\n            var element = this.cursors[cursorIndex++] || this.addCursor();\n            var style = element.style;\n            \n            if (!this.drawCursor) {\n                if (!this.isCursorInView(pixelPos, config)) {\n                    dom.setStyle(style, \"display\", \"none\");\n                } else {\n                    dom.setStyle(style, \"display\", \"block\");\n                    dom.translate(element, pixelPos.left, pixelPos.top);\n                    dom.setStyle(style, \"width\", Math.round(config.characterWidth) + \"px\");\n                    dom.setStyle(style, \"height\", config.lineHeight + \"px\");\n                }\n            } else {\n                this.drawCursor(element, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    };\n    \n    this.drawCursor = null;\n\n    this.$setOverwrite = function(overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    };\n\n    this.destroy = function() {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    };\n\n}).call(Cursor.prototype);\n\nexports.Cursor = Cursor;\n\n});\n\nace.define(\"ace/scrollbar\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar MAX_SCROLL_H = 0x8000;\nvar ScrollBar = function(parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_scrollbar ace_scrollbar\" + this.classSuffix;\n\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"ace_scrollbar-inner\";\n    this.inner.textContent = \"\\xa0\";\n    this.element.appendChild(this.inner);\n\n    parent.appendChild(this.element);\n\n    this.setVisible(false);\n    this.skipEvent = false;\n\n    event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n    event.addListener(this.element, \"mousedown\", event.preventDefault);\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n\n    this.setVisible = function(isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n}).call(ScrollBar.prototype);\nvar VScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n    renderer.$scrollbarWidth = \n    this.width = dom.scrollbarWidth(parent.ownerDocument);\n    this.inner.style.width =\n    this.element.style.width = (this.width || 15) + 5 + \"px\";\n    this.$minWidth = 0;\n};\n\noop.inherits(VScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-v';\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n        this.skipEvent = false;\n    };\n    this.getWidth = function() {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n    this.setHeight = function(height) {\n        this.element.style.height = height + \"px\";\n    };\n    this.setInnerHeight = \n    this.setScrollHeight = function(height) {\n        this.scrollHeight = height;\n        if (height > MAX_SCROLL_H) {\n            this.coeff = MAX_SCROLL_H / height;\n            height = MAX_SCROLL_H;\n        } else if (this.coeff != 1) {\n            this.coeff = 1;\n        }\n        this.inner.style.height = height + \"px\";\n    };\n    this.setScrollTop = function(scrollTop) {\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    };\n\n}).call(VScrollBar.prototype);\nvar HScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n    this.height = renderer.$scrollbarWidth;\n    this.inner.style.height =\n    this.element.style.height = (this.height || 15) + 5 + \"px\";\n};\n\noop.inherits(HScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-h';\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n        this.skipEvent = false;\n    };\n    this.getHeight = function() {\n        return this.isVisible ? this.height : 0;\n    };\n    this.setWidth = function(width) {\n        this.element.style.width = width + \"px\";\n    };\n    this.setInnerWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n    this.setScrollLeft = function(scrollLeft) {\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    };\n\n}).call(HScrollBar.prototype);\n\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n});\n\nace.define(\"ace/renderloop\",[\"require\",\"exports\",\"module\",\"ace/lib/event\"], function(require, exports, module) {\n\"use strict\";\n\nvar event = require(\"./lib/event\");\n\n\nvar RenderLoop = function(onRender, win) {\n    this.onRender = onRender;\n    this.pending = false;\n    this.changes = 0;\n    this.$recursionLimit = 2;\n    this.window = win || window;\n    var _self = this;\n    this._flush = function(ts) {\n        _self.pending = false;\n        var changes = _self.changes;\n\n        if (changes) {\n            event.blockIdle(100);\n            _self.changes = 0;\n            _self.onRender(changes);\n        }\n        \n        if (_self.changes) {\n            if (_self.$recursionLimit-- < 0) return;\n            _self.schedule();\n        } else {\n            _self.$recursionLimit = 2;\n        }\n    };\n};\n\n(function() {\n\n    this.schedule = function(change) {\n        this.changes = this.changes | change;\n        if (this.changes && !this.pending) {\n            event.nextFrame(this._flush);\n            this.pending = true;\n        }\n    };\n\n    this.clear = function(change) {\n        var changes = this.changes;\n        this.changes = 0;\n        return changes;\n    };\n\n}).call(RenderLoop.prototype);\n\nexports.RenderLoop = RenderLoop;\n});\n\nace.define(\"ace/layer/font_metrics\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/lib/lang\",\"ace/lib/event\",\"ace/lib/useragent\",\"ace/lib/event_emitter\"], function(require, exports, module) {\n\nvar oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar CHAR_COUNT = 256;\nvar USE_OBSERVER = typeof ResizeObserver == \"function\";\nvar L = 200;\n\nvar FontMetrics = exports.FontMetrics = function(parentEl) {\n    this.el = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.el.style, true);\n    \n    this.$main = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$main.style);\n    \n    this.$measureNode = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$measureNode.style);\n    \n    \n    this.el.appendChild(this.$main);\n    this.el.appendChild(this.$measureNode);\n    parentEl.appendChild(this.el);\n    \n    this.$measureNode.textContent = lang.stringRepeat(\"X\", CHAR_COUNT);\n    \n    this.$characterSize = {width: 0, height: 0};\n    \n    \n    if (USE_OBSERVER)\n        this.$addObserver();\n    else\n        this.checkForSizeChanges();\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n        \n    this.$characterSize = {width: 0, height: 0};\n    \n    this.$setMeasureNodeStyles = function(style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        } else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    };\n\n    this.checkForSizeChanges = function(size) {\n        if (size === undefined)\n            size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", {data: size});\n        }\n    };\n    \n    this.$addObserver = function() {\n        var self = this;\n        this.$observer = new window.ResizeObserver(function(e) {\n            self.checkForSizeChanges();\n        });\n        this.$observer.observe(this.$measureNode);\n    };\n\n    this.$pollSizeChanges = function() {\n        if (this.$pollSizeChangesTimer || this.$observer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n        \n        return this.$pollSizeChangesTimer = event.onIdle(function cb() {\n            self.checkForSizeChanges();\n            event.onIdle(cb, 500);\n        }, 500);\n    };\n    \n    this.setPolling = function(val) {\n        if (val) {\n            this.$pollSizeChanges();\n        } else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    };\n\n    this.$measureSizes = function(node) {\n        var size = {\n            height: (node || this.$measureNode).clientHeight,\n            width: (node || this.$measureNode).clientWidth / CHAR_COUNT\n        };\n        if (size.width === 0 || size.height === 0)\n            return null;\n        return size;\n    };\n\n    this.$measureCharWidth = function(ch) {\n        this.$main.textContent = lang.stringRepeat(ch, CHAR_COUNT);\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / CHAR_COUNT;\n    };\n    \n    this.getCharacterWidth = function(ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    };\n\n    this.destroy = function() {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$observer)\n            this.$observer.disconnect();\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    };\n\n    \n    this.$getZoom = function getZoom(element) {\n        if (!element || !element.parentElement) return 1;\n        return (window.getComputedStyle(element).zoom || 1) * getZoom(element.parentElement);\n    };\n    this.$initTransformMeasureNodes = function() {\n        var t = function(t, l) {\n            return [\"div\", {\n                style: \"position: absolute;top:\" + t + \"px;left:\" + l + \"px;\"\n            }];\n        };\n        this.els = dom.buildDom([t(0, 0), t(L, 0), t(0, L), t(L, L)], this.el);\n    };\n    this.transformCoordinates = function(clientPos, elPos) {\n        if (clientPos) {\n            var zoom = this.$getZoom(this.el);\n            clientPos = mul(1 / zoom, clientPos);\n        }\n        function solve(l1, l2, r) {\n            var det = l1[1] * l2[0] - l1[0] * l2[1];\n            return [\n                (-l2[1] * r[0] + l2[0] * r[1]) / det,\n                (+l1[1] * r[0] - l1[0] * r[1]) / det\n            ];\n        }\n        function sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\n        function add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\n        function mul(a, b) { return [a * b[0], a * b[1]]; }\n\n        if (!this.els)\n            this.$initTransformMeasureNodes();\n        \n        function p(el) {\n            var r = el.getBoundingClientRect();\n            return [r.left, r.top];\n        }\n\n        var a = p(this.els[0]);\n        var b = p(this.els[1]);\n        var c = p(this.els[2]);\n        var d = p(this.els[3]);\n\n        var h = solve(sub(d, b), sub(d, c), sub(add(b, c), add(d, a)));\n\n        var m1 = mul(1 + h[0], sub(b, a));\n        var m2 = mul(1 + h[1], sub(c, a));\n        \n        if (elPos) {\n            var x = elPos;\n            var k = h[0] * x[0] / L + h[1] * x[1] / L + 1;\n            var ut = add(mul(x[0], m1), mul(x[1], m2));\n            return  add(mul(1 / k / L, ut), a);\n        }\n        var u = sub(clientPos, a);\n        var f = solve(sub(m1, mul(h[0], u)), sub(m2, mul(h[1], u)), u);\n        return mul(L, f);\n    };\n    \n}).call(FontMetrics.prototype);\n\n});\n\nace.define(\"ace/virtual_renderer\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/dom\",\"ace/config\",\"ace/layer/gutter\",\"ace/layer/marker\",\"ace/layer/text\",\"ace/layer/cursor\",\"ace/scrollbar\",\"ace/scrollbar\",\"ace/renderloop\",\"ace/layer/font_metrics\",\"ace/lib/event_emitter\",\"ace/lib/useragent\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar config = require(\"./config\");\nvar GutterLayer = require(\"./layer/gutter\").Gutter;\nvar MarkerLayer = require(\"./layer/marker\").Marker;\nvar TextLayer = require(\"./layer/text\").Text;\nvar CursorLayer = require(\"./layer/cursor\").Cursor;\nvar HScrollBar = require(\"./scrollbar\").HScrollBar;\nvar VScrollBar = require(\"./scrollbar\").VScrollBar;\nvar RenderLoop = require(\"./renderloop\").RenderLoop;\nvar FontMetrics = require(\"./layer/font_metrics\").FontMetrics;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar editorCss = \"\\\n.ace_br1 {border-top-left-radius    : 3px;}\\\n.ace_br2 {border-top-right-radius   : 3px;}\\\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\\\n.ace_br4 {border-bottom-right-radius: 3px;}\\\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\\\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\\\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\\\n.ace_br8 {border-bottom-left-radius : 3px;}\\\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\\\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\\\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\\\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\\\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\\\n.ace_editor {\\\nposition: relative;\\\noverflow: hidden;\\\npadding: 0;\\\nfont: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\\\ndirection: ltr;\\\ntext-align: left;\\\n-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\\\n}\\\n.ace_scroller {\\\nposition: absolute;\\\noverflow: hidden;\\\ntop: 0;\\\nbottom: 0;\\\nbackground-color: inherit;\\\n-ms-user-select: none;\\\n-moz-user-select: none;\\\n-webkit-user-select: none;\\\nuser-select: none;\\\ncursor: text;\\\n}\\\n.ace_content {\\\nposition: absolute;\\\nbox-sizing: border-box;\\\nmin-width: 100%;\\\ncontain: style size layout;\\\nfont-variant-ligatures: no-common-ligatures;\\\n}\\\n.ace_dragging .ace_scroller:before{\\\nposition: absolute;\\\ntop: 0;\\\nleft: 0;\\\nright: 0;\\\nbottom: 0;\\\ncontent: '';\\\nbackground: rgba(250, 250, 250, 0.01);\\\nz-index: 1000;\\\n}\\\n.ace_dragging.ace_dark .ace_scroller:before{\\\nbackground: rgba(0, 0, 0, 0.01);\\\n}\\\n.ace_selecting, .ace_selecting * {\\\ncursor: text !important;\\\n}\\\n.ace_gutter {\\\nposition: absolute;\\\noverflow : hidden;\\\nwidth: auto;\\\ntop: 0;\\\nbottom: 0;\\\nleft: 0;\\\ncursor: default;\\\nz-index: 4;\\\n-ms-user-select: none;\\\n-moz-user-select: none;\\\n-webkit-user-select: none;\\\nuser-select: none;\\\ncontain: style size layout;\\\n}\\\n.ace_gutter-active-line {\\\nposition: absolute;\\\nleft: 0;\\\nright: 0;\\\n}\\\n.ace_scroller.ace_scroll-left {\\\nbox-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\\\n}\\\n.ace_gutter-cell {\\\nposition: absolute;\\\ntop: 0;\\\nleft: 0;\\\nright: 0;\\\npadding-left: 19px;\\\npadding-right: 6px;\\\nbackground-repeat: no-repeat;\\\n}\\\n.ace_gutter-cell.ace_error {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\\\");\\\nbackground-repeat: no-repeat;\\\nbackground-position: 2px center;\\\n}\\\n.ace_gutter-cell.ace_warning {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\\\");\\\nbackground-position: 2px center;\\\n}\\\n.ace_gutter-cell.ace_info {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\\\");\\\nbackground-position: 2px center;\\\n}\\\n.ace_dark .ace_gutter-cell.ace_info {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_scrollbar {\\\ncontain: strict;\\\nposition: absolute;\\\nright: 0;\\\nbottom: 0;\\\nz-index: 6;\\\n}\\\n.ace_scrollbar-inner {\\\nposition: absolute;\\\ncursor: text;\\\nleft: 0;\\\ntop: 0;\\\n}\\\n.ace_scrollbar-v{\\\noverflow-x: hidden;\\\noverflow-y: scroll;\\\ntop: 0;\\\n}\\\n.ace_scrollbar-h {\\\noverflow-x: scroll;\\\noverflow-y: hidden;\\\nleft: 0;\\\n}\\\n.ace_print-margin {\\\nposition: absolute;\\\nheight: 100%;\\\n}\\\n.ace_text-input {\\\nposition: absolute;\\\nz-index: 0;\\\nwidth: 0.5em;\\\nheight: 1em;\\\nopacity: 0;\\\nbackground: transparent;\\\n-moz-appearance: none;\\\nappearance: none;\\\nborder: none;\\\nresize: none;\\\noutline: none;\\\noverflow: hidden;\\\nfont: inherit;\\\npadding: 0 1px;\\\nmargin: 0 -1px;\\\ncontain: strict;\\\n-ms-user-select: text;\\\n-moz-user-select: text;\\\n-webkit-user-select: text;\\\nuser-select: text;\\\nwhite-space: pre!important;\\\n}\\\n.ace_text-input.ace_composition {\\\nbackground: transparent;\\\ncolor: inherit;\\\nz-index: 1000;\\\nopacity: 1;\\\n}\\\n.ace_composition_placeholder { color: transparent }\\\n.ace_composition_marker { \\\nborder-bottom: 1px solid;\\\nposition: absolute;\\\nborder-radius: 0;\\\nmargin-top: 1px;\\\n}\\\n[ace_nocontext=true] {\\\ntransform: none!important;\\\nfilter: none!important;\\\nclip-path: none!important;\\\nmask : none!important;\\\ncontain: none!important;\\\nperspective: none!important;\\\nmix-blend-mode: initial!important;\\\nz-index: auto;\\\n}\\\n.ace_layer {\\\nz-index: 1;\\\nposition: absolute;\\\noverflow: hidden;\\\nword-wrap: normal;\\\nwhite-space: pre;\\\nheight: 100%;\\\nwidth: 100%;\\\nbox-sizing: border-box;\\\npointer-events: none;\\\n}\\\n.ace_gutter-layer {\\\nposition: relative;\\\nwidth: auto;\\\ntext-align: right;\\\npointer-events: auto;\\\nheight: 1000000px;\\\ncontain: style size layout;\\\n}\\\n.ace_text-layer {\\\nfont: inherit !important;\\\nposition: absolute;\\\nheight: 1000000px;\\\nwidth: 1000000px;\\\ncontain: style size layout;\\\n}\\\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\\\ncontain: style size layout;\\\nposition: absolute;\\\ntop: 0;\\\nleft: 0;\\\nright: 0;\\\n}\\\n.ace_hidpi .ace_text-layer,\\\n.ace_hidpi .ace_gutter-layer,\\\n.ace_hidpi .ace_content,\\\n.ace_hidpi .ace_gutter {\\\ncontain: strict;\\\nwill-change: transform;\\\n}\\\n.ace_hidpi .ace_text-layer > .ace_line, \\\n.ace_hidpi .ace_text-layer > .ace_line_group {\\\ncontain: strict;\\\n}\\\n.ace_cjk {\\\ndisplay: inline-block;\\\ntext-align: center;\\\n}\\\n.ace_cursor-layer {\\\nz-index: 4;\\\n}\\\n.ace_cursor {\\\nz-index: 4;\\\nposition: absolute;\\\nbox-sizing: border-box;\\\nborder-left: 2px solid;\\\ntransform: translatez(0);\\\n}\\\n.ace_multiselect .ace_cursor {\\\nborder-left-width: 1px;\\\n}\\\n.ace_slim-cursors .ace_cursor {\\\nborder-left-width: 1px;\\\n}\\\n.ace_overwrite-cursors .ace_cursor {\\\nborder-left-width: 0;\\\nborder-bottom: 1px solid;\\\n}\\\n.ace_hidden-cursors .ace_cursor {\\\nopacity: 0.2;\\\n}\\\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\\\nopacity: 0;\\\n}\\\n.ace_smooth-blinking .ace_cursor {\\\ntransition: opacity 0.18s;\\\n}\\\n.ace_animate-blinking .ace_cursor {\\\nanimation-duration: 1000ms;\\\nanimation-timing-function: step-end;\\\nanimation-name: blink-ace-animate;\\\nanimation-iteration-count: infinite;\\\n}\\\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\\\nanimation-duration: 1000ms;\\\nanimation-timing-function: ease-in-out;\\\nanimation-name: blink-ace-animate-smooth;\\\n}\\\n@keyframes blink-ace-animate {\\\nfrom, to { opacity: 1; }\\\n60% { opacity: 0; }\\\n}\\\n@keyframes blink-ace-animate-smooth {\\\nfrom, to { opacity: 1; }\\\n45% { opacity: 1; }\\\n60% { opacity: 0; }\\\n85% { opacity: 0; }\\\n}\\\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\\\nposition: absolute;\\\nz-index: 3;\\\n}\\\n.ace_marker-layer .ace_selection {\\\nposition: absolute;\\\nz-index: 5;\\\n}\\\n.ace_marker-layer .ace_bracket {\\\nposition: absolute;\\\nz-index: 6;\\\n}\\\n.ace_marker-layer .ace_error_bracket {\\\nposition: absolute;\\\nborder-bottom: 1px solid #DE5555;\\\nborder-radius: 0;\\\n}\\\n.ace_marker-layer .ace_active-line {\\\nposition: absolute;\\\nz-index: 2;\\\n}\\\n.ace_marker-layer .ace_selected-word {\\\nposition: absolute;\\\nz-index: 4;\\\nbox-sizing: border-box;\\\n}\\\n.ace_line .ace_fold {\\\nbox-sizing: border-box;\\\ndisplay: inline-block;\\\nheight: 11px;\\\nmargin-top: -2px;\\\nvertical-align: middle;\\\nbackground-image:\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\\\");\\\nbackground-repeat: no-repeat, repeat-x;\\\nbackground-position: center center, top left;\\\ncolor: transparent;\\\nborder: 1px solid black;\\\nborder-radius: 2px;\\\ncursor: pointer;\\\npointer-events: auto;\\\n}\\\n.ace_dark .ace_fold {\\\n}\\\n.ace_fold:hover{\\\nbackground-image:\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\\\"),\\\nurl(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_tooltip {\\\nbackground-color: #FFF;\\\nbackground-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\\\nborder: 1px solid gray;\\\nborder-radius: 1px;\\\nbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\\\ncolor: black;\\\nmax-width: 100%;\\\npadding: 3px 4px;\\\nposition: fixed;\\\nz-index: 999999;\\\nbox-sizing: border-box;\\\ncursor: default;\\\nwhite-space: pre;\\\nword-wrap: break-word;\\\nline-height: normal;\\\nfont-style: normal;\\\nfont-weight: normal;\\\nletter-spacing: normal;\\\npointer-events: none;\\\n}\\\n.ace_folding-enabled > .ace_gutter-cell {\\\npadding-right: 13px;\\\n}\\\n.ace_fold-widget {\\\nbox-sizing: border-box;\\\nmargin: 0 -12px 0 1px;\\\ndisplay: none;\\\nwidth: 11px;\\\nvertical-align: top;\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\\\");\\\nbackground-repeat: no-repeat;\\\nbackground-position: center;\\\nborder-radius: 3px;\\\nborder: 1px solid transparent;\\\ncursor: pointer;\\\n}\\\n.ace_folding-enabled .ace_fold-widget {\\\ndisplay: inline-block;   \\\n}\\\n.ace_fold-widget.ace_end {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_fold-widget.ace_closed {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\\\");\\\n}\\\n.ace_fold-widget:hover {\\\nborder: 1px solid rgba(0, 0, 0, 0.3);\\\nbackground-color: rgba(255, 255, 255, 0.2);\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\\\n}\\\n.ace_fold-widget:active {\\\nborder: 1px solid rgba(0, 0, 0, 0.4);\\\nbackground-color: rgba(0, 0, 0, 0.05);\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\\\n}\\\n.ace_dark .ace_fold-widget {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\\\");\\\n}\\\n.ace_dark .ace_fold-widget.ace_end {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_dark .ace_fold-widget.ace_closed {\\\nbackground-image: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\\\");\\\n}\\\n.ace_dark .ace_fold-widget:hover {\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\\nbackground-color: rgba(255, 255, 255, 0.1);\\\n}\\\n.ace_dark .ace_fold-widget:active {\\\nbox-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\\\n}\\\n.ace_inline_button {\\\nborder: 1px solid lightgray;\\\ndisplay: inline-block;\\\nmargin: -1px 8px;\\\npadding: 0 5px;\\\npointer-events: auto;\\\ncursor: pointer;\\\n}\\\n.ace_inline_button:hover {\\\nborder-color: gray;\\\nbackground: rgba(200,200,200,0.2);\\\ndisplay: inline-block;\\\npointer-events: auto;\\\n}\\\n.ace_fold-widget.ace_invalid {\\\nbackground-color: #FFB4B4;\\\nborder-color: #DE5555;\\\n}\\\n.ace_fade-fold-widgets .ace_fold-widget {\\\ntransition: opacity 0.4s ease 0.05s;\\\nopacity: 0;\\\n}\\\n.ace_fade-fold-widgets:hover .ace_fold-widget {\\\ntransition: opacity 0.05s ease 0.05s;\\\nopacity:1;\\\n}\\\n.ace_underline {\\\ntext-decoration: underline;\\\n}\\\n.ace_bold {\\\nfont-weight: bold;\\\n}\\\n.ace_nobold .ace_bold {\\\nfont-weight: normal;\\\n}\\\n.ace_italic {\\\nfont-style: italic;\\\n}\\\n.ace_error-marker {\\\nbackground-color: rgba(255, 0, 0,0.2);\\\nposition: absolute;\\\nz-index: 9;\\\n}\\\n.ace_highlight-marker {\\\nbackground-color: rgba(255, 255, 0,0.2);\\\nposition: absolute;\\\nz-index: 8;\\\n}\\\n.ace_mobile-menu {\\\nposition: absolute;\\\nline-height: 1.5;\\\nborder-radius: 4px;\\\n-ms-user-select: none;\\\n-moz-user-select: none;\\\n-webkit-user-select: none;\\\nuser-select: none;\\\nbackground: white;\\\nbox-shadow: 1px 3px 2px grey;\\\nborder: 1px solid #dcdcdc;\\\ncolor: black;\\\n}\\\n.ace_dark > .ace_mobile-menu {\\\nbackground: #333;\\\ncolor: #ccc;\\\nbox-shadow: 1px 3px 2px grey;\\\nborder: 1px solid #444;\\\n}\\\n.ace_mobile-button {\\\npadding: 2px;\\\ncursor: pointer;\\\noverflow: hidden;\\\n}\\\n.ace_mobile-button:hover {\\\nbackground-color: #eee;\\\nopacity:1;\\\n}\\\n.ace_mobile-button:active {\\\nbackground-color: #ddd;\\\n}\\\n.ace_placeholder {\\\nfont-family: arial;\\\ntransform: scale(0.9);\\\ntransform-origin: left;\\\nwhite-space: pre;\\\nopacity: 0.7;\\\nmargin: 0 10px;\\\n}\";\n\nvar useragent = require(\"./lib/useragent\");\nvar HIDE_TEXTAREA = useragent.isIE;\n\ndom.importCssString(editorCss, \"ace_editor.css\");\n\nvar VirtualRenderer = function(container, theme) {\n    var _self = this;\n\n    this.container = container || dom.createElement(\"div\");\n\n    dom.addCssClass(this.container, \"ace_editor\");\n    if (dom.HI_DPI) dom.addCssClass(this.container, \"ace_hidpi\");\n\n    this.setTheme(theme);\n\n    this.$gutter = dom.createElement(\"div\");\n    this.$gutter.className = \"ace_gutter\";\n    this.container.appendChild(this.$gutter);\n    this.$gutter.setAttribute(\"aria-hidden\", true);\n\n    this.scroller = dom.createElement(\"div\");\n    this.scroller.className = \"ace_scroller\";\n    \n    this.container.appendChild(this.scroller);\n\n    this.content = dom.createElement(\"div\");\n    this.content.className = \"ace_content\";\n    this.scroller.appendChild(this.content);\n\n    this.$gutterLayer = new GutterLayer(this.$gutter);\n    this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n\n    this.$markerBack = new MarkerLayer(this.content);\n\n    var textLayer = this.$textLayer = new TextLayer(this.content);\n    this.canvas = textLayer.element;\n\n    this.$markerFront = new MarkerLayer(this.content);\n\n    this.$cursorLayer = new CursorLayer(this.content);\n    this.$horizScroll = false;\n    this.$vScroll = false;\n\n    this.scrollBar = \n    this.scrollBarV = new VScrollBar(this.container, this);\n    this.scrollBarH = new HScrollBar(this.container, this);\n    this.scrollBarV.on(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n    });\n    this.scrollBarH.on(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n    });\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n\n    this.cursorPos = {\n        row : 0,\n        column : 0\n    };\n\n    this.$fontMetrics = new FontMetrics(this.container);\n    this.$textLayer.$setFontMetrics(this.$fontMetrics);\n    this.$textLayer.on(\"changeCharacterSize\", function(e) {\n        _self.updateCharacterSize();\n        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n        _self._signal(\"changeCharacterSize\", e);\n    });\n\n    this.$size = {\n        width: 0,\n        height: 0,\n        scrollerHeight: 0,\n        scrollerWidth: 0,\n        $dirty: true\n    };\n\n    this.layerConfig = {\n        width : 1,\n        padding : 0,\n        firstRow : 0,\n        firstRowScreen: 0,\n        lastRow : 0,\n        lineHeight : 0,\n        characterWidth : 0,\n        minHeight : 1,\n        maxHeight : 1,\n        offset : 0,\n        height : 1,\n        gutterOffset: 1\n    };\n    \n    this.scrollMargin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    \n    this.margin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    \n    this.$keepTextAreaAtCursor = !useragent.isIOS;\n\n    this.$loop = new RenderLoop(\n        this.$renderChanges.bind(this),\n        this.container.ownerDocument.defaultView\n    );\n    this.$loop.schedule(this.CHANGE_FULL);\n\n    this.updateCharacterSize();\n    this.setPadding(4);\n    config.resetOptions(this);\n    config._signal(\"renderer\", this);\n};\n\n(function() {\n\n    this.CHANGE_CURSOR = 1;\n    this.CHANGE_MARKER = 2;\n    this.CHANGE_GUTTER = 4;\n    this.CHANGE_SCROLL = 8;\n    this.CHANGE_LINES = 16;\n    this.CHANGE_TEXT = 32;\n    this.CHANGE_SIZE = 64;\n    this.CHANGE_MARKER_BACK = 128;\n    this.CHANGE_MARKER_FRONT = 256;\n    this.CHANGE_FULL = 512;\n    this.CHANGE_H_SCROLL = 1024;\n\n    oop.implement(this, EventEmitter);\n\n    this.updateCharacterSize = function() {\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n\n        this.layerConfig.characterWidth =\n        this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n        this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n        dom.setStyle(this.scroller.style, \"line-height\", this.lineHeight + \"px\");\n    };\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n            \n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n        \n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        \n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    };\n    this.updateLines = function(firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    };\n\n    this.onChangeNewLineMode = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    };\n    \n    this.onChangeTabSize = function() {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    };\n    this.updateText = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    };\n    this.updateFull = function(force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    };\n    this.updateFontSize = function() {\n        this.$textLayer.checkForSizeChanges();\n    };\n\n    this.$changes = 0;\n    this.$updateSizeAsync = function() {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    };\n    this.onResize = function(force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n\n        \n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n\n        if (force)\n            this.$gutterLayer.$padding = null;\n\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n\n        if (this.resizing)\n            this.resizing = 0;\n        this.scrollBarV.scrollLeft = this.scrollBarV.scrollTop = null;\n    };\n    \n    this.$updateCachedSize = function(force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n\n            changes = changes | this.CHANGE_SCROLL;\n        }\n\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n            \n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n            \n            this.gutterWidth = gutterWidth;\n            \n            dom.setStyle(this.scrollBarH.element.style, \"left\", gutterWidth + \"px\");\n            dom.setStyle(this.scroller.style, \"left\", gutterWidth + this.margin.left + \"px\");\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth() - this.margin.h);\n            dom.setStyle(this.$gutter.style, \"left\", this.margin.left + \"px\");\n            \n            var right = this.scrollBarV.getWidth() + \"px\";\n            dom.setStyle(this.scrollBarH.element.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"bottom\", this.scrollBarH.getHeight());\n\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) {\n                changes |= this.CHANGE_FULL;\n            }\n        }\n        \n        size.$dirty = !width || !height;\n\n        if (changes)\n            this._signal(\"resize\", oldSize);\n\n        return changes;\n    };\n\n    this.onGutterResize = function(width) {\n        var gutterWidth = this.$showGutter ? width : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else {\n            this.$computeLayerConfig();\n        }\n    };\n    this.adjustWrapLimit = function() {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    };\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    };\n    this.getAnimatedScroll = function() {\n        return this.$animatedScroll;\n    };\n    this.setShowInvisibles = function(showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    };\n    this.getShowInvisibles = function() {\n        return this.getOption(\"showInvisibles\");\n    };\n    this.getDisplayIndentGuides = function() {\n        return this.getOption(\"displayIndentGuides\");\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.setOption(\"displayIndentGuides\", display);\n    };\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    };\n    this.getShowPrintMargin = function() {\n        return this.getOption(\"showPrintMargin\");\n    };\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.setOption(\"printMarginColumn\", showPrintMargin);\n    };\n    this.getPrintMarginColumn = function() {\n        return this.getOption(\"printMarginColumn\");\n    };\n    this.getShowGutter = function(){\n        return this.getOption(\"showGutter\");\n    };\n    this.setShowGutter = function(show){\n        return this.setOption(\"showGutter\", show);\n    };\n\n    this.getFadeFoldWidgets = function(){\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    };\n\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n\n    this.$updatePrintMargin = function() {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n\n        var style = this.$printMarginEl.style;\n        style.left = Math.round(this.characterWidth * this.$printMarginColumn + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n        \n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    };\n    this.getContainerElement = function() {\n        return this.container;\n    };\n    this.getMouseEventTarget = function() {\n        return this.scroller;\n    };\n    this.getTextAreaContainer = function() {\n        return this.container;\n    };\n    this.$moveTextAreaToCursor = function() {\n        if (this.$isMousePressed) return;\n        var style = this.textarea.style;\n        var composition = this.$composition;\n        if (!this.$keepTextAreaAtCursor && !composition) {\n            dom.translate(this.textarea, -100, 0);\n            return;\n        }\n        var pixelPos = this.$cursorLayer.$pixelPos;\n        if (!pixelPos)\n            return;\n        if (composition && composition.markerRange)\n            pixelPos = this.$cursorLayer.getPixelPosition(composition.markerRange.start, true);\n        \n        var config = this.layerConfig;\n        var posTop = pixelPos.top;\n        var posLeft = pixelPos.left;\n        posTop -= config.offset;\n\n        var h = composition && composition.useTextareaForIME ? this.lineHeight : HIDE_TEXTAREA ? 0 : 1;\n        if (posTop < 0 || posTop > config.height - h) {\n            dom.translate(this.textarea, 0, 0);\n            return;\n        }\n\n        var w = 1;\n        var maxTop = this.$size.height - h;\n        if (!composition) {\n            posTop += this.lineHeight;\n        }\n        else {\n            if (composition.useTextareaForIME) {\n                var val = this.textarea.value;\n                w = this.characterWidth * (this.session.$getStringScreenWidth(val)[0]);\n            }\n            else {\n                posTop += this.lineHeight + 2;\n            }\n        }\n        \n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n\n        posLeft += this.gutterWidth + this.margin.left;\n\n        dom.setStyle(style, \"height\", h + \"px\");\n        dom.setStyle(style, \"width\", w + \"px\");\n        dom.translate(this.textarea, Math.min(posLeft, this.$size.scrollerWidth - w), Math.min(posTop, maxTop));\n    };\n    this.getFirstVisibleRow = function() {\n        return this.layerConfig.firstRow;\n    };\n    this.getFirstFullyVisibleRow = function() {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    };\n    this.getLastFullyVisibleRow = function() {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    };\n    this.getLastVisibleRow = function() {\n        return this.layerConfig.lastRow;\n    };\n\n    this.$padding = null;\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    };\n    \n    this.setScrollMargin = function(top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    };\n    \n    this.setMargin = function(top, bottom, left, right) {\n        var sm = this.margin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        this.$updateCachedSize(true, this.gutterWidth, this.$size.width, this.$size.height);\n        this.updateFull();\n    };\n    this.getHScrollBarAlwaysVisible = function() {\n        return this.$hScrollBarAlwaysVisible;\n    };\n    this.setHScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    this.getVScrollBarAlwaysVisible = function() {\n        return this.$vScrollBarAlwaysVisible;\n    };\n    this.setVScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    };\n\n    this.$updateScrollBarV = function() {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    };\n    this.$updateScrollBarH = function() {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    };\n    \n    this.$frozen = false;\n    this.freeze = function() {\n        this.$frozen = true;\n    };\n    \n    this.unfreeze = function() {\n        this.$frozen = false;\n    };\n\n    this.$renderChanges = function(changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return; \n        } \n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        \n        this._signal(\"beforeRender\", changes);\n        \n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n\n        var config = this.layerConfig;\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL\n        ) {\n            changes |= this.$computeLayerConfig() | this.$loop.clear();\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;\n                if (st > 0) {\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig() | this.$loop.clear();\n                }\n            }\n            config = this.layerConfig;\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n            \n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            \n            var width = config.width + 2 * this.$padding + \"px\";\n            var height = config.minHeight + \"px\";\n            \n            dom.setStyle(this.content.style, \"width\", width);\n            dom.setStyle(this.content.style, \"height\", height);\n        }\n        if (changes & this.CHANGE_H_SCROLL) {\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller\" : \"ace_scroller ace_scroll-left\";\n        }\n        if (changes & this.CHANGE_FULL) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n        if (changes & this.CHANGE_SCROLL) {\n            this.$changedLines = null;\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n\n            if (this.$showGutter) {\n                if (changes & this.CHANGE_GUTTER || changes & this.CHANGE_LINES)\n                    this.$gutterLayer.update(config);\n                else\n                    this.$gutterLayer.scrollLines(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n\n        if (changes & this.CHANGE_TEXT) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n        }\n        else if (changes & this.CHANGE_CURSOR) {\n            if (this.$highlightGutterLine)\n                this.$gutterLayer.updateLineHighlight(config);\n        }\n\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n\n        this._signal(\"afterRender\", changes);\n    };\n\n    \n    this.$autosize = function() {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight, \n            Math.max((this.$minLines || 1) * this.lineHeight, height)\n        ) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n        \n        var hideScrollbars = desiredHeight <= 2 * this.lineHeight;\n        var vScroll = !hideScrollbars && height > maxHeight;\n        \n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n            \n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            this.desiredHeight = desiredHeight;\n            \n            this._signal(\"autosize\");\n        }\n    };\n    \n    this.$computeLayerConfig = function() {\n        var session = this.session;\n        var size = this.$size;\n        \n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n\n        var longestLine = this.$getLongestLine();\n        \n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        if (this.$maxLines && this.lineHeight > 1)\n            this.$autosize();\n\n        var minHeight = size.scrollerHeight + this.lineHeight;\n        \n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n        \n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top,\n            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, \n            longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n        \n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n\n        var offset = this.scrollTop % this.lineHeight;\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n                                                firstRowHeight;\n\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n\n        var changes = 0;\n        if (this.layerConfig.width != longestLine || hScrollChanged) \n            changes = this.CHANGE_H_SCROLL;\n        if (hScrollChanged || vScrollChanged) {\n            changes |= this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n        \n        this.layerConfig = {\n            width : longestLine,\n            padding : this.$padding,\n            firstRow : firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow : lastRow,\n            lineHeight : lineHeight,\n            characterWidth : this.characterWidth,\n            minHeight : minHeight,\n            maxHeight : maxHeight,\n            offset : offset,\n            gutterOffset : lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height : this.$size.scrollerHeight\n        };\n\n        if (this.session.$bidiHandler)\n            this.session.$bidiHandler.setContentWidth(longestLine - this.$padding);\n\n        return changes;\n    };\n\n    this.$updateLines = function() {\n        if (!this.$changedLines) return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n\n        var layerConfig = this.layerConfig;\n\n        if (firstRow > layerConfig.lastRow + 1) { return; }\n        if (lastRow < layerConfig.firstRow) { return; }\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    };\n\n    this.$getLongestLine = function() {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n            \n        if (this.$textLayer && charCount > this.$textLayer.MAX_LINE_LENGTH)\n            charCount = this.$textLayer.MAX_LINE_LENGTH + 30;\n\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    };\n    this.updateFrontMarkers = function() {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    };\n    this.updateBackMarkers = function() {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    };\n    this.addGutterDecoration = function(row, className){\n        this.$gutterLayer.addGutterDecoration(row, className);\n    };\n    this.removeGutterDecoration = function(row, className){\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    };\n    this.updateBreakpoints = function(rows) {\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.setAnnotations = function(annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n    this.updateCursor = function() {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    };\n    this.hideCursor = function() {\n        this.$cursorLayer.hideCursor();\n    };\n    this.showCursor = function() {\n        this.$cursorLayer.showCursor();\n    };\n\n    this.scrollSelectionIntoView = function(anchor, lead, offset) {\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    };\n    this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {\n        if (this.$size.scrollerHeight === 0)\n            return;\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n\n        var left = pos.left;\n        var top = pos.top;\n        \n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n        \n        var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n        \n        if (scrollTop + topMargin > top) {\n            if (offset && scrollTop + topMargin > top + this.lineHeight)\n                top -= offset * this.$size.scrollerHeight;\n            if (top === 0)\n                top = -this.scrollMargin.top;\n            this.session.setScrollTop(top);\n        } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {\n            if (offset && scrollTop + this.$size.scrollerHeight - bottomMargin < top -  this.lineHeight)\n                top += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(top + this.lineHeight + bottomMargin - this.$size.scrollerHeight);\n        }\n\n        var scrollLeft = this.scrollLeft;\n\n        if (scrollLeft > left) {\n            if (left < this.$padding + 2 * this.layerConfig.characterWidth)\n                left = -this.scrollMargin.left;\n            this.session.setScrollLeft(left);\n        } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {\n            this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));\n        } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {\n            this.session.setScrollLeft(0);\n        }\n    };\n    this.getScrollTop = function() {\n        return this.session.getScrollTop();\n    };\n    this.getScrollLeft = function() {\n        return this.session.getScrollLeft();\n    };\n    this.getScrollTopRow = function() {\n        return this.scrollTop / this.lineHeight;\n    };\n    this.getScrollBottomRow = function() {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    };\n    this.scrollToRow = function(row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    };\n\n    this.alignCursor = function(cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = {row: cursor, column: 0};\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n\n        this.session.setScrollTop(offset);\n        return offset;\n    };\n\n    this.STEPS = 8;\n    this.$calcSteps = function(fromValue, toValue){\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n\n        var func  = function(t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n\n        return steps;\n    };\n    this.scrollToLine = function(line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    };\n\n    this.animateScrolling = function(fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n        \n        if (fromValue == toValue)\n            return;\n        \n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n        \n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};\n\n        clearInterval(this.$timer);\n\n        _self.session.setScrollTop(steps.shift());\n        _self.session.$scrollTop = toValue;\n        this.$timer = setInterval(function() {\n            if (!_self.session) \n                return clearInterval(_self.$timer);\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            } else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            } else {\n                _self.$timer = clearInterval(_self.$timer);\n                _self.$scrollAnimation = null;\n                callback && callback();\n            }\n        }, 10);\n    };\n    this.scrollToY = function(scrollTop) {\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    };\n    this.scrollToX = function(scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    };\n    this.scrollTo = function(x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(y);\n    };\n    this.scrollBy = function(deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    };\n    this.isScrollableBy = function(deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n           return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n           return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n           return true;\n    };\n\n    this.pixelToScreenCoordinates = function(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        \n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        return {row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX:  offsetX};\n    };\n\n    this.screenToTextCoordinates = function(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    };\n    this.textToScreenCoordinates = function(row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n             ? this.session.$bidiHandler.getPosLeft(pos.column)\n             : Math.round(pos.column * this.characterWidth));\n        \n        var y = pos.row * this.lineHeight;\n\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    };\n    this.visualizeFocus = function() {\n        dom.addCssClass(this.container, \"ace_focus\");\n    };\n    this.visualizeBlur = function() {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    };\n    this.showComposition = function(composition) {\n        this.$composition = composition;\n        if (!composition.cssText) {\n            composition.cssText = this.textarea.style.cssText;\n        }\n        if (composition.useTextareaForIME == undefined)\n            composition.useTextareaForIME = this.$useTextareaForIME;\n        \n        if (this.$useTextareaForIME) {\n            dom.addCssClass(this.textarea, \"ace_composition\");\n            this.textarea.style.cssText = \"\";\n            this.$moveTextAreaToCursor();\n            this.$cursorLayer.element.style.display = \"none\";\n        }\n        else {\n            composition.markerId = this.session.addMarker(composition.markerRange, \"ace_composition_marker\", \"text\");\n        }\n    };\n    this.setCompositionText = function(text) {\n        var cursor = this.session.selection.cursor;\n        this.addToken(text, \"composition_placeholder\", cursor.row, cursor.column);\n        this.$moveTextAreaToCursor();\n    };\n    this.hideComposition = function() {\n        if (!this.$composition)\n            return;\n        \n        if (this.$composition.markerId)\n            this.session.removeMarker(this.$composition.markerId);\n\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = this.$composition.cssText;\n        var cursor = this.session.selection.cursor;\n        this.removeExtraToken(cursor.row, cursor.column);\n        this.$composition = null;\n        this.$cursorLayer.element.style.display = \"\";\n    };\n    \n    this.addToken = function(text, type, row, column) {\n        var session = this.session;\n        session.bgTokenizer.lines[row] = null;\n        var newToken = {type: type, value: text};\n        var tokens = session.getTokens(row);\n        if (column == null) {\n            tokens.push(newToken);\n        } else {\n            var l = 0;\n            for (var i =0; i < tokens.length; i++) {\n                var token = tokens[i];\n                l += token.value.length;\n                if (column <= l) {\n                    var diff = token.value.length - (l - column);\n                    var before = token.value.slice(0, diff);\n                    var after = token.value.slice(diff);\n    \n                    tokens.splice(i, 1, {type: token.type, value: before},  newToken,  {type: token.type, value: after});\n                    break;\n                }\n            }\n        }\n        this.updateLines(row, row);\n    };\n\n    this.removeExtraToken = function(row, column) {\n        this.updateLines(row, row);\n    };\n    this.setTheme = function(theme, cb) {\n        var _self = this;\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange',{theme:theme});\n\n        if (!theme || typeof theme == \"string\") {\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        } else {\n            afterLoad(theme);\n        }\n\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            if (module.$id)\n                _self.$themeId = module.$id;\n            dom.importCssString(\n                module.cssText,\n                module.cssClass,\n                _self.container\n            );\n\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n\n            var padding = \"padding\" in module ? module.padding \n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n            _self.$theme = module.cssClass;\n\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n\n            _self._dispatchEvent('themeLoaded', {theme:module});\n            cb && cb();\n        }\n    };\n    this.getTheme = function() {\n        return this.$themeId;\n    };\n    this.setStyle = function(style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    };\n    this.unsetStyle = function(style) {\n        dom.removeCssClass(this.container, style);\n    };\n    \n    this.setCursorStyle = function(style) {\n        dom.setStyle(this.scroller.style, \"cursor\", style);\n    };\n    this.setMouseCursor = function(cursorStyle) {\n        dom.setStyle(this.scroller.style, \"cursor\", cursorStyle);\n    };\n    \n    this.attachToShadowRoot = function() {\n        dom.importCssString(editorCss, \"ace_editor.css\", this.container);\n    };\n    this.destroy = function() {\n        this.freeze();\n        this.$fontMetrics.destroy();\n        this.$cursorLayer.destroy();\n        this.removeAllListeners();\n        this.container.textContent = \"\";\n    };\n\n}).call(VirtualRenderer.prototype);\n\n\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    animatedScroll: {initialValue: false},\n    showInvisibles: {\n        set: function(value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        set: function(val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function() {\n            return this.$showPrintMargin && this.$printMarginColumn; \n        }\n    },\n    showGutter: {\n        set: function(show){\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    fadeFoldWidgets: {\n        set: function(show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function(show) {\n            this.$gutterLayer.setShowFoldWidgets(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function(show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function(shouldHighlight) {\n            this.$gutterLayer.setHighlightGutterLine(shouldHighlight);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize: {\n        set: function(size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function(name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function(val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        set: function(val) {\n            if (!(this.$minLines < 0x1ffffffffffff))\n                this.$minLines = 0;\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function(val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        set: function(val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function(val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    theme: {\n        set: function(val) { this.setTheme(val); },\n        get: function() { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    },\n    hasCssTransforms: {\n    },\n    useTextareaForIME: {\n        initialValue: !useragent.isMobile && !useragent.isIE\n    }\n});\n\nexports.VirtualRenderer = VirtualRenderer;\n});\n\nace.define(\"ace/worker/worker_client\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/net\",\"ace/lib/event_emitter\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar net = require(\"../lib/net\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar config = require(\"../config\");\n\nfunction $workerBlob(workerUrl) {\n    var script = \"importScripts('\" + net.qualifyURL(workerUrl) + \"');\";\n    try {\n        return new Blob([script], {\"type\": \"application/javascript\"});\n    } catch (e) { // Backwards-compatibility\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;\n        var blobBuilder = new BlobBuilder();\n        blobBuilder.append(script);\n        return blobBuilder.getBlob(\"application/javascript\");\n    }\n}\n\nfunction createWorker(workerUrl) {\n    if (typeof Worker == \"undefined\")\n        return { postMessage: function() {}, terminate: function() {} };\n    if (config.get(\"loadWorkerFromBlob\")) {\n        var blob = $workerBlob(workerUrl);\n        var URL = window.URL || window.webkitURL;\n        var blobURL = URL.createObjectURL(blob);\n        return new Worker(blobURL);\n    }\n    return new Worker(workerUrl);\n}\n\nvar WorkerClient = function(worker) {\n    if (!worker.postMessage)\n        worker = this.$createWorkerFromOldConfig.apply(this, arguments);\n\n    this.$worker = worker;\n    this.$sendDeltaQueue = this.$sendDeltaQueue.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.onMessage = this.onMessage.bind(this);\n\n    this.callbackId = 1;\n    this.callbacks = {};\n\n    this.$worker.onmessage = this.onMessage;\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$createWorkerFromOldConfig = function(topLevelNamespaces, mod, classname, workerUrl, importScripts) {\n        if (require.nameToUrl && !require.toUrl)\n            require.toUrl = require.nameToUrl;\n\n        if (config.get(\"packaged\") || !require.toUrl) {\n            workerUrl = workerUrl || config.moduleUrl(mod, \"worker\");\n        } else {\n            var normalizePath = this.$normalizePath;\n            workerUrl = workerUrl || normalizePath(require.toUrl(\"ace/worker/worker.js\", null, \"_\"));\n\n            var tlns = {};\n            topLevelNamespaces.forEach(function(ns) {\n                tlns[ns] = normalizePath(require.toUrl(ns, null, \"_\").replace(/(\\.js)?(\\?.*)?$/, \"\"));\n            });\n        }\n\n        this.$worker = createWorker(workerUrl);\n        if (importScripts) {\n            this.send(\"importScripts\", importScripts);\n        }\n        this.$worker.postMessage({\n            init : true,\n            tlns : tlns,\n            module : mod,\n            classname : classname\n        });\n        return this.$worker;\n    };\n\n    this.onMessage = function(e) {\n        var msg = e.data;\n        switch (msg.type) {\n            case \"event\":\n                this._signal(msg.name, {data: msg.data});\n                break;\n            case \"call\":\n                var callback = this.callbacks[msg.id];\n                if (callback) {\n                    callback(msg.data);\n                    delete this.callbacks[msg.id];\n                }\n                break;\n            case \"error\":\n                this.reportError(msg.data);\n                break;\n            case \"log\":\n                window.console && console.log && console.log.apply(console, msg.data);\n                break;\n        }\n    };\n    \n    this.reportError = function(err) {\n        window.console && console.error && console.error(err);\n    };\n\n    this.$normalizePath = function(path) {\n        return net.qualifyURL(path);\n    };\n\n    this.terminate = function() {\n        this._signal(\"terminate\", {});\n        this.deltaQueue = null;\n        this.$worker.terminate();\n        this.$worker = null;\n        if (this.$doc)\n            this.$doc.off(\"change\", this.changeListener);\n        this.$doc = null;\n    };\n\n    this.send = function(cmd, args) {\n        this.$worker.postMessage({command: cmd, args: args});\n    };\n\n    this.call = function(cmd, args, callback) {\n        if (callback) {\n            var id = this.callbackId++;\n            this.callbacks[id] = callback;\n            args.push(id);\n        }\n        this.send(cmd, args);\n    };\n\n    this.emit = function(event, data) {\n        try {\n            if (data.data && data.data.err)\n                data.data.err = {message: data.data.err.message, stack: data.data.err.stack, code: data.data.err.code};\n            this.$worker.postMessage({event: event, data: {data: data.data}});\n        }\n        catch(ex) {\n            console.error(ex.stack);\n        }\n    };\n\n    this.attachToDocument = function(doc) {\n        if (this.$doc)\n            this.terminate();\n\n        this.$doc = doc;\n        this.call(\"setValue\", [doc.getValue()]);\n        doc.on(\"change\", this.changeListener);\n    };\n\n    this.changeListener = function(delta) {\n        if (!this.deltaQueue) {\n            this.deltaQueue = [];\n            setTimeout(this.$sendDeltaQueue, 0);\n        }\n        if (delta.action == \"insert\")\n            this.deltaQueue.push(delta.start, delta.lines);\n        else\n            this.deltaQueue.push(delta.start, delta.end);\n    };\n\n    this.$sendDeltaQueue = function() {\n        var q = this.deltaQueue;\n        if (!q) return;\n        this.deltaQueue = null;\n        if (q.length > 50 && q.length > this.$doc.getLength() >> 1) {\n            this.call(\"setValue\", [this.$doc.getValue()]);\n        } else\n            this.emit(\"change\", {data: q});\n    };\n\n}).call(WorkerClient.prototype);\n\n\nvar UIWorkerClient = function(topLevelNamespaces, mod, classname) {\n    var main = null;\n    var emitSync = false;\n    var sender = Object.create(EventEmitter);\n\n    var messageBuffer = [];\n    var workerClient = new WorkerClient({\n        messageBuffer: messageBuffer,\n        terminate: function() {},\n        postMessage: function(e) {\n            messageBuffer.push(e);\n            if (!main) return;\n            if (emitSync)\n                setTimeout(processNext);\n            else\n                processNext();\n        }\n    });\n\n    workerClient.setEmitSync = function(val) { emitSync = val; };\n\n    var processNext = function() {\n        var msg = messageBuffer.shift();\n        if (msg.command)\n            main[msg.command].apply(main, msg.args);\n        else if (msg.event)\n            sender._signal(msg.event, msg.data);\n    };\n\n    sender.postMessage = function(msg) {\n        workerClient.onMessage({data: msg});\n    };\n    sender.callback = function(data, callbackId) {\n        this.postMessage({type: \"call\", id: callbackId, data: data});\n    };\n    sender.emit = function(name, data) {\n        this.postMessage({type: \"event\", name: name, data: data});\n    };\n\n    config.loadModule([\"worker\", mod], function(Main) {\n        main = new Main[classname](sender);\n        while (messageBuffer.length)\n            processNext();\n    });\n\n    return workerClient;\n};\n\nexports.UIWorkerClient = UIWorkerClient;\nexports.WorkerClient = WorkerClient;\nexports.createWorker = createWorker;\n\n\n});\n\nace.define(\"ace/placeholder\",[\"require\",\"exports\",\"module\",\"ace/range\",\"ace/lib/event_emitter\",\"ace/lib/oop\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar oop = require(\"./lib/oop\");\n\nvar PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {\n    var _self = this;\n    this.length = length;\n    this.session = session;\n    this.doc = session.getDocument();\n    this.mainClass = mainClass;\n    this.othersClass = othersClass;\n    this.$onUpdate = this.onUpdate.bind(this);\n    this.doc.on(\"change\", this.$onUpdate);\n    this.$others = others;\n    \n    this.$onCursorChange = function() {\n        setTimeout(function() {\n            _self.onCursorChange();\n        });\n    };\n    \n    this.$pos = pos;\n    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};\n    this.$undoStackDepth = undoStack.length;\n    this.setup();\n\n    session.selection.on(\"changeCursor\", this.$onCursorChange);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n    this.setup = function() {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n        \n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function(other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    };\n    this.showOtherMarkers = function() {\n        if (this.othersActive) return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function(anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);\n        });\n    };\n    this.hideOtherMarkers = function() {\n        if (!this.othersActive) return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    };\n    this.onUpdate = function(delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n            \n        var range = delta;\n        if (range.start.row !== range.end.row) return;\n        if (range.start.row !== this.pos.row) return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n        \n        this.updateAnchors(delta);\n        \n        if (inMainRange)\n            this.length += lengthDiff;\n\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            } else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n        \n        this.$updating = false;\n        this.updateMarkers();\n    };\n    \n    this.updateAnchors = function(delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    };\n    \n    this.updateMarkers = function() {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function(pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column+_self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    };\n\n    this.onCursorChange = function(event) {\n        if (this.$updating || !this.session) return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        } else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    };    \n    this.detach = function() {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.off(\"change\", this.$onUpdate);\n        this.session.selection.off(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    };\n    this.cancel = function() {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(this.session, true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    };\n}).call(PlaceHolder.prototype);\n\n\nexports.PlaceHolder = PlaceHolder;\n});\n\nace.define(\"ace/mouse/multi_select_handler\",[\"require\",\"exports\",\"module\",\"ace/lib/event\",\"ace/lib/useragent\"], function(require, exports, module) {\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    \n    if (ctrl && useragent.isMac)\n        button = ev.button;\n\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    \n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    \n    if (button !== 0)\n        return;\n\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function(e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    \n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    \n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    } else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        } else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    \n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        \n        editor.inVirtualSelectionMode = true;\n        \n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function() {\n            var tmpSel = selection.toOrientedRange();\n\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                } else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.inVirtualSelectionMode = false;\n        });\n\n    } else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;        \n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function() {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            \n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n        };\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        } else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        \n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);            \n        else\n            selection.moveToPosition(pos);\n        \n        screenCursor = {row: -1, column: -1};\n\n        var onMouseSelectionEnd = function(e) {\n            blockSelect();\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n        };\n\n        var onSelectionInterval = blockSelect;\n\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function() {onSelectionInterval();}, 20);\n\n        return e.preventDefault();\n    }\n}\n\n\nexports.onMouseDown = onMouseDown;\n\n});\n\nace.define(\"ace/commands/multi_select_commands\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\"], function(require, exports, module) {\nexports.defaultCommands = [{\n    name: \"addCursorAbove\",\n    description: \"Add cursor above\",\n    exec: function(editor) { editor.selectMoreLines(-1); },\n    bindKey: {win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelow\",\n    description: \"Add cursor below\",\n    exec: function(editor) { editor.selectMoreLines(1); },\n    bindKey: {win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorAboveSkipCurrent\",\n    description: \"Add cursor above (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelowSkipCurrent\",\n    description: \"Add cursor below (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreBefore\",\n    description: \"Select more before\",\n    exec: function(editor) { editor.selectMore(-1); },\n    bindKey: {win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreAfter\",\n    description: \"Select more after\",\n    exec: function(editor) { editor.selectMore(1); },\n    bindKey: {win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextBefore\",\n    description: \"Select next before\",\n    exec: function(editor) { editor.selectMore(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextAfter\",\n    description: \"Select next after\",\n    exec: function(editor) { editor.selectMore(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"toggleSplitSelectionIntoLines\",\n    description: \"Split into lines\",\n    exec: function(editor) {\n        if (editor.multiSelect.rangeCount > 1)\n            editor.multiSelect.joinSelections();\n        else\n            editor.multiSelect.splitIntoLines();\n    },\n    bindKey: {win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\"},\n    readOnly: true\n}, {\n    name: \"splitSelectionIntoLines\",\n    description: \"Split into lines\",\n    exec: function(editor) { editor.multiSelect.splitIntoLines(); },\n    readOnly: true\n}, {\n    name: \"alignCursors\",\n    description: \"Align cursors\",\n    exec: function(editor) { editor.alignCursors(); },\n    bindKey: {win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\"},\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"findAll\",\n    description: \"Find all\",\n    exec: function(editor) { editor.findAll(); },\n    bindKey: {win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}];\nexports.multiSelectCommands = [{\n    name: \"singleSelection\",\n    description: \"Single selection\",\n    bindKey: \"esc\",\n    exec: function(editor) { editor.exitMultiSelectMode(); },\n    scrollIntoView: \"cursor\",\n    readOnly: true,\n    isAvailable: function(editor) {return editor && editor.inMultiSelectMode;}\n}];\n\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n\n});\n\nace.define(\"ace/multi_select\",[\"require\",\"exports\",\"module\",\"ace/range_list\",\"ace/range\",\"ace/selection\",\"ace/mouse/multi_select_handler\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/commands/multi_select_commands\",\"ace/search\",\"ace/edit_session\",\"ace/editor\",\"ace/config\"], function(require, exports, module) {\n\nvar RangeList = require(\"./range_list\").RangeList;\nvar Range = require(\"./range\").Range;\nvar Selection = require(\"./selection\").Selection;\nvar onMouseDown = require(\"./mouse/multi_select_handler\").onMouseDown;\nvar event = require(\"./lib/event\");\nvar lang = require(\"./lib/lang\");\nvar commands = require(\"./commands/multi_select_commands\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\nvar Search = require(\"./search\").Search;\nvar search = new Search();\n\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\nvar EditSession = require(\"./edit_session\").EditSession;\n(function() {\n    this.getSelectionMarkers = function() {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n(function() {\n    this.ranges = null;\n    this.rangeList = null;\n    this.addRange = function(range, $blockChangeEvents) {\n        if (!range)\n            return;\n\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n\n        if (!range.cursor)\n            range.cursor = range.end;\n\n        var removed = this.rangeList.add(range);\n\n        this.$onAddRange(range);\n\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n    this.toSingleRange = function(range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        range && this.fromOrientedRange(range);\n    };\n    this.substractPoint = function(pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n    this.mergeOverlappingRanges = function() {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n    };\n\n    this.$onAddRange = function(range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", {range: range});\n    };\n\n    this.$onRemoveRange = function(removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n\n        for (var i = removed.length; i--; ) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n\n        this._signal(\"removeRange\", {ranges: removed});\n\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            this.rangeList.detach(this.session);\n        }\n\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n    this.$initRangeList = function() {\n        if (this.rangeList)\n            return;\n\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n    this.getAllRanges = function() {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n    this.splitIntoLines = function () {\n        var ranges = this.ranges.length ? this.ranges : [this.getRange()];\n        var newRanges = [];\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            var row = range.start.row;\n            var endRow = range.end.row;\n            if (row === endRow) {\n                newRanges.push(range.clone());\n            } else {\n                newRanges.push(new Range(row, range.start.column, row, this.session.getLine(row).length));\n                while (++row < endRow)\n                    newRanges.push(this.getLineRange(row, true));\n                newRanges.push(new Range(endRow, 0, endRow, range.end.column));\n            }\n            if (i == 0 && !this.isBackwards())\n                newRanges = newRanges.reverse();\n        }\n        this.toSingleRange();\n        for (var i = newRanges.length; i--;)\n            this.addRange(newRanges[i]);\n    };\n    \n    this.joinSelections = function () {\n        var ranges = this.rangeList.ranges;\n        var lastRange = ranges[ranges.length - 1];\n        var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n        this.toSingleRange();\n        this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n    };\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        } else {\n            var cursor = this.session.documentToScreenPosition(this.cursor);\n            var anchor = this.session.documentToScreenPosition(this.anchor);\n\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        } else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        } else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n\n        if (startRow == endRow)\n            includeEmptyLines = true;\n\n        var docEnd;\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(\n                this.session.screenToDocumentPosition(row, startColumn, startOffsetX),\n                this.session.screenToDocumentPosition(row, endColumn, endOffsetX)\n            );\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n\n        if (yBackwards)\n            rectSel.reverse();\n\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n\n        return rectSel;\n    };\n}).call(Selection.prototype);\nvar Editor = require(\"./editor\").Editor;\n(function() {\n    this.updateSelectionMarkers = function() {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n    this.addSelectionMarker = function(orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n    this.removeSelectionMarker = function(range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n\n    this.removeSelectionMarkers = function(ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--; ) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n\n    this.$onAddRange = function(e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onRemoveRange = function(e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onMultiSelect = function(e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onSingleSelect = function(e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n\n    this.$onMultiSelectExec = function(e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        } else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        } else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        } else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        } else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    }; \n    this.forEachSelection = function(cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n        \n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n        \n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        if (selection.ranges[0])\n            selection.fromOrientedRange(selection.ranges[0]);\n        \n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n        \n        return result;\n    };\n    this.exitMultiSelectMode = function() {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n\n    this.getSelectedText = function() {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        } else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n    \n    this.$checkMultiselectChange = function(e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row \n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n            else\n                this.multiSelect.mergeOverlappingRanges();\n        }\n    };\n    this.findAll = function(needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }    \n        this.$search.set(options);\n        \n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n\n        var selection = this.multiSelect;\n\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n\n        for (var i = ranges.length; i--; )\n            selection.addRange(ranges[i], true);\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n        \n        return ranges.length;\n    };\n    this.selectMoreLines = function(dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        } else {\n            var anchor = lead;\n        }\n\n        if (isBackwards) {\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        } else {\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        } else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n    this.transposeSelections = function(dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                var tmp = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp.start.row;\n                range.start.column = tmp.start.column;\n                range.end.row = tmp.end.row;\n                range.end.column = tmp.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n\n        var words = [];\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n        sel.fromOrientedRange(sel.ranges[0]);\n    };\n    this.selectMore = function(dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n    this.alignCursors = function() {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        var row = -1;\n        var sameRowRanges = ranges.filter(function(r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n        \n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n                \n                if (fr < 0) fr = 0;\n                if (lr >= max) lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({row: fr, column: 0}, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        } else {\n            sameRowRanges.forEach(function(r) {\n                sel.substractPoint(r.cursor);\n            });\n\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function(r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function(r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n\n    this.$reAlignText = function(lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n\n        return lines.map(function(line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\n\n\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\nexports.onSessionChange = function(e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n\n    addAltCursorListeners(editor);\n}\n\nfunction addAltCursorListeners(editor){\n    if (!editor.textInput) return;\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function(e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        } else if (altCursor) {\n            reset();\n        }\n    }, editor);\n\n    event.addListener(el, \"keyup\", reset, editor);\n    event.addListener(el, \"blur\", reset, editor);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n        }\n    }\n}\n\nexports.MultiSelect = MultiSelect;\n\n\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        set: function(val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"changeSession\", this.$multiselectOnSessionChange);\n                this.on(\"mousedown\", onMouseDown);\n            } else {\n                this.off(\"changeSession\", this.$multiselectOnSessionChange);\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function(val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n\n\n\n});\n\nace.define(\"ace/mode/folding/fold_mode\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\n\nvar Range = require(\"../../range\").Range;\n\nvar FoldMode = exports.FoldMode = function() {};\n\n(function() {\n\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n                && this.foldingStopMarker\n                && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        return null;\n    };\n\n    this.indentationBlock = function(session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n\n            if (level == -1)\n                continue;\n\n            if (level <= startLevel) {\n                var token = session.getTokenAt(row, 0);\n                if (!token || token.type !== \"string\")\n                    break;\n            }\n\n            endRow = row;\n        }\n\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n\n    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var start = {row: row, column: column + 1};\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n\n        if (fw == \"start\" && end.row > start.row) {\n            end.row --;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n\n    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var end = {row: row, column: column};\n        var start = session.$findOpeningBracket(bracket, end);\n\n        if (!start)\n            return;\n\n        start.column++;\n        end.column--;\n\n        return  Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n\n});\n\nace.define(\"ace/theme/textmate\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = \".ace-tm .ace_gutter {\\\nbackground: #f0f0f0;\\\ncolor: #333;\\\n}\\\n.ace-tm .ace_print-margin {\\\nwidth: 1px;\\\nbackground: #e8e8e8;\\\n}\\\n.ace-tm .ace_fold {\\\nbackground-color: #6B72E6;\\\n}\\\n.ace-tm {\\\nbackground-color: #FFFFFF;\\\ncolor: black;\\\n}\\\n.ace-tm .ace_cursor {\\\ncolor: black;\\\n}\\\n.ace-tm .ace_invisible {\\\ncolor: rgb(191, 191, 191);\\\n}\\\n.ace-tm .ace_storage,\\\n.ace-tm .ace_keyword {\\\ncolor: blue;\\\n}\\\n.ace-tm .ace_constant {\\\ncolor: rgb(197, 6, 11);\\\n}\\\n.ace-tm .ace_constant.ace_buildin {\\\ncolor: rgb(88, 72, 246);\\\n}\\\n.ace-tm .ace_constant.ace_language {\\\ncolor: rgb(88, 92, 246);\\\n}\\\n.ace-tm .ace_constant.ace_library {\\\ncolor: rgb(6, 150, 14);\\\n}\\\n.ace-tm .ace_invalid {\\\nbackground-color: rgba(255, 0, 0, 0.1);\\\ncolor: red;\\\n}\\\n.ace-tm .ace_support.ace_function {\\\ncolor: rgb(60, 76, 114);\\\n}\\\n.ace-tm .ace_support.ace_constant {\\\ncolor: rgb(6, 150, 14);\\\n}\\\n.ace-tm .ace_support.ace_type,\\\n.ace-tm .ace_support.ace_class {\\\ncolor: rgb(109, 121, 222);\\\n}\\\n.ace-tm .ace_keyword.ace_operator {\\\ncolor: rgb(104, 118, 135);\\\n}\\\n.ace-tm .ace_string {\\\ncolor: rgb(3, 106, 7);\\\n}\\\n.ace-tm .ace_comment {\\\ncolor: rgb(76, 136, 107);\\\n}\\\n.ace-tm .ace_comment.ace_doc {\\\ncolor: rgb(0, 102, 255);\\\n}\\\n.ace-tm .ace_comment.ace_doc.ace_tag {\\\ncolor: rgb(128, 159, 191);\\\n}\\\n.ace-tm .ace_constant.ace_numeric {\\\ncolor: rgb(0, 0, 205);\\\n}\\\n.ace-tm .ace_variable {\\\ncolor: rgb(49, 132, 149);\\\n}\\\n.ace-tm .ace_xml-pe {\\\ncolor: rgb(104, 104, 91);\\\n}\\\n.ace-tm .ace_entity.ace_name.ace_function {\\\ncolor: #0000A2;\\\n}\\\n.ace-tm .ace_heading {\\\ncolor: rgb(12, 7, 255);\\\n}\\\n.ace-tm .ace_list {\\\ncolor:rgb(185, 6, 144);\\\n}\\\n.ace-tm .ace_meta.ace_tag {\\\ncolor:rgb(0, 22, 142);\\\n}\\\n.ace-tm .ace_string.ace_regex {\\\ncolor: rgb(255, 0, 0)\\\n}\\\n.ace-tm .ace_marker-layer .ace_selection {\\\nbackground: rgb(181, 213, 255);\\\n}\\\n.ace-tm.ace_multiselect .ace_selection.ace_start {\\\nbox-shadow: 0 0 3px 0px white;\\\n}\\\n.ace-tm .ace_marker-layer .ace_step {\\\nbackground: rgb(252, 255, 0);\\\n}\\\n.ace-tm .ace_marker-layer .ace_stack {\\\nbackground: rgb(164, 229, 101);\\\n}\\\n.ace-tm .ace_marker-layer .ace_bracket {\\\nmargin: -1px 0 0 -1px;\\\nborder: 1px solid rgb(192, 192, 192);\\\n}\\\n.ace-tm .ace_marker-layer .ace_active-line {\\\nbackground: rgba(0, 0, 0, 0.07);\\\n}\\\n.ace-tm .ace_gutter-active-line {\\\nbackground-color : #dcdcdc;\\\n}\\\n.ace-tm .ace_marker-layer .ace_selected-word {\\\nbackground: rgb(250, 250, 255);\\\nborder: 1px solid rgb(200, 200, 250);\\\n}\\\n.ace-tm .ace_indent-guide {\\\nbackground: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\\\") right repeat-y;\\\n}\\\n\";\nexports.$id = \"ace/theme/textmate\";\n\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass);\n});\n\nace.define(\"ace/line_widgets\",[\"require\",\"exports\",\"module\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar dom = require(\"./lib/dom\");\n\nfunction LineWidgets(session) {\n    this.session = session;\n    this.session.widgetManager = this;\n    this.session.getRowLength = this.getRowLength;\n    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n    this.updateOnChange = this.updateOnChange.bind(this);\n    this.renderWidgets = this.renderWidgets.bind(this);\n    this.measureWidgets = this.measureWidgets.bind(this);\n    this.session._changedWidgets = [];\n    this.$onChangeEditor = this.$onChangeEditor.bind(this);\n    \n    this.session.on(\"change\", this.updateOnChange);\n    this.session.on(\"changeFold\", this.updateOnFold);\n    this.session.on(\"changeEditor\", this.$onChangeEditor);\n}\n\n(function() {\n    this.getRowLength = function(row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else \n            h = 0;\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1 + h;\n        } else {\n            return this.$wrapData[row].length + 1 + h;\n        }\n    };\n\n    this.$getWidgetScreenLength = function() {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function(w){\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    };    \n    \n    this.$onChangeEditor = function(e) {\n        this.attach(e.editor);\n    };\n    \n    this.attach = function(editor) {\n        if (editor  && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n\n        if (this.editor == editor)\n            return;\n\n        this.detach();\n        this.editor = editor;\n        \n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    };\n    this.detach = function(e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n        \n        this.editor = null;\n        editor.widgetManager = null;\n        \n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function(w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    };\n\n    this.updateOnFold = function(e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            } else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    };\n    \n    this.updateOnChange = function(delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        \n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n        } else if (delta.action == \"remove\") {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            if (!lineWidgets[startRow] && removed[removed.length - 1]) {\n                lineWidgets[startRow] = removed.pop();\n            }\n            removed.forEach(function(w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        } else {\n            var args = new Array(len);\n            if (lineWidgets[startRow] && lineWidgets[startRow].column != null) {\n                if (delta.start.column > lineWidgets[startRow].column)\n                    startRow++;\n            }\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    };\n    \n    this.$updateRows = function() {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        var noWidgets = true;\n        lineWidgets.forEach(function(w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    };\n\n    this.$registerLineWidget = function(w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n        \n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n            \n        this.session.lineWidgets[w.row] = w;\n        return w;\n    };\n    \n    this.addLineWidget = function(w) {\n        this.$registerLineWidget(w);\n        w.session = this.session;\n        \n        if (!this.editor) return w;\n        \n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = 5;\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n            \n            if (!w.coverGutter) {\n                w.el.style.zIndex = 3;\n            }\n            if (w.pixelHeight == null) {\n                w.pixelHeight = w.el.offsetHeight;\n            }\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n        \n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n            \n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        \n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    };\n    \n    this.removeLineWidget = function(w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy) try {\n            w.editor.destroy();\n        } catch(e){}\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            } else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        this.$updateRows();\n    };\n    \n    this.getWidgetsAtRow = function(row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    };\n    \n    this.onWidgetChanged = function(w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    };\n    \n    this.measureWidgets = function(e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n        \n        if (!changedWidgets || !changedWidgets.length) return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.session != this.session) continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            \n            w.h = w.el.offsetHeight;\n            \n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n            \n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", {data:{start:{row: min}}});\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    };\n    \n    this.renderWidgets = function(e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n        \n        while (first > 0 && !lineWidgets[first])\n            first--;\n        \n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            var w = lineWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n            \n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n            \n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n            \n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            } else {\n                w.el.style.right = \"\";\n            }\n        }\n    };\n    \n}).call(LineWidgets.prototype);\n\n\nexports.LineWidgets = LineWidgets;\n\n});\n\nace.define(\"ace/ext/error_marker\",[\"require\",\"exports\",\"module\",\"ace/line_widgets\",\"ace/lib/dom\",\"ace/range\"], function(require, exports, module) {\n\"use strict\";\nvar LineWidgets = require(\"../line_widgets\").LineWidgets;\nvar dom = require(\"../lib/dom\");\nvar Range = require(\"../range\").Range;\n\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n    return -(first + 1);\n}\n\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    \n    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    \n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    \n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    \n    \n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\n\nexports.showErrorMarker = function(editor, dir) {\n    var session = editor.session;\n    if (!session.widgetManager) {\n        session.widgetManager = new LineWidgets(session);\n        session.widgetManager.attach(editor);\n    }\n    \n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    } else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    } else if (oldWidget) {\n        return;\n    } else {\n        gutterAnno = {\n            text: [\"Looks good!\"],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    \n    var w = {\n        row: pos.row, \n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    \n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    \n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    el.innerHTML = gutterAnno.text.join(\"<br>\");\n    \n    el.appendChild(dom.createElement(\"div\"));\n    \n    var kb = function(_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return {command: \"null\"};\n        }\n    };\n    \n    w.destroy = function() {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n    \n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    \n    editor.session.widgetManager.addLineWidget(w);\n    \n    w.el.onmousedown = editor.focus.bind(editor);\n    \n    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});\n};\n\n\ndom.importCssString(\"\\\n    .error_widget_wrapper {\\\n        background: inherit;\\\n        color: inherit;\\\n        border:none\\\n    }\\\n    .error_widget {\\\n        border-top: solid 2px;\\\n        border-bottom: solid 2px;\\\n        margin: 5px 0;\\\n        padding: 10px 40px;\\\n        white-space: pre-wrap;\\\n    }\\\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\\\n        border-color: #ff5a5a\\\n    }\\\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\\\n        border-color: #F1D817\\\n    }\\\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\\\n        border-color: #5a5a5a\\\n    }\\\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\\\n        border-color: #5aaa5a\\\n    }\\\n    .error_widget_arrow {\\\n        position: absolute;\\\n        border: solid 5px;\\\n        border-top-color: transparent!important;\\\n        border-right-color: transparent!important;\\\n        border-left-color: transparent!important;\\\n        top: -5px;\\\n    }\\\n\", \"\");\n\n});\n\nace.define(\"ace/ace\",[\"require\",\"exports\",\"module\",\"ace/lib/fixoldbrowsers\",\"ace/lib/dom\",\"ace/lib/event\",\"ace/range\",\"ace/editor\",\"ace/edit_session\",\"ace/undomanager\",\"ace/virtual_renderer\",\"ace/worker/worker_client\",\"ace/keyboard/hash_handler\",\"ace/placeholder\",\"ace/multi_select\",\"ace/mode/folding/fold_mode\",\"ace/theme/textmate\",\"ace/ext/error_marker\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nrequire(\"./lib/fixoldbrowsers\");\n\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\n\nvar Range = require(\"./range\").Range;\nvar Editor = require(\"./editor\").Editor;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar UndoManager = require(\"./undomanager\").UndoManager;\nvar Renderer = require(\"./virtual_renderer\").VirtualRenderer;\nrequire(\"./worker/worker_client\");\nrequire(\"./keyboard/hash_handler\");\nrequire(\"./placeholder\");\nrequire(\"./multi_select\");\nrequire(\"./mode/folding/fold_mode\");\nrequire(\"./theme/textmate\");\nrequire(\"./ext/error_marker\");\n\nexports.config = require(\"./config\");\nexports.require = require;\n\nif (typeof define === \"function\")\n    exports.define = define;\nexports.edit = function(el, options) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    } else if (el) {\n        value = el.textContent;\n        el.innerHTML = \"\";\n    }\n\n    var doc = exports.createEditSession(value);\n\n    var editor = new Editor(new Renderer(el), doc, options);\n\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode) env.textarea = oldNode;\n    event.addListener(window, \"resize\", env.onResize);\n    editor.on(\"destroy\", function() {\n        event.removeListener(window, \"resize\", env.onResize);\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\nexports.createEditSession = function(text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.Range = Range;\nexports.Editor = Editor;\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.VirtualRenderer = Renderer;\nexports.version = exports.config.version;\n});            (function() {\n                ace.require([\"ace/ace\"], function(a) {\n                    if (a) {\n                        a.config.init(true);\n                        a.define = ace.define;\n                    }\n                    if (!window.ace)\n                        window.ace = a;\n                    for (var key in a) if (a.hasOwnProperty(key))\n                        window.ace[key] = a[key];\n                    window.ace[\"default\"] = window.ace;\n                    if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                        module.exports = window.ace;\n                    }\n                });\n            })();\n        ","ace.define(\"ace/snippets\",[\"require\",\"exports\",\"module\",\"ace/lib/oop\",\"ace/lib/event_emitter\",\"ace/lib/lang\",\"ace/range\",\"ace/range_list\",\"ace/keyboard/hash_handler\",\"ace/tokenizer\",\"ace/clipboard\",\"ace/lib/dom\",\"ace/editor\"], function(require, exports, module) {\n\"use strict\";\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\n\nvar VARIABLES = {\n    CURRENT_WORD: function(editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function(editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function(editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function(editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function(editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function(editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function(editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function(editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function(editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    FILENAME: function(editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function(editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function(editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function(editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function() { return \"Unknown\"; },\n    FULLNAME: function() { return \"Unknown\"; },\n    BLOCK_COMMENT_START: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    CURRENT_YEAR: date.bind(null, {year: \"numeric\"}),\n    CURRENT_YEAR_SHORT: date.bind(null, {year: \"2-digit\"}),\n    CURRENT_MONTH: date.bind(null, {month: \"numeric\"}),\n    CURRENT_MONTH_NAME: date.bind(null, {month: \"long\"}),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, {month: \"short\"}),\n    CURRENT_DATE: date.bind(null, {day: \"2-digit\"}),\n    CURRENT_DAY_NAME: date.bind(null, {weekday: \"long\"}),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, {weekday: \"short\"}),\n    CURRENT_HOUR: date.bind(null, {hour: \"2-digit\", hour12: false}),\n    CURRENT_MINUTE: date.bind(null, {minute: \"2-digit\"}),\n    CURRENT_SECOND: date.bind(null, {second: \"2-digit\"})\n};\n\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\n\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\n\nvar SnippetManager = function() {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n    \n    this.getTokenizer = function() {\n        return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    \n    this.createTokenizer = function() {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{tabstopId: parseInt(str, 10)}];\n            return [{text: str}];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\", \n            onMatch: function(val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        \n        SnippetManager.$tokenizer = new Tokenizer({\n            start: [\n                {regex: /\\\\./, onMatch: function(val, state, stack) {\n                    var ch = val[1];\n                    if (ch == \"}\" && stack.length) {\n                        val = ch;\n                    } else if (\"`$\\\\\".indexOf(ch) != -1) {\n                        val = ch;\n                    }\n                    return [val];\n                }},\n                {regex: /}/, onMatch: function(val, state, stack) {\n                    return [stack.length ? stack.shift() : val];\n                }},\n                {regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken},\n                {regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function(str, state, stack) {\n                    var t = TabstopToken(str.substr(1));\n                    stack.unshift(t[0]);\n                    return t;\n                }, next: \"snippetVar\"},\n                {regex: /\\n/, token: \"newline\", merge: false}\n            ],\n            snippetVar: [\n                {regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function(val, state, stack) {\n                    var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function(operator) {\n                        return operator.length == 2 ? operator[1] : \"\\x00\";\n                    }).split(\"\\x00\").map(function(value){\n                        return {value: value};\n                    });\n                    stack[0].choices = choices;\n                    return [choices[0]];\n                }, next: \"start\"},\n                formatMatcher,\n                {regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\"}\n            ],\n            formatString: [\n                {regex: /:/, onMatch: function(val, state, stack) {\n                    if (stack.length && stack[0].expectElse) {\n                        stack[0].expectElse = false;\n                        stack[0].ifEnd = {elseEnd: stack[0]};\n                        return [stack[0].ifEnd];\n                    }\n                    return \":\";\n                }},\n                {regex: /\\\\./, onMatch: function(val, state, stack) {\n                    var ch = val[1];\n                    if (ch == \"}\" && stack.length)\n                        val = ch;\n                    else if (\"`$\\\\\".indexOf(ch) != -1)\n                        val = ch;\n                    else if (ch == \"n\")\n                        val = \"\\n\";\n                    else if (ch == \"t\")\n                        val = \"\\t\";\n                    else if (\"ulULE\".indexOf(ch) != -1)\n                        val = {changeCase: ch, local: ch > \"a\"};\n                    return [val];\n                }},\n                {regex: \"/\\\\w*}\", onMatch: function(val, state, stack) {\n                    var next = stack.shift();\n                    if (next)\n                        next.flag = val.slice(1, -1);\n                    this.next = next && next.tabstopId ? \"start\" : \"\";\n                    return [next || val];\n                }, next: \"start\"},\n                {regex: /\\$(?:\\d+|\\w+)/, onMatch: function(val, state, stack) {\n                    return [{text: val.slice(1)}];\n                }},\n                {regex: /\\${\\w+/, onMatch: function(val, state, stack) {\n                    var token = {text: val.slice(2)};\n                    stack.unshift(token);\n                    return [token];\n                }, next: \"formatStringVar\"},\n                {regex: /\\n/, token: \"newline\", merge: false},\n                {regex: /}/, onMatch: function(val, state, stack) {\n                    var next = stack.shift();\n                    this.next = next && next.tabstopId ? \"start\" : \"\";\n                    return [next || val];\n                }, next: \"start\"}\n            ],\n            formatStringVar: [\n                {regex: /:\\/\\w+}/, onMatch: function(val, state, stack) {\n                    var ts = stack[0];\n                    ts.formatFunction = val.slice(2, -1);\n                    return [stack.shift()];\n                }, next: \"formatString\"},\n                formatMatcher,\n                {regex: /:[\\?\\-+]?/, onMatch: function(val, state, stack) {\n                    if (val[1] == \"+\")\n                        stack[0].ifEnd = stack[0];\n                    if (val[1] == \"?\")\n                        stack[0].expectElse = true;\n                }, next: \"formatString\"},\n                {regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\"}\n            ]\n        });\n        return SnippetManager.$tokenizer;\n    };\n\n    this.tokenizeTmSnippet = function(str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function(x) {\n            return x.value || x;\n        });\n    };\n    \n    this.getVariableValue = function(editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        \n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    \n    this.variables = VARIABLES;\n    this.tmStrFormat = function(str, ch, editor) {\n        if (!ch.fmt) return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function() {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i  = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    } else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                } else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                } else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    \n    this.tmFormatFunction = function(str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n\n    this.resolveVariables = function(snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)  continue;\n            afterNewLine = false;\n            \n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1) j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            \n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                \n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                } else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            } else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            } else if (ch.tabstopId != null) {\n                result.push(ch);\n            } else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n\n    this.insertSnippetForSelection = function(editor, snippetText) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var tabString = editor.session.getTabString();\n        var indentString = line.match(/^\\s*/)[0];\n        \n        if (cursor.column < indentString.length)\n            indentString = indentString.slice(0, cursor.column);\n\n        snippetText = snippetText.replace(/\\r/g, \"\");\n        var tokens = this.tokenizeTmSnippet(snippetText);\n        tokens = this.resolveVariables(tokens, editor);\n        tokens = tokens.map(function(x) {\n            if (x == \"\\n\")\n                return x + indentString;\n            if (typeof x == \"string\")\n                return x.replace(/\\t/g, tabString);\n            return x;\n        });\n        var tabstops = [];\n        tokens.forEach(function(p, i) {\n            if (typeof p != \"object\")\n                return;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            if (!ts) {\n                ts = tabstops[id] = [];\n                ts.index = id;\n                ts.value = \"\";\n                ts.parents = {};\n            }\n            if (ts.indexOf(p) !== -1)\n                return;\n            if (p.choices && !ts.choices)\n                ts.choices = p.choices;\n            ts.push(p);\n            var i1 = tokens.indexOf(p, i + 1);\n            if (i1 === -1)\n                return;\n\n            var value = tokens.slice(i + 1, i1);\n            var isNested = value.some(function(t) {return typeof t === \"object\";});\n            if (isNested && !ts.value) {\n                ts.value = value;\n            } else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n                ts.value = value.join(\"\");\n            }\n        });\n        tabstops.forEach(function(ts) {ts.length = 0;});\n        var expanding = {};\n        function copyValue(val) {\n            var copy = [];\n            for (var i = 0; i < val.length; i++) {\n                var p = val[i];\n                if (typeof p == \"object\") {\n                    if (expanding[p.tabstopId])\n                        continue;\n                    var j = val.lastIndexOf(p, i - 1);\n                    p = copy[j] || {tabstopId: p.tabstopId};\n                }\n                copy[i] = p;\n            }\n            return copy;\n        }\n        for (var i = 0; i < tokens.length; i++) {\n            var p = tokens[i];\n            if (typeof p != \"object\")\n                continue;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            var i1 = tokens.indexOf(p, i + 1);\n            if (expanding[id]) {\n                if (expanding[id] === p) {\n                    delete expanding[id];\n                    Object.keys(expanding).forEach(function(parentId) {\n                        ts.parents[parentId] = true;\n                    });\n                }\n                continue;\n            }\n            expanding[id] = p;\n            var value = ts.value;\n            if (typeof value !== \"string\")\n                value = copyValue(value);\n            else if (p.fmt)\n                value = this.tmStrFormat(value, p, editor);\n            tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n\n            if (ts.indexOf(p) === -1)\n                ts.push(p);\n        }\n        var row = 0, column = 0;\n        var text = \"\";\n        tokens.forEach(function(t) {\n            if (typeof t === \"string\") {\n                var lines = t.split(\"\\n\");\n                if (lines.length > 1){\n                    column = lines[lines.length - 1].length;\n                    row += lines.length - 1;\n                } else\n                    column += t.length;\n                text += t;\n            } else if (t) {\n                if (!t.start)\n                    t.start = {row: row, column: column};\n                else\n                    t.end = {row: row, column: column};\n            }\n        });\n        var range = editor.getSelectionRange();\n        var end = editor.session.replace(range, text);\n\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    \n    this.insertSnippet = function(editor, snippetText) {\n        var self = this;\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText);\n        \n        editor.forEachSelection(function() {\n            self.insertSnippetForSelection(editor, snippetText);\n        }, null, {keepOrder: true});\n        \n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n\n    this.$getScope = function(editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp) \n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        \n        return scope;\n    };\n\n    this.getActiveScopes = function(editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n\n    this.expandWithTab = function(editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function() {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, {keepOrder: true});\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    \n    this.expandSnippetForSelection = function(editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function(scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row,\n            cursor.column - snippet.replaceBefore.length,\n            cursor.column + snippet.replaceAfter.length\n        );\n\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n\n    this.findMatchingSnippet = function(snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function(snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        \n        if (!snippets) \n            snippets = [];\n        \n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            } else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            \n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            \n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        } else {\n            Object.keys(snippets).forEach(function(key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        \n        this._signal(\"registerSnippets\", {scope: scope});\n    };\n    this.unregister = function(snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope||scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope||scope];\n                var i = map && map.indexOf(s);\n                if (i >= 0)\n                    map.splice(i, 1);\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function(str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                } catch (e) {}\n            } if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            } else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                } else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                } else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    this.getSnippetByName = function(name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function(scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n\n}).call(SnippetManager.prototype);\n\n\nvar TabstopManager = function(editor) {\n    if (editor.tabstopManager)\n        return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n};\n(function() {\n    this.attach = function(editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n\n        this.editor = editor;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function() {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges = null;\n        this.tabstops = null;\n        this.selectedTabstop = null;\n        this.editor.removeListener(\"change\", this.$onChange);\n        this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n        this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.editor = null;\n    };\n\n    this.onChange = function(delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = (this.tabstops || []).slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            \n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.editor.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    this.updateLinkedFields = function() {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.editor.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    this.onAfterExec = function(e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    this.onChangeSelection = function() {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    this.onChangeSession = function() {\n        this.detach();\n    };\n    this.tabNext = function(dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        if (index === 0)\n            this.detach();\n    };\n    this.selectTabstop = function(index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        \n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices) range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        } else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        \n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", {matches: this.selectedTabstop.choices});\n    };\n    this.addTabstops = function(tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        \n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        tabstops.forEach(function(ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            \n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                } else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        \n        if (arg.length > 2) {\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n\n    this.addTabstopMarkers = function(ts) {\n        var session = this.editor.session;\n        ts.forEach(function(range) {\n            if  (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    this.removeTabstopMarkers = function(ts) {\n        var session = this.editor.session;\n        ts.forEach(function(range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    this.removeRange = function(range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1) range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1) this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1) range.tabstop.splice(i, 1);\n        this.editor.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n        \"Tab\": function(editor) {\n            if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n                return;\n            editor.tabstopManager.tabNext(1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Shift-Tab\": function(editor) {\n            editor.tabstopManager.tabNext(-1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Esc\": function(editor) {\n            editor.tabstopManager.detach();\n        }\n    });\n}).call(TabstopManager.prototype);\n\n\n\nvar movePoint = function(point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\n\nvar moveRelative = function(point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\n\n\nrequire(\"./lib/dom\").importCssString(\"\\\n.ace_snippet-marker {\\\n    -moz-box-sizing: border-box;\\\n    box-sizing: border-box;\\\n    background: rgba(194, 193, 208, 0.09);\\\n    border: 1px dotted rgba(211, 208, 235, 0.62);\\\n    position: absolute;\\\n}\");\n\nexports.snippetManager = new SnippetManager();\n\n\nvar Editor = require(\"./editor\").Editor;\n(function() {\n    this.insertSnippet = function(content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function(options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n\n});\n\nace.define(\"ace/autocomplete/popup\",[\"require\",\"exports\",\"module\",\"ace/virtual_renderer\",\"ace/editor\",\"ace/range\",\"ace/lib/event\",\"ace/lib/lang\",\"ace/lib/dom\"], function(require, exports, module) {\n\"use strict\";\n\nvar Renderer = require(\"../virtual_renderer\").VirtualRenderer;\nvar Editor = require(\"../editor\").Editor;\nvar Range = require(\"../range\").Range;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\n\nvar $singleLineEditor = function(el) {\n    var renderer = new Renderer(el);\n\n    renderer.$maxLines = 4;\n\n    var editor = new Editor(renderer);\n\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n\n    return editor;\n};\n\nvar AcePopup = function(parentNode) {\n    var el = dom.createElement(\"div\");\n    var popup = new $singleLineEditor(el);\n\n    if (parentNode)\n        parentNode.appendChild(el);\n    el.style.display = \"none\";\n    popup.renderer.content.style.cursor = \"default\";\n    popup.renderer.setStyle(\"ace_autocomplete\");\n\n    popup.setOption(\"displayIndentGuides\", false);\n    popup.setOption(\"dragDelay\", 150);\n\n    var noop = function(){};\n\n    popup.focus = noop;\n    popup.$isFocused = true;\n\n    popup.renderer.$cursorLayer.restartTimer = noop;\n    popup.renderer.$cursorLayer.element.style.opacity = 0;\n\n    popup.renderer.$maxLines = 8;\n    popup.renderer.$keepTextAreaAtCursor = false;\n\n    popup.setHighlightActiveLine(false);\n    popup.session.highlight(\"\");\n    popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n\n    popup.on(\"mousedown\", function(e) {\n        var pos = e.getDocumentPosition();\n        popup.selection.moveToPosition(pos);\n        selectionMarker.start.row = selectionMarker.end.row = pos.row;\n        e.stop();\n    });\n\n    var lastMouseEvent;\n    var hoverMarker = new Range(-1,0,-1,Infinity);\n    var selectionMarker = new Range(-1,0,-1,Infinity);\n    selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n    popup.setSelectOnHover = function(val) {\n        if (!val) {\n            hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n        } else if (hoverMarker.id) {\n            popup.session.removeMarker(hoverMarker.id);\n            hoverMarker.id = null;\n        }\n    };\n    popup.setSelectOnHover(false);\n    popup.on(\"mousemove\", function(e) {\n        if (!lastMouseEvent) {\n            lastMouseEvent = e;\n            return;\n        }\n        if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n            return;\n        }\n        lastMouseEvent = e;\n        lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n        var row = lastMouseEvent.getDocumentPosition().row;\n        if (hoverMarker.start.row != row) {\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row);\n        }\n    });\n    popup.renderer.on(\"beforeRender\", function() {\n        if (lastMouseEvent && hoverMarker.start.row != -1) {\n            lastMouseEvent.$pos = null;\n            var row = lastMouseEvent.getDocumentPosition().row;\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row, true);\n        }\n    });\n    popup.renderer.on(\"afterRender\", function() {\n        var row = popup.getRow();\n        var t = popup.renderer.$textLayer;\n        var selected = t.element.childNodes[row - t.config.firstRow];\n        if (selected !== t.selectedNode && t.selectedNode)\n            dom.removeCssClass(t.selectedNode, \"ace_selected\");\n        t.selectedNode = selected;\n        if (selected)\n            dom.addCssClass(selected, \"ace_selected\");\n    });\n    var hideHoverMarker = function() { setHoverMarker(-1); };\n    var setHoverMarker = function(row, suppressRedraw) {\n        if (row !== hoverMarker.start.row) {\n            hoverMarker.start.row = hoverMarker.end.row = row;\n            if (!suppressRedraw)\n                popup.session._emit(\"changeBackMarker\");\n            popup._emit(\"changeHoverMarker\");\n        }\n    };\n    popup.getHoveredRow = function() {\n        return hoverMarker.start.row;\n    };\n\n    event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n    popup.on(\"hide\", hideHoverMarker);\n    popup.on(\"changeSelection\", hideHoverMarker);\n\n    popup.session.doc.getLength = function() {\n        return popup.data.length;\n    };\n    popup.session.doc.getLine = function(i) {\n        var data = popup.data[i];\n        if (typeof data == \"string\")\n            return data;\n        return (data && data.value) || \"\";\n    };\n\n    var bgTokenizer = popup.session.bgTokenizer;\n    bgTokenizer.$tokenizeRow = function(row) {\n        var data = popup.data[row];\n        var tokens = [];\n        if (!data)\n            return tokens;\n        if (typeof data == \"string\")\n            data = {value: data};\n        var caption = data.caption || data.value || data.name;\n\n        function addToken(value, className) {\n            value && tokens.push({\n                type: (data.className || \"\") + (className || \"\"), \n                value: value\n            });\n        }\n        \n        var lower = caption.toLowerCase();\n        var filterText = (popup.filterText || \"\").toLowerCase();\n        var lastIndex = 0;\n        var lastI = 0;\n        for (var i = 0; i <= filterText.length; i++) {\n            if (i != lastI && (data.matchMask & (1 << i) || i == filterText.length)) {\n                var sub = filterText.slice(lastI, i);\n                lastI = i;\n                var index = lower.indexOf(sub, lastIndex);\n                if (index == -1) continue;\n                addToken(caption.slice(lastIndex, index), \"\");\n                lastIndex = index + sub.length;\n                addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n            }\n        }\n        addToken(caption.slice(lastIndex, caption.length), \"\");\n        \n        if (data.meta)\n            tokens.push({type: \"completion-meta\", value: data.meta});\n        if (data.message)\n            tokens.push({type: \"completion-message\", value: data.message});\n\n        return tokens;\n    };\n    bgTokenizer.$updateOnChange = noop;\n    bgTokenizer.start = noop;\n\n    popup.session.$computeWidth = function() {\n        return this.screenWidth = 0;\n    };\n    popup.isOpen = false;\n    popup.isTopdown = false;\n    popup.autoSelect = true;\n    popup.filterText = \"\";\n\n    popup.data = [];\n    popup.setData = function(list, filterText) {\n        popup.filterText = filterText || \"\";\n        popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n        popup.data = list || [];\n        popup.setRow(0);\n    };\n    popup.getData = function(row) {\n        return popup.data[row];\n    };\n\n    popup.getRow = function() {\n        return selectionMarker.start.row;\n    };\n    popup.setRow = function(line) {\n        line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n        if (selectionMarker.start.row != line) {\n            popup.selection.clearSelection();\n            selectionMarker.start.row = selectionMarker.end.row = line || 0;\n            popup.session._emit(\"changeBackMarker\");\n            popup.moveCursorTo(line || 0, 0);\n            if (popup.isOpen)\n                popup._signal(\"select\");\n        }\n    };\n\n    popup.on(\"changeSelection\", function() {\n        if (popup.isOpen)\n            popup.setRow(popup.selection.lead.row);\n        popup.renderer.scrollCursorIntoView();\n    });\n\n    popup.hide = function() {\n        this.container.style.display = \"none\";\n        this._signal(\"hide\");\n        popup.isOpen = false;\n    };\n    popup.show = function(pos, lineHeight, topdownOnly) {\n        var el = this.container;\n        var screenHeight = window.innerHeight;\n        var screenWidth = window.innerWidth;\n        var renderer = this.renderer;\n        var maxH = renderer.$maxLines * lineHeight * 1.4;\n        var top = pos.top + this.$borderSize;\n        var allowTopdown = top > screenHeight / 2 && !topdownOnly;\n        if (allowTopdown && top + lineHeight + maxH > screenHeight) {\n            renderer.$maxPixelHeight = top - 2 * this.$borderSize;\n            el.style.top = \"\";\n            el.style.bottom = screenHeight - top + \"px\";\n            popup.isTopdown = false;\n        } else {\n            top += lineHeight;\n            renderer.$maxPixelHeight = screenHeight - top - 0.2 * lineHeight;\n            el.style.top = top + \"px\";\n            el.style.bottom = \"\";\n            popup.isTopdown = true;\n        }\n\n        el.style.display = \"\";\n\n        var left = pos.left;\n        if (left + el.offsetWidth > screenWidth)\n            left = screenWidth - el.offsetWidth;\n\n        el.style.left = left + \"px\";\n\n        this._signal(\"show\");\n        lastMouseEvent = null;\n        popup.isOpen = true;\n    };\n\n    popup.goTo = function(where) {\n        var row = this.getRow();\n        var max = this.session.getLength() - 1;\n\n        switch(where) {\n            case \"up\": row = row <= 0 ? max : row - 1; break;\n            case \"down\": row = row >= max ? -1 : row + 1; break;\n            case \"start\": row = 0; break;\n            case \"end\": row = max; break;\n        }\n\n        this.setRow(row);\n    };\n\n\n    popup.getTextLeftOffset = function() {\n        return this.$borderSize + this.renderer.$padding + this.$imageSize;\n    };\n\n    popup.$imageSize = 0;\n    popup.$borderSize = 1;\n\n    return popup;\n};\n\ndom.importCssString(\"\\\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\\n    background-color: #CAD6FA;\\\n    z-index: 1;\\\n}\\\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\\\n    background-color: #3a674e;\\\n}\\\n.ace_editor.ace_autocomplete .ace_line-hover {\\\n    border: 1px solid #abbffe;\\\n    margin-top: -1px;\\\n    background: rgba(233,233,253,0.4);\\\n    position: absolute;\\\n    z-index: 2;\\\n}\\\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\\\n    border: 1px solid rgba(109, 150, 13, 0.8);\\\n    background: rgba(58, 103, 78, 0.62);\\\n}\\\n.ace_completion-meta {\\\n    opacity: 0.5;\\\n    margin: 0.9em;\\\n}\\\n.ace_completion-message {\\\n    color: blue;\\\n}\\\n.ace_editor.ace_autocomplete .ace_completion-highlight{\\\n    color: #2d69c7;\\\n}\\\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\\\n    color: #93ca12;\\\n}\\\n.ace_editor.ace_autocomplete {\\\n    width: 300px;\\\n    z-index: 200000;\\\n    border: 1px lightgray solid;\\\n    position: fixed;\\\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\\\n    line-height: 1.4;\\\n    background: #fefefe;\\\n    color: #111;\\\n}\\\n.ace_dark.ace_editor.ace_autocomplete {\\\n    border: 1px #484747 solid;\\\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\\\n    line-height: 1.4;\\\n    background: #25282c;\\\n    color: #c1c1c1;\\\n}\", \"autocompletion.css\");\n\nexports.AcePopup = AcePopup;\nexports.$singleLineEditor = $singleLineEditor;\n});\n\nace.define(\"ace/autocomplete/util\",[\"require\",\"exports\",\"module\"], function(require, exports, module) {\n\"use strict\";\n\nexports.parForEach = function(array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0)\n        callback();\n    for (var i = 0; i < arLength; i++) {\n        fn(array[i], function(result, err) {\n            completed++;\n            if (completed === arLength)\n                callback(result, err);\n        });\n    }\n};\n\nvar ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\n\nexports.retrievePrecedingIdentifier = function(text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos-1; i >= 0; i--) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf.reverse().join(\"\");\n};\n\nexports.retrieveFollowingIdentifier = function(text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf;\n};\n\nexports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function(completer) {\n        if (completer.identifierRegexps) {\n            completer.identifierRegexps.forEach(function(identifierRegex) {\n                if (!prefix && identifierRegex)\n                    prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n            }.bind(this));\n        }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n};\n\n});\n\nace.define(\"ace/autocomplete\",[\"require\",\"exports\",\"module\",\"ace/keyboard/hash_handler\",\"ace/autocomplete/popup\",\"ace/autocomplete/util\",\"ace/lib/lang\",\"ace/lib/dom\",\"ace/snippets\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar AcePopup = require(\"./autocomplete/popup\").AcePopup;\nvar util = require(\"./autocomplete/util\");\nvar lang = require(\"./lib/lang\");\nvar dom = require(\"./lib/dom\");\nvar snippetManager = require(\"./snippets\").snippetManager;\nvar config = require(\"./config\");\n\nvar Autocomplete = function() {\n    this.autoInsert = false;\n    this.autoSelect = true;\n    this.exactMatch = false;\n    this.gatherCompletionsId = 0;\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys(this.commands);\n\n    this.blurListener = this.blurListener.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.mousedownListener = this.mousedownListener.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n\n    this.changeTimer = lang.delayedCall(function() {\n        this.updateCompletions(true);\n    }.bind(this));\n\n    this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n};\n\n(function() {\n\n    this.$init = function() {\n        this.popup = new AcePopup(document.body || document.documentElement);\n        this.popup.on(\"click\", function(e) {\n            this.insertMatch();\n            e.stop();\n        }.bind(this));\n        this.popup.focus = this.editor.focus.bind(this.editor);\n        this.popup.on(\"show\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"select\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n        return this.popup;\n    };\n\n    this.getPopup = function() {\n        return this.popup || this.$init();\n    };\n\n    this.openPopup = function(editor, prefix, keepPopupPosition) {\n        if (!this.popup)\n            this.$init();\n\n        this.popup.autoSelect = this.autoSelect;\n\n        this.popup.setData(this.completions.filtered, this.completions.filterText);\n\n        editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        \n        var renderer = editor.renderer;\n        this.popup.setRow(this.autoSelect ? 0 : -1);\n        if (!keepPopupPosition) {\n            this.popup.setTheme(editor.getTheme());\n            this.popup.setFontSize(editor.getFontSize());\n\n            var lineHeight = renderer.layerConfig.lineHeight;\n\n            var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n            pos.left -= this.popup.getTextLeftOffset();\n\n            var rect = editor.container.getBoundingClientRect();\n            pos.top += rect.top - renderer.layerConfig.offset;\n            pos.left += rect.left - editor.renderer.scrollLeft;\n            pos.left += renderer.gutterWidth;\n\n            this.popup.show(pos, lineHeight);\n        } else if (keepPopupPosition && !prefix) {\n            this.detach();\n        }\n        this.changeTimer.cancel();\n    };\n\n    this.detach = function() {\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.off(\"changeSelection\", this.changeListener);\n        this.editor.off(\"blur\", this.blurListener);\n        this.editor.off(\"mousedown\", this.mousedownListener);\n        this.editor.off(\"mousewheel\", this.mousewheelListener);\n        this.changeTimer.cancel();\n        this.hideDocTooltip();\n\n        this.gatherCompletionsId += 1;\n        if (this.popup && this.popup.isOpen)\n            this.popup.hide();\n\n        if (this.base)\n            this.base.detach();\n        this.activated = false;\n        this.completions = this.base = null;\n    };\n\n    this.changeListener = function(e) {\n        var cursor = this.editor.selection.lead;\n        if (cursor.row != this.base.row || cursor.column < this.base.column) {\n            this.detach();\n        }\n        if (this.activated)\n            this.changeTimer.schedule();\n        else\n            this.detach();\n    };\n\n    this.blurListener = function(e) {\n        var el = document.activeElement;\n        var text = this.editor.textInput.getElement();\n        var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n        var container = this.popup && this.popup.container;\n        if (el != text && el.parentNode != container && !fromTooltip\n            && el != this.tooltipNode && e.relatedTarget != text\n        ) {\n            this.detach();\n        }\n    };\n\n    this.mousedownListener = function(e) {\n        this.detach();\n    };\n\n    this.mousewheelListener = function(e) {\n        this.detach();\n    };\n\n    this.goTo = function(where) {\n        this.popup.goTo(where);\n    };\n\n    this.insertMatch = function(data, options) {\n        if (!data)\n            data = this.popup.getData(this.popup.getRow());\n        if (!data)\n            return false;\n\n        var completions = this.completions;\n        this.editor.startOperation({command: {name: \"insertMatch\"}});\n        if (data.completer && data.completer.insertMatch) {\n            data.completer.insertMatch(this.editor, data);\n        } else {\n            if (completions.filterText) {\n                var ranges = this.editor.selection.getAllRanges();\n                for (var i = 0, range; range = ranges[i]; i++) {\n                    range.start.column -= completions.filterText.length;\n                    this.editor.session.remove(range);\n                }\n            }\n            if (data.snippet)\n                snippetManager.insertSnippet(this.editor, data.snippet);\n            else\n                this.editor.execCommand(\"insertstring\", data.value || data);\n        }\n        if (this.completions == completions)\n            this.detach();\n        this.editor.endOperation();\n    };\n\n\n    this.commands = {\n        \"Up\": function(editor) { editor.completer.goTo(\"up\"); },\n        \"Down\": function(editor) { editor.completer.goTo(\"down\"); },\n        \"Ctrl-Up|Ctrl-Home\": function(editor) { editor.completer.goTo(\"start\"); },\n        \"Ctrl-Down|Ctrl-End\": function(editor) { editor.completer.goTo(\"end\"); },\n\n        \"Esc\": function(editor) { editor.completer.detach(); },\n        \"Return\": function(editor) { return editor.completer.insertMatch(); },\n        \"Shift-Return\": function(editor) { editor.completer.insertMatch(null, {deleteSuffix: true}); },\n        \"Tab\": function(editor) {\n            var result = editor.completer.insertMatch();\n            if (!result && !editor.tabstopManager)\n                editor.completer.goTo(\"down\");\n            else\n                return result;\n        },\n\n        \"PageUp\": function(editor) { editor.completer.popup.gotoPageUp(); },\n        \"PageDown\": function(editor) { editor.completer.popup.gotoPageDown(); }\n    };\n\n    this.gatherCompletions = function(editor, callback) {\n        var session = editor.getSession();\n        var pos = editor.getCursorPosition();\n\n        var prefix = util.getCompletionPrefix(editor);\n\n        this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n        this.base.$insertRight = true;\n\n        var matches = [];\n        var total = editor.completers.length;\n        editor.completers.forEach(function(completer, i) {\n            completer.getCompletions(editor, session, pos, prefix, function(err, results) {\n                if (!err && results)\n                    matches = matches.concat(results);\n                callback(null, {\n                    prefix: util.getCompletionPrefix(editor),\n                    matches: matches,\n                    finished: (--total === 0)\n                });\n            });\n        });\n        return true;\n    };\n\n    this.showPopup = function(editor, options) {\n        if (this.editor)\n            this.detach();\n\n        this.activated = true;\n\n        this.editor = editor;\n        if (editor.completer != this) {\n            if (editor.completer)\n                editor.completer.detach();\n            editor.completer = this;\n        }\n\n        editor.on(\"changeSelection\", this.changeListener);\n        editor.on(\"blur\", this.blurListener);\n        editor.on(\"mousedown\", this.mousedownListener);\n        editor.on(\"mousewheel\", this.mousewheelListener);\n\n        this.updateCompletions(false, options);\n    };\n\n    this.updateCompletions = function(keepPopupPosition, options) {\n        if (keepPopupPosition && this.base && this.completions) {\n            var pos = this.editor.getCursorPosition();\n            var prefix = this.editor.session.getTextRange({start: this.base, end: pos});\n            if (prefix == this.completions.filterText)\n                return;\n            this.completions.setFilter(prefix);\n            if (!this.completions.filtered.length)\n                return this.detach();\n            if (this.completions.filtered.length == 1\n            && this.completions.filtered[0].value == prefix\n            && !this.completions.filtered[0].snippet)\n                return this.detach();\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            return;\n        }\n        \n        if (options && options.matches) {\n            var pos = this.editor.getSelectionRange().start;\n            this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n            this.base.$insertRight = true;\n            this.completions = new FilteredList(options.matches);\n            return this.openPopup(this.editor, \"\", keepPopupPosition);\n        }\n        var _id = this.gatherCompletionsId;\n        this.gatherCompletions(this.editor, function(err, results) {\n            var detachIfFinished = function() {\n                if (!results.finished) return;\n                return this.detach();\n            }.bind(this);\n\n            var prefix = results.prefix;\n            var matches = results && results.matches;\n\n            if (!matches || !matches.length)\n                return detachIfFinished();\n            if (prefix.indexOf(results.prefix) !== 0 || _id != this.gatherCompletionsId)\n                return;\n\n            this.completions = new FilteredList(matches);\n\n            if (this.exactMatch)\n                this.completions.exactMatch = true;\n\n            this.completions.setFilter(prefix);\n            var filtered = this.completions.filtered;\n            if (!filtered.length)\n                return detachIfFinished();\n            if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet)\n                return detachIfFinished();\n            if (this.autoInsert && filtered.length == 1 && results.finished)\n                return this.insertMatch(filtered[0]);\n\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n        }.bind(this));\n    };\n\n    this.cancelContextMenu = function() {\n        this.editor.$mouseHandler.cancelContextMenu();\n    };\n\n    this.updateDocTooltip = function() {\n        var popup = this.popup;\n        var all = popup.data;\n        var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n        var doc = null;\n        if (!selected || !this.editor || !this.popup.isOpen)\n            return this.hideDocTooltip();\n        this.editor.completers.some(function(completer) {\n            if (completer.getDocTooltip)\n                doc = completer.getDocTooltip(selected);\n            return doc;\n        });\n        if (!doc && typeof selected != \"string\")\n            doc = selected;\n\n        if (typeof doc == \"string\")\n            doc = {docText: doc};\n        if (!doc || !(doc.docHTML || doc.docText))\n            return this.hideDocTooltip();\n        this.showDocTooltip(doc);\n    };\n\n    this.showDocTooltip = function(item) {\n        if (!this.tooltipNode) {\n            this.tooltipNode = dom.createElement(\"div\");\n            this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip\";\n            this.tooltipNode.style.margin = 0;\n            this.tooltipNode.style.pointerEvents = \"auto\";\n            this.tooltipNode.tabIndex = -1;\n            this.tooltipNode.onblur = this.blurListener.bind(this);\n            this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n        }\n\n        var tooltipNode = this.tooltipNode;\n        if (item.docHTML) {\n            tooltipNode.innerHTML = item.docHTML;\n        } else if (item.docText) {\n            tooltipNode.textContent = item.docText;\n        }\n\n        if (!tooltipNode.parentNode)\n            document.body.appendChild(tooltipNode);\n        var popup = this.popup;\n        var rect = popup.container.getBoundingClientRect();\n        tooltipNode.style.top = popup.container.style.top;\n        tooltipNode.style.bottom = popup.container.style.bottom;\n\n        tooltipNode.style.display = \"block\";\n        if (window.innerWidth - rect.right < 320) {\n            if (rect.left < 320) {\n                if(popup.isTopdown) {\n                    tooltipNode.style.top = rect.bottom + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                } else {\n                    tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n            } else {\n                tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n                tooltipNode.style.left = \"\";\n            }\n        } else {\n            tooltipNode.style.left = (rect.right + 1) + \"px\";\n            tooltipNode.style.right = \"\";\n        }\n    };\n\n    this.hideDocTooltip = function() {\n        this.tooltipTimer.cancel();\n        if (!this.tooltipNode) return;\n        var el = this.tooltipNode;\n        if (!this.editor.isFocused() && document.activeElement == el)\n            this.editor.focus();\n        this.tooltipNode = null;\n        if (el.parentNode)\n            el.parentNode.removeChild(el);\n    };\n    \n    this.onTooltipClick = function(e) {\n        var a = e.target;\n        while (a && a != this.tooltipNode) {\n            if (a.nodeName == \"A\" && a.href) {\n                a.rel = \"noreferrer\";\n                a.target = \"_blank\";\n                break;\n            }\n            a = a.parentNode;\n        }\n    };\n\n    this.destroy = function() {\n        this.detach();\n        if (this.popup) {\n            this.popup.destroy();\n            var el = this.popup.container;\n            if (el && el.parentNode)\n                el.parentNode.removeChild(el);\n        }\n        if (this.editor && this.editor.completer == this)\n            this.editor.completer == null;\n        this.popup = null;\n    };\n\n}).call(Autocomplete.prototype);\n\n\nAutocomplete.for = function(editor) {\n    if (editor.completer) {\n        return editor.completer;\n    }\n    if (config.get(\"sharedPopups\")) {\n        if (!Autocomplete.$shared)\n            Autocomplete.$sharedInstance = new Autocomplete();\n        editor.completer = Autocomplete.$sharedInstance;\n    } else {\n        editor.completer = new Autocomplete();\n        editor.once(\"destroy\", function(e, editor) {\n            editor.completer.destroy();\n        });\n    }\n    return editor.completer;\n};\n\nAutocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function(editor, options) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.autoSelect = true;\n        completer.showPopup(editor, options);\n        completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n};\n\nvar FilteredList = function(array, filterText) {\n    this.all = array;\n    this.filtered = array;\n    this.filterText = filterText || \"\";\n    this.exactMatch = false;\n};\n(function(){\n    this.setFilter = function(str) {\n        if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0)\n            var matches = this.filtered;\n        else\n            var matches = this.all;\n\n        this.filterText = str;\n        matches = this.filterCompletions(matches, this.filterText);\n        matches = matches.sort(function(a, b) {\n            return b.exactMatch - a.exactMatch || b.$score - a.$score \n                || (a.caption || a.value).localeCompare(b.caption || b.value);\n        });\n        var prev = null;\n        matches = matches.filter(function(item){\n            var caption = item.snippet || item.caption || item.value;\n            if (caption === prev) return false;\n            prev = caption;\n            return true;\n        });\n\n        this.filtered = matches;\n    };\n    this.filterCompletions = function(items, needle) {\n        var results = [];\n        var upper = needle.toUpperCase();\n        var lower = needle.toLowerCase();\n        loop: for (var i = 0, item; item = items[i]; i++) {\n            var caption = item.caption || item.value || item.snippet;\n            if (!caption) continue;\n            var lastIndex = -1;\n            var matchMask = 0;\n            var penalty = 0;\n            var index, distance;\n\n            if (this.exactMatch) {\n                if (needle !== caption.substr(0, needle.length))\n                    continue loop;\n            } else {\n                var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n                if (fullMatchIndex > -1) {\n                    penalty = fullMatchIndex;\n                } else {\n                    for (var j = 0; j < needle.length; j++) {\n                        var i1 = caption.indexOf(lower[j], lastIndex + 1);\n                        var i2 = caption.indexOf(upper[j], lastIndex + 1);\n                        index = (i1 >= 0) ? ((i2 < 0 || i1 < i2) ? i1 : i2) : i2;\n                        if (index < 0)\n                            continue loop;\n                        distance = index - lastIndex - 1;\n                        if (distance > 0) {\n                            if (lastIndex === -1)\n                                penalty += 10;\n                            penalty += distance;\n                            matchMask = matchMask | (1 << j);\n                        }\n                        lastIndex = index;\n                    }\n                }\n            }\n            item.matchMask = matchMask;\n            item.exactMatch = penalty ? 0 : 1;\n            item.$score = (item.score || 0) - penalty;\n            results.push(item);\n        }\n        return results;\n    };\n}).call(FilteredList.prototype);\n\nexports.Autocomplete = Autocomplete;\nexports.FilteredList = FilteredList;\n\n});\n\nace.define(\"ace/autocomplete/text_completer\",[\"require\",\"exports\",\"module\",\"ace/range\"], function(require, exports, module) {\n    var Range = require(\"../range\").Range;\n    \n    var splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\n\n    function getWordIndex(doc, pos) {\n        var textBefore = doc.getTextRange(Range.fromPoints({row: 0, column:0}, pos));\n        return textBefore.split(splitRegex).length - 1;\n    }\n    function wordDistance(doc, pos) {\n        var prefixPos = getWordIndex(doc, pos);\n        var words = doc.getValue().split(splitRegex);\n        var wordScores = Object.create(null);\n        \n        var currentWord = words[prefixPos];\n\n        words.forEach(function(word, idx) {\n            if (!word || word === currentWord) return;\n\n            var distance = Math.abs(prefixPos - idx);\n            var score = words.length - distance;\n            if (wordScores[word]) {\n                wordScores[word] = Math.max(score, wordScores[word]);\n            } else {\n                wordScores[word] = score;\n            }\n        });\n        return wordScores;\n    }\n\n    exports.getCompletions = function(editor, session, pos, prefix, callback) {\n        var wordScore = wordDistance(session, pos);\n        var wordList = Object.keys(wordScore);\n        callback(null, wordList.map(function(word) {\n            return {\n                caption: word,\n                value: word,\n                score: wordScore[word],\n                meta: \"local\"\n            };\n        }));\n    };\n});\n\nace.define(\"ace/ext/language_tools\",[\"require\",\"exports\",\"module\",\"ace/snippets\",\"ace/autocomplete\",\"ace/config\",\"ace/lib/lang\",\"ace/autocomplete/util\",\"ace/autocomplete/text_completer\",\"ace/editor\",\"ace/config\"], function(require, exports, module) {\n\"use strict\";\n\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Autocomplete = require(\"../autocomplete\").Autocomplete;\nvar config = require(\"../config\");\nvar lang = require(\"../lib/lang\");\nvar util = require(\"../autocomplete/util\");\n\nvar textCompleter = require(\"../autocomplete/text_completer\");\nvar keyWordCompleter = {\n    getCompletions: function(editor, session, pos, prefix, callback) {\n        if (session.$mode.completer) {\n            return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n        }\n        var state = editor.session.getState(pos.row);\n        var completions = session.$mode.getCompletions(state, session, pos, prefix);\n        callback(null, completions);\n    }\n};\n\nvar snippetCompleter = {\n    getCompletions: function(editor, session, pos, prefix, callback) {\n        var scopes = [];\n        var token = session.getTokenAt(pos.row, pos.column);\n        if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/))\n            scopes.push('html-tag');\n        else\n            scopes = snippetManager.getActiveScopes(editor);\n\n        var snippetMap = snippetManager.snippetMap;\n        var completions = [];\n        scopes.forEach(function(scope) {\n            var snippets = snippetMap[scope] || [];\n            for (var i = snippets.length; i--;) {\n                var s = snippets[i];\n                var caption = s.name || s.tabTrigger;\n                if (!caption)\n                    continue;\n                completions.push({\n                    caption: caption,\n                    snippet: s.content,\n                    meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n                    type: \"snippet\"\n                });\n            }\n        }, this);\n        callback(null, completions);\n    },\n    getDocTooltip: function(item) {\n        if (item.type == \"snippet\" && !item.docHTML) {\n            item.docHTML = [\n                \"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\",\n                lang.escapeHTML(item.snippet)\n            ].join(\"\");\n        }\n    }\n};\n\nvar completers = [snippetCompleter, textCompleter, keyWordCompleter];\nexports.setCompleters = function(val) {\n    completers.length = 0;\n    if (val) completers.push.apply(completers, val);\n};\nexports.addCompleter = function(completer) {\n    completers.push(completer);\n};\nexports.textCompleter = textCompleter;\nexports.keyWordCompleter = keyWordCompleter;\nexports.snippetCompleter = snippetCompleter;\n\nvar expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function(editor) {\n        return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n};\n\nvar onChangeMode = function(e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n};\n\nvar loadSnippetsForMode = function(mode) {\n    if (typeof mode == \"string\")\n        mode = config.$modes[mode];\n    if (!mode)\n        return;\n    if (!snippetManager.files)\n        snippetManager.files = {};\n    \n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes)\n        mode.modes.forEach(loadSnippetsForMode);\n};\n\nvar loadSnippetFile = function(id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id])\n        return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function(m) {\n        if (!m) return;\n        snippetManager.files[id] = m;\n        if (!m.snippets && m.snippetText)\n            m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n        snippetManager.register(m.snippets || [], m.scope);\n        if (m.includeScopes) {\n            snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n            m.includeScopes.forEach(function(x) {\n                loadSnippetsForMode(\"ace/mode/\" + x);\n            });\n        }\n    });\n};\n\nvar doLiveAutocomplete = function(e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n    if (e.command.name === \"backspace\") {\n        if (hasCompleter && !util.getCompletionPrefix(editor))\n            editor.completer.detach();\n    }\n    else if (e.command.name === \"insertstring\") {\n        var prefix = util.getCompletionPrefix(editor);\n        if (prefix && !hasCompleter) {\n            var completer = Autocomplete.for(editor);\n            completer.autoInsert = false;\n            completer.showPopup(editor);\n        }\n    }\n};\n\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n        set: function(val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val)? val: completers;\n                this.commands.addCommand(Autocomplete.startCommand);\n            } else {\n                this.commands.removeCommand(Autocomplete.startCommand);\n            }\n        },\n        value: false\n    },\n    enableLiveAutocompletion: {\n        set: function(val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val)? val: completers;\n                this.commands.on('afterExec', doLiveAutocomplete);\n            } else {\n                this.commands.removeListener('afterExec', doLiveAutocomplete);\n            }\n        },\n        value: false\n    },\n    enableSnippets: {\n        set: function(val) {\n            if (val) {\n                this.commands.addCommand(expandSnippet);\n                this.on(\"changeMode\", onChangeMode);\n                onChangeMode(null, this);\n            } else {\n                this.commands.removeCommand(expandSnippet);\n                this.off(\"changeMode\", onChangeMode);\n            }\n        },\n        value: false\n    }\n});\n});                (function() {\n                    ace.require([\"ace/ext/language_tools\"], function(m) {\n                        if (typeof module == \"object\" && typeof exports == \"object\" && module) {\n                            module.exports = m;\n                        }\n                    });\n                })();\n            ","\r\nexport type vec2 = Vector2;\r\n\r\nconst V2Constructor: new (...p: [number, number]) => [number, number] = Array as any;\r\nexport class Vector2 extends V2Constructor\r\n{\r\n    get x() { return this[0]; }\r\n    set x(x: number) { this[0] = x; }\r\n    get y() { return this[1]; }\r\n    set y(y: number) { this[1] = y; }\r\n\r\n    get magnitude()\r\n    {\r\n        return Math.hypot(...this);\r\n    }\r\n\r\n    get normalized()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec2.zero() : this.clone().div(vec2(m, m));\r\n    }\r\n    get negative()\r\n    {\r\n        return this.clone().negate();\r\n    }\r\n    get inversed()\r\n    {\r\n        return this.clone().inverse();\r\n    }\r\n\r\n    constructor(x: number, y: number)\r\n    {\r\n        super(x, y);\r\n    }\r\n\r\n    static zero()\r\n    {\r\n        return new Vector2(0, 0);\r\n    }\r\n    static one()\r\n    {\r\n        return new Vector2(1, 1);\r\n    }\r\n    static up()\r\n    {\r\n        return new Vector2(0, 1);\r\n    }\r\n    static down()\r\n    {\r\n        return new Vector2(0, -1);\r\n    }\r\n    static left() { return new Vector2(-1, 0) }\r\n    static right() { return new Vector2(1, 0) }\r\n\r\n    plus(v: Vector2)\r\n    {\r\n        this[0] += v[0];\r\n        this[1] += v[1];\r\n        return this;\r\n    }\r\n    minus(v: Vector2)\r\n    {\r\n        this[0] -= v[0];\r\n        this[1] -= v[1];\r\n        return this;\r\n    }\r\n    mul(v: Vector2)\r\n    {\r\n        this[0] *= v[0];\r\n        this[1] *= v[1];\r\n        return this;\r\n    }\r\n    div(v: Vector2)\r\n    {\r\n        this[0] /= v[0];\r\n        this[1] /= v[1];\r\n        return this;\r\n    }\r\n    dot(v: Vector2)\r\n    {\r\n        return this[0] * v[0]\r\n            + this[1] * v[1];\r\n    }\r\n    normalize()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec2.zero() : this.clone().div(vec2(m, m));\r\n    }\r\n    inverse()\r\n    {\r\n        this[0] = 1 / this[0];\r\n        this[1] = 1 / this[1];\r\n        return this;\r\n    }\r\n    negate()\r\n    {\r\n        this[0] = -this[0];\r\n        this[1] = -this[1];\r\n        return this;\r\n    }\r\n    /**\r\n     * cross product with vec3\r\n     * @param a u\r\n     * @param b v\r\n     */\r\n    cross(b: Vector2)\r\n    {\r\n        return this.x * b.y - this.y * b.x;\r\n    }\r\n\r\n    clone()\r\n    {\r\n        return vec2(this[0], this[1]);\r\n    }\r\n\r\n    toVec3(z = 0)\r\n    {\r\n        return vec3(this[0], this[1], z);\r\n    }\r\n    __to(type: Function)\r\n    {\r\n        switch (type)\r\n        {\r\n            case Vector4:\r\n                return vec4(this[0], this[1], 0, 0);\r\n            case Vector3:\r\n                return vec3(this[0], this[1], 0);\r\n        }\r\n        return this.clone();\r\n    }\r\n}\r\n\r\nexport function vec2(x: number): Vector2\r\nexport function vec2(x: number, y: number): Vector2\r\nexport function vec2(x: number, y = x): Vector2\r\n{\r\n    return new Vector2(x, y);\r\n}\r\nvec2.from = (src: Iterable<number>) =>\r\n{\r\n    const [x = 0, y = 0] = src;\r\n    return vec2(x, y);\r\n}\r\nvec2.zero = Vector2.zero;\r\nvec2.one = Vector2.one;\r\nvec2.left = Vector2.left;\r\nvec2.right = Vector2.right;\r\nvec2.down = Vector2.down;\r\nvec2.up = Vector2.up;\r\n\r\n\r\n/// Vec3\r\n\r\nexport type vec3 = Vector3;\r\n\r\nconst V3Constructor: new (...p: [number, number, number]) => [number, number, number] = Array as any;\r\nexport class Vector3 extends V3Constructor\r\n{\r\n    get x() { return this[0]; }\r\n    set x(x: number) { this[0] = x; }\r\n    get y() { return this[1]; }\r\n    set y(y: number) { this[1] = y; }\r\n    get z() { return this[2]; }\r\n    set z(z: number) { this[2] = z; }\r\n\r\n    get magnitude()\r\n    {\r\n        return Math.hypot(...this);\r\n    }\r\n\r\n    get normalized()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec3.zero() : this.clone().div(vec3(m, m, m));\r\n    }\r\n\r\n    get negative()\r\n    {\r\n        return this.clone().negate();\r\n    }\r\n    get inversed()\r\n    {\r\n        return this.clone().inverse();\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number)\r\n    {\r\n        super(x, y, z);\r\n    }\r\n\r\n    static zero()\r\n    {\r\n        return new Vector3(0, 0, 0);\r\n    }\r\n    static one()\r\n    {\r\n        return new Vector3(1, 1, 1);\r\n    }\r\n    plus(v: Vector3)\r\n    {\r\n        this[0] += v[0];\r\n        this[1] += v[1];\r\n        this[2] += v[2];\r\n        return this;\r\n    }\r\n    minus(v: Vector3)\r\n    {\r\n        this[0] -= v[0];\r\n        this[1] -= v[1];\r\n        this[2] -= v[2];\r\n        return this;\r\n    }\r\n    mul(v: Vector3)\r\n    {\r\n        this[0] *= v[0];\r\n        this[1] *= v[1];\r\n        this[2] *= v[2];\r\n        return this;\r\n    }\r\n    div(v: Vector3)\r\n    {\r\n        this[0] /= v[0];\r\n        this[1] /= v[1];\r\n        this[2] /= v[2];\r\n        return this;\r\n    }\r\n    dot(v: Vector3)\r\n    {\r\n        return this[0] * v[0]\r\n            + this[1] * v[1]\r\n            + this[2] * v[2];\r\n    }\r\n    normalize()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec3.zero() : this.clone().div(vec3(m, m, m));\r\n    }\r\n    inverse()\r\n    {\r\n        this[0] = 1 / this[0];\r\n        this[1] = 1 / this[1];\r\n        this[2] = 1 / this[2];\r\n        return this;\r\n    }\r\n    negate()\r\n    {\r\n        this[0] = -this[0];\r\n        this[1] = -this[1];\r\n        this[2] = -this[2];\r\n        return this;\r\n    }\r\n    /**\r\n     * cross product with vec3\r\n     * @param a u\r\n     * @param b v\r\n     */\r\n    cross(b: Vector3)\r\n    {\r\n        return vec3(\r\n            this.y * b.z - this.z * b.y,\r\n            this.z * b.x - this.x * b.z,\r\n            this.x * b.y - this.y * b.x\r\n        );\r\n    }\r\n\r\n    clone()\r\n    {\r\n        return vec3(this[0], this[1], this[2]);\r\n    }\r\n\r\n    toVec2()\r\n    {\r\n        return vec2(this[0], this[1]);\r\n    }\r\n\r\n    __to(type: Function)\r\n    {\r\n        switch (type)\r\n        {\r\n            case Vector4:\r\n                return vec4(this[0], this[1], this[2], 0);\r\n            case Vector2:\r\n                return vec2(this[0], this[1]);\r\n        }\r\n        return this.clone();\r\n    }\r\n}\r\nexport function vec3(x: number): Vector3\r\nexport function vec3(x: number, y: number, z: number): Vector3\r\nexport function vec3(x: number, y: number = x, z: number = x): Vector3\r\n{\r\n    return new Vector3(x, y, z);\r\n}\r\nvec3.from = (src: Iterable<number>) =>\r\n{\r\n    const [x = 0, y = 0, z = 0] = src;\r\n    return vec3(x, y, z);\r\n}\r\nvec3.zero = Vector3.zero;\r\nvec3.one = Vector3.one;\r\n\r\n\r\n\r\n/// Vec4\r\n\r\nexport type vec4 = Vector4;\r\n\r\nconst V4Constructor: new (...p: [number, number, number, number]) => [number, number, number, number] = Array as any;\r\nexport class Vector4 extends V4Constructor\r\n{\r\n    get x() { return this[0]; }\r\n    set x(x: number) { this[0] = x; }\r\n    get y() { return this[1]; }\r\n    set y(y: number) { this[1] = y; }\r\n    get z() { return this[2]; }\r\n    set z(z: number) { this[2] = z; }\r\n    get w() { return this[3]; }\r\n    set w(w: number) { this[3] = w }\r\n\r\n    get magnitude()\r\n    {\r\n        return Math.hypot(...this);\r\n    }\r\n\r\n    get normalized()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec4.zero() : this.clone().div(vec4(m, m, m, m));\r\n    }\r\n    get negative()\r\n    {\r\n        return this.clone().negate();\r\n    }\r\n    get inversed()\r\n    {\r\n        return this.clone().inverse();\r\n    }\r\n\r\n    constructor(x: number, y: number, z: number = 0, w: number = 0)\r\n    {\r\n        super(x, y, z || 0, w || 0);\r\n    }\r\n\r\n    static zero()\r\n    {\r\n        return new Vector4(0, 0, 0, 0);\r\n    }\r\n    static one()\r\n    {\r\n        return new Vector4(1, 1, 1, 1);\r\n    }\r\n    plus(v: Vector4)\r\n    {\r\n        this[0] += v[0];\r\n        this[1] += v[1];\r\n        this[2] += v[2];\r\n        this[3] += v[3];\r\n        return this;\r\n    }\r\n    minus(v: Vector4)\r\n    {\r\n        this[0] -= v[0];\r\n        this[1] -= v[1];\r\n        this[2] -= v[2];\r\n        this[3] -= v[3];\r\n        return this;\r\n    }\r\n    mul(v: Vector4)\r\n    {\r\n        this[0] *= v[0];\r\n        this[1] *= v[1];\r\n        this[2] *= v[2];\r\n        this[3] *= v[3];\r\n        return this;\r\n    }\r\n    div(v: Vector4)\r\n    {\r\n        this[0] /= v[0];\r\n        this[1] /= v[1];\r\n        this[2] /= v[2];\r\n        this[3] /= v[3];\r\n        return this;\r\n    }\r\n    dot(v: Vector4)\r\n    {\r\n        return this[0] * v[0]\r\n            + this[1] * v[1]\r\n            + this[2] * v[2]\r\n            + this[3] * v[3];\r\n    }\r\n    normalize()\r\n    {\r\n        const m = this.magnitude;\r\n        return m == 0 ? vec4.zero() : this.clone().div(vec4(m, m, m, m));\r\n    }\r\n    inverse()\r\n    {\r\n        this[0] = 1 / this[0];\r\n        this[1] = 1 / this[1];\r\n        this[2] = 1 / this[2];\r\n        this[3] = 1 / this[3];\r\n        return this;\r\n    }\r\n    negate()\r\n    {\r\n        this[0] = -this[0];\r\n        this[1] = -this[1];\r\n        this[2] = -this[2];\r\n        this[3] = -this[3];\r\n        return this;\r\n    }\r\n    clone()\r\n    {\r\n        return vec4(this[0], this[1], this[2], this[3]);\r\n    }\r\n    __to(type: Function)\r\n    {\r\n        switch (type)\r\n        {\r\n            case Vector4:\r\n                return this.clone();\r\n            case Vector3:\r\n                return vec3(this[0], this[1], this[2]);\r\n            case Vector2:\r\n                return vec2(this[0], this[1]);\r\n        }\r\n        return this.clone();\r\n    }\r\n}\r\n\r\nexport function vec4(x: number): Vector4\r\nexport function vec4(x: number, y: number, z: number, w: number): Vector4\r\nexport function vec4(x: number, y: number = x, z: number = x, w: number = x): Vector4\r\n{\r\n    return new Vector4(x, y, z, w);\r\n}\r\n\r\nvec4.from = (src: Iterable<number>) =>\r\n{\r\n    const [x = 0, y = 0, z = 0, w = 0] = src;\r\n    return vec4(x, y, z, w);\r\n}\r\nvec4.zero = Vector4.zero;\r\nvec4.one = Vector4.one;\r\n\r\n\r\nexport class Color extends Vector4\r\n{\r\n    get r() { return this[0]; }\r\n    set r(r: number) { this[0] = r; }\r\n    get g() { return this[1]; }\r\n    set g(g: number) { this[1] = g; }\r\n    get b() { return this[2]; }\r\n    set b(b: number) { this[2] = b; }\r\n    get a() { return this[3]; }\r\n    set a(a: number) { this[3] = a }\r\n\r\n    constructor(r: number, g: number, b: number, a: number = 1)\r\n    {\r\n        super(r, g, b, a);\r\n    }\r\n\r\n    static get white() { return new Color(1, 1, 1); }\r\n    static get transparent() { return new Color(1, 1, 1, 0); }\r\n    static get black() { return new Color(0, 0, 0); }\r\n    static get red() { return new Color(1, 0, 0); }\r\n    static get green() { return new Color(0, 1, 0); }\r\n    static get blue() { return new Color(0, 0, 1); }\r\n    static get cyan() { return new Color(0, 1, 1); }\r\n    static get yellow() { return new Color(1, 1, 0); }\r\n    static get magenta() { return new Color(1, 0, 1); }\r\n    static get gray() { return new Color(.5, .5, .5); }\r\n}\r\n\r\nexport const rgba = (r: number, g: number, b: number, a: number = 1) => new Color(r, g, b, a);\r\nexport const rgb = (r: number, g: number, b: number) => new Color(r, g, b, 1);\r\n\r\n\r\n\r\ntype vec = number | vec2 | vec3 | vec4;\r\n\r\ntype Larger<U extends vec, V extends vec> =\r\n    U extends vec4 ? vec4 :\r\n    V extends vec4 ? vec4 :\r\n    U extends vec3 ? vec3 :\r\n    V extends vec3 ? vec3 :\r\n    U extends vec2 ? vec2 :\r\n    V extends vec2 ? vec2 :\r\n    number;\r\n\r\ntype ArithmeticType<U extends vec, V extends vec> = Larger<U, V>\r\n\r\n(Number as any).prototype.__to = function (type: Function)\r\n{\r\n    switch (type)\r\n    {\r\n        case Vector4:\r\n            return vec4(this.valueOf(), this.valueOf(), this.valueOf(), this.valueOf());\r\n        case Vector3:\r\n            return vec3(this.valueOf(), this.valueOf(), this.valueOf());\r\n        case Vector2:\r\n            return vec2(this.valueOf(), this.valueOf());\r\n    }\r\n    return this.valueOf();\r\n}\r\n\r\nfunction _arithOrder<U extends vec, V extends vec>(a: U, b: V): [any, any, boolean]\r\n{\r\n    if (typeof (a) === \"number\")\r\n        return [b, a, true];\r\n    else if (typeof (b) === \"number\")\r\n        return [a, b, false];\r\n    return ((b as number[]).length > (a as number[]).length ? [b, a, true] : [a, b, false]);\r\n}\r\n\r\n\r\nexport function plus<U extends vec, V extends vec>(a: U, b: V): ArithmeticType<U, V>\r\n{\r\n    const [lhs, rhs] = _arithOrder(a, b);\r\n    return rhs.__to(lhs.constructor).plus(lhs);\r\n}\r\nexport function minus<U extends vec, V extends vec>(a: U, b: V): ArithmeticType<U, V>\r\n{\r\n    const [lhs, rhs, invert] = _arithOrder(a, b);\r\n    return invert\r\n        ? rhs.__to(lhs.constructor).minus(lhs)\r\n        : rhs.__to(lhs.constructor).minus(lhs).negate();\r\n}\r\n\r\nexport function mul<U extends vec, V extends vec>(a: U, b: V): ArithmeticType<U, V>\r\n{\r\n    const [lhs, rhs] = _arithOrder(a, b);\r\n    return rhs.__to(lhs.constructor).mul(lhs);\r\n}\r\nexport function div<U extends vec, V extends vec>(a: U, b: V): ArithmeticType<U, V>\r\n{\r\n    const [lhs, rhs, invert] = _arithOrder(a, b);\r\n    return invert\r\n        ? rhs.__to(lhs.constructor).div(lhs)\r\n        : rhs.__to(lhs.constructor).div(lhs).inversed;\r\n}\r\n\r\nexport function dot(a: vec3, b: vec3): number\r\n{\r\n    return a.dot(b);\r\n}\r\nexport function cross(a: vec3, b: vec3)\r\n{\r\n    return a.cross(b);\r\n}\r\n\r\n\r\nconst Deg2Rad = Math.PI / 180;\r\nconst Rad2Deg = 180 / Math.PI;\r\n"],"sourceRoot":""}